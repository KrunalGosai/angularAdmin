(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"6kFG":function(e,t,a){"use strict";a.r(t),a.d(t,"BannersModule",(function(){return ne}));var r=a("PCNd"),n=a("tyNb"),i=a("Xibt"),o=a("Dh3D"),c=a("M9IT"),s=a("+0xr"),b=a("2Vo4"),l=a("fXoL");let d=(()=>{class e{constructor(){this.banners=new b.a({})}getBanner(){return this.banners.asObservable()}setBanner(e){this.banners.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=a("AytR"),u=a("tk/3");let p=(()=>{class e{constructor(e){this.http=e,this.baseURl=m.a.SERVER_ORIGIN}getAllBanner(e=1,t=5,a=""){let r=this.baseURl+`/api/banner?currentPage=${e}&currentPageSize=${t}`;return null!=a&&null!=a&&""!=a.trim()&&(r+="&searchByName="+a),this.http.get(r)}newBanner(e){return this.http.post(this.baseURl+"/api/banner",{name:e.name,banner_image_url:e.banner_image_url,banner_redirect_url:e.banner_redirect_url,is_active:e.is_active,type:e.type,category_id:e.category_id})}deleteBanner(e){return this.http.delete(this.baseURl+"/api/banner/delete/"+e)}getBannerDetailsById(e){return this.http.get(this.baseURl+"/api/banner/"+e)}updateBanner(e){return this.http.put(this.baseURl+"/api/banner/edit/"+e._id,{name:e.name,banner_image_url:e.banner_image_url,banner_redirect_url:e.banner_redirect_url,is_active:e.is_active,type:e.type,category_id:e.category_id})}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(u.b))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=a("vkgz"),f=a("5eHb");let g=(()=>{class e{constructor(e,t,a){this.api=e,this.state=t,this.toster=a}loadBanners(e=1,t=5,a=""){this.api.getAllBanner(e,t,a).subscribe(e=>{this.state.setBanner(e)},e=>console.error("api call error from load categories ",e))}getBanners(){return this.state.getBanner().pipe(Object(h.a)(e=>e))}newBanner(e){return this.api.newBanner(e).toPromise().then(e=>(this.loadBanners(),this.toster.success("Banner Successfully Created","Success",{timeOut:3e3}),e)).catch(e=>(console.error("api call error from new banner ",e),e))}deleteBanner(e){return this.api.deleteBanner(e).toPromise().then(e=>(this.toster.success("Banner Successfully Deleted","Success",{timeOut:3e3}),e)).catch(e=>(console.error("api call error from Delete baner ",e),e))}getBannerDetails(e){return this.api.getBannerDetailsById(e).toPromise()}updateBanner(e){return this.api.updateBanner(e).toPromise().then(e=>(this.loadBanners(),this.toster.success("Banner Successfully Updated","Success",{timeOut:3e3}),e)).catch(e=>(console.error("api call error from Update banner ",e),e))}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(p),l.Yb(d),l.Yb(f.b))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=a("tgey"),U=a("bTqV"),T=a("XiUz"),y=a("Wp6s"),P=a("3Pt+"),_=a("kmnG"),C=a("qFsG"),B=a("zkoq"),w=a("NFeN");function F(e,t){1&e&&(l.Ub(0,"th",19),l.Pc(1," Name "),l.Tb())}function N(e,t){if(1&e&&(l.Ub(0,"td",20),l.Pc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Rc(" ",e.name," ")}}function I(e,t){1&e&&(l.Ub(0,"th",19),l.Pc(1," Banner Image "),l.Tb())}function R(e,t){if(1&e&&(l.Ub(0,"td",20),l.Pb(1,"img",21),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.qc("src",e.banner_image_url,l.Fc)}}function S(e,t){1&e&&(l.Ub(0,"th",19),l.Pc(1," Type "),l.Tb())}function x(e,t){if(1&e&&(l.Ub(0,"td",20),l.Pc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Rc(" ",e.type," ")}}function D(e,t){1&e&&(l.Ub(0,"th",19),l.Pc(1," Category "),l.Tb())}function E(e,t){if(1&e&&(l.Ub(0,"td",20),l.Pc(1),l.Tb()),2&e){const e=t.$implicit;l.Cb(1),l.Rc(" ",e.category_id," ")}}function O(e,t){1&e&&(l.Ub(0,"th",19),l.Pc(1," Controls "),l.Tb())}const M=function(e){return["edit",e]};function k(e,t){if(1&e){const e=l.Vb();l.Ub(0,"td",20),l.Ub(1,"mat-grid-list",22),l.Ub(2,"mat-grid-tile"),l.Ub(3,"button",23),l.Ub(4,"mat-icon",24),l.Pc(5,"create"),l.Tb(),l.Tb(),l.Tb(),l.Ub(6,"mat-grid-tile"),l.Ub(7,"button",25),l.cc("click",(function(){l.Dc(e);const a=t.$implicit;return l.gc().deleteIcon(a._id)})),l.Ub(8,"mat-icon",26),l.Pc(9,"delete"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit;l.Cb(3),l.pc("routerLink",l.sc(1,M,e._id))}}function q(e,t){1&e&&l.Pb(0,"tr",27)}function L(e,t){1&e&&l.Pb(0,"tr",28)}const z=function(){return[5,10,25]};let A=(()=>{class e{constructor(e,t){this.bannerFacade=e,this.confirmService=t,this.displayedColumns=["name","Banner Image","Type","Category","controls"],this.bannerNameFilter="",this.pageDetails={currentPage:1,itemsPerPage:5,totalPages:3,totalRecords:100},this.totalBanner=0,this.q={username:"",email:"",gender:""}}ngOnInit(){this.bannerFacade.loadBanners(),this.bannerFacade.getBanners().subscribe(e=>{this.dataSource=new s.p(e.data),this.totalBanner=e.totalCount})}ngAfterViewInit(){this.dataSource.sort=this.sort}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}pageEvent(e){this.pageDetails.itemsPerPage=e.pageSize,this.pageDetails.currentPage=e.pageIndex+1,this.bannerFacade.loadBanners(this.pageDetails.currentPage,e.pageSize,"")}deleteIcon(e){this.confirmService.confirm("Are you sure want to delete this Banner?","Confirm").subscribe(t=>{1==t&&this.bannerFacade.deleteBanner(e).then(e=>this.bannerFacade.loadBanners(this.pageDetails.currentPage,this.pageDetails.itemsPerPage))})}navigateToEdit(e){}filterBanner(){this.bannerFacade.loadBanners(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.bannerNameFilter)}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(g),l.Ob(i.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-banners-banner-list"]],viewQuery:function(e,t){var a;1&e&&(l.Sc(c.a,!0),l.Sc(o.a,!0)),2&e&&(l.yc(a=l.dc())&&(t.paginator=a.first),l.yc(a=l.dc())&&(t.sort=a.first))},decls:36,vars:8,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[1,"m-r-8"],["matInput","","placeholder","Name","name","bannerNameFilter",3,"ngModel","ngModelChange"],["fxFlex","25","fxFlex.lt-sm","100",1,"matero-col"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Banner Image"],["matColumnDef","Type"],["matColumnDef","Category"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","Banner Image","width","100px","height","50px",3,"src"],["cols","2","rowHeight","50px"],["mat-icon-button","","aria-label","Edit",3,"routerLink"],["color","primary"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Pb(0,"page-header"),l.Ub(1,"section"),l.Ub(2,"a",0),l.Pc(3," Add New "),l.Tb(),l.Tb(),l.Pb(4,"br"),l.Ub(5,"div",1),l.Ub(6,"div",2),l.Ub(7,"mat-card"),l.Ub(8,"mat-card-title"),l.Pc(9,"Filter"),l.Tb(),l.Ub(10,"form"),l.Ub(11,"mat-form-field",3),l.Ub(12,"input",4),l.cc("ngModelChange",(function(e){return t.bannerNameFilter=e})),l.Tb(),l.Tb(),l.Ub(13,"div",5),l.Ub(14,"button",6),l.cc("click",(function(){return t.filterBanner()})),l.Pc(15,"Search"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(16,"div",7),l.Ub(17,"table",8),l.Sb(18,9),l.Nc(19,F,2,0,"th",10),l.Nc(20,N,2,1,"td",11),l.Rb(),l.Sb(21,12),l.Nc(22,I,2,0,"th",10),l.Nc(23,R,2,1,"td",11),l.Rb(),l.Sb(24,13),l.Nc(25,S,2,0,"th",10),l.Nc(26,x,2,1,"td",11),l.Rb(),l.Sb(27,14),l.Nc(28,D,2,0,"th",10),l.Nc(29,E,2,1,"td",11),l.Rb(),l.Sb(30,15),l.Nc(31,O,2,0,"th",10),l.Nc(32,k,10,3,"td",11),l.Rb(),l.Nc(33,q,1,0,"tr",16),l.Nc(34,L,1,0,"tr",17),l.Tb(),l.Ub(35,"mat-paginator",18),l.cc("page",(function(e){return t.pageEvent(e)})),l.Tb(),l.Tb()),2&e&&(l.Cb(12),l.pc("ngModel",t.bannerNameFilter),l.Cb(5),l.pc("dataSource",t.dataSource),l.Cb(16),l.pc("matHeaderRowDef",t.displayedColumns),l.Cb(1),l.pc("matRowDefColumns",t.displayedColumns),l.Cb(1),l.pc("length",t.totalBanner)("pageSize",t.pageDetails.itemsPerPage)("pageSizeOptions",l.rc(7,z)))},directives:[v.a,U.a,n.i,T.c,T.a,y.a,y.c,P.x,P.q,P.r,_.c,C.b,P.d,P.p,P.s,U.b,s.o,o.a,s.c,s.i,s.b,s.k,s.n,c.a,s.h,o.b,s.a,B.a,B.c,n.g,w.a,s.j,s.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]}),e})();var $=a("uEtv"),j=a("ofXK"),G=a("d3UM"),V=a("FKr1"),H=a("1jcm"),K=a("sYmb");function Y(e,t){1&e&&(l.Ub(0,"mat-error"),l.Pc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Rc(" ",l.ic(2,1,"validations.required")," "))}function X(e,t){1&e&&(l.Ub(0,"mat-error"),l.Pc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Rc(" ",l.ic(2,1,"validations.required")," "))}function J(e,t){1&e&&(l.Ub(0,"mat-error"),l.Pc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Rc(" ",l.ic(2,1,"validations.required")," "))}function Q(e,t){if(1&e&&(l.Ub(0,"mat-option",18),l.Pc(1),l.Tb()),2&e){const e=t.$implicit;l.pc("value",e._id),l.Cb(1),l.Qc(e.name)}}function W(e,t){1&e&&(l.Ub(0,"mat-error"),l.Pc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Rc(" ",l.ic(2,1,"validations.required")," "))}function Z(e,t){1&e&&(l.Ub(0,"mat-error"),l.Pc(1),l.hc(2,"translate"),l.Tb()),2&e&&(l.Cb(1),l.Rc(" ",l.ic(2,1,"validations.required")," "))}const ee=function(){return["home","banners","new"]};let te=(()=>{class e{constructor(e,t,a,r,n){this.fb=e,this.router=t,this.activeRoute=a,this.bannerFacade=r,this.categoryFacade=n,this.isEditMode=!1,this.activeEditId="",this.bannerForm=this.fb.group({name:["",[P.w.required]],banner_image_url:[""],banner_redirect_url:[""],is_active:!0,type:[""],category_id:[""]}),this.activeRoute.params.subscribe(e=>{null!=e.id&&null!=e.id&&""!=e.id&&(this.isEditMode=!0,this.activeEditId=e.id)})}ngOnInit(){this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe(e=>{this.categoryList=e}),this.isEditMode&&this.bannerFacade.getBannerDetails(this.activeEditId).then(e=>{let t=e;t=t.data,console.log({result:e}),this.bannerForm.patchValue({name:t.name,banner_image_url:t.banner_image_url,banner_redirect_url:t.banner_redirect_url,is_active:t.is_active,type:t.type,category_id:t.category_id})}).catch(e=>console.error(e))}onFormSubmit(e){if(this.bannerForm.valid)if(this.isEditMode){let e=this.bannerForm.value;e._id=this.activeEditId,this.bannerFacade.updateBanner(e).then(e=>{this.bannerForm.reset(),this.router.navigate(["banners"])})}else this.bannerFacade.newBanner(this.bannerForm.value).then(e=>{this.bannerForm.reset(),this.router.navigate(["banners"])})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(P.f),l.Ob(n.f),l.Ob(n.a),l.Ob(g),l.Ob($.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-banners-banner-add"]],decls:48,vars:11,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100"],["matInput","","placeholder","Banner Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Image Url","type","text","formControlName","banner_image_url","required",""],["fxFlex","25","fxFlex.lt-sm","100"],["matInput","","placeholder","Redirect Url","formControlName","banner_redirect_url","required",""],["formControlName","category_id","placeholder","Category","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","type","placeholder","Type","required",""],["value","ITEM_BANNER"],["value","TOP_BANNER"],["formControlName","is_active","color","primary"],["mat-raised-button","","color","primary","type","submit",1,"m-t-8"],[3,"value"]],template:function(e,t){1&e&&(l.Pb(0,"page-header",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"mat-card"),l.Ub(4,"mat-card-title"),l.Pc(5),l.Tb(),l.Ub(6,"form",3),l.cc("submit",(function(e){return t.onFormSubmit(e)})),l.Ub(7,"div",4),l.Ub(8,"div",5),l.Ub(9,"mat-form-field"),l.Ub(10,"mat-label"),l.Pc(11,"Name"),l.Tb(),l.Pb(12,"input",6),l.Nc(13,Y,3,3,"mat-error",7),l.Tb(),l.Tb(),l.Ub(14,"div",5),l.Ub(15,"mat-form-field"),l.Ub(16,"mat-label"),l.Pc(17,"Image Url"),l.Tb(),l.Pb(18,"input",8),l.Nc(19,X,3,3,"mat-error",7),l.Tb(),l.Tb(),l.Ub(20,"div",9),l.Ub(21,"mat-form-field"),l.Ub(22,"mat-label"),l.Pc(23,"Banner Redirect Url"),l.Tb(),l.Pb(24,"input",10),l.Nc(25,J,3,3,"mat-error",7),l.Tb(),l.Tb(),l.Ub(26,"div",9),l.Ub(27,"mat-form-field"),l.Ub(28,"mat-label"),l.Pc(29,"Category"),l.Tb(),l.Ub(30,"mat-select",11),l.Nc(31,Q,2,2,"mat-option",12),l.Tb(),l.Nc(32,W,3,3,"mat-error",7),l.Tb(),l.Tb(),l.Ub(33,"div",9),l.Ub(34,"mat-form-field"),l.Ub(35,"mat-label"),l.Pc(36,"Type"),l.Tb(),l.Ub(37,"mat-select",13),l.Ub(38,"mat-option",14),l.Pc(39,"ITEM BANNER"),l.Tb(),l.Ub(40,"mat-option",15),l.Pc(41,"TOP BANNER"),l.Tb(),l.Tb(),l.Nc(42,Z,3,3,"mat-error",7),l.Tb(),l.Tb(),l.Ub(43,"div",9),l.Ub(44,"mat-slide-toggle",16),l.Pc(45," Is Active "),l.Tb(),l.Tb(),l.Tb(),l.Ub(46,"button",17),l.Pc(47,"Save"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.qc("title",t.isEditMode?"Edit Banner":"New Banner"),l.pc("nav",l.rc(10,ee)),l.Cb(5),l.Rc("",t.isEditMode?"Edit Banner":"New Banner"," "),l.Cb(1),l.pc("formGroup",t.bannerForm),l.Cb(7),l.pc("ngIf",t.bannerForm.get("name").invalid),l.Cb(6),l.pc("ngIf",t.bannerForm.get("banner_image_url").invalid),l.Cb(6),l.pc("ngIf",t.bannerForm.get("banner_redirect_url").invalid),l.Cb(6),l.pc("ngForOf",t.categoryList),l.Cb(1),l.pc("ngIf",t.bannerForm.get("category_id").invalid),l.Cb(10),l.pc("ngIf",t.bannerForm.get("type").invalid))},directives:[v.a,T.c,T.a,y.a,y.c,P.x,P.q,P.k,T.d,_.c,_.g,C.b,P.d,P.p,P.i,P.v,j.o,G.a,j.n,V.p,H.a,U.b,_.b],pipes:[K.d],styles:[""]}),e})();const ae=[{path:"",component:A},{path:"new",component:te},{path:"edit/:id",component:te}];let re=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(ae)],n.j]}),e})(),ne=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[r.a,re]]}),e})()}}]);