!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2grs":function(t,i,r){"use strict";r.r(i),r.d(i,"UsersModule",(function(){return xe}));var n,o,c,s=r("PCNd"),l=r("tyNb"),b=r("Xibt"),u=r("M9IT"),m=r("Dh3D"),d=r("vkgz"),f=r("AytR"),p=r("fXoL"),h=r("tk/3"),U=((n=function(){function t(a){e(this,t),this.http=a,this.baseUrl=f.a.SERVER_ORIGIN}return a(t,[{key:"getUsers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.baseUrl+"/api/user/list?currentPage=".concat(e,"&currentPageSize=").concat(t);return null!=a&&null!=a&&""!=a.trim()&&(i+="&searchByuserName="+a),this.http.get(i)}},{key:"deleteUser",value:function(e){return this.http.delete(this.baseUrl+"/api/user/delete/"+e)}},{key:"getUserRoleList",value:function(){return this.http.get(this.baseUrl+"/api/role/list")}},{key:"getCountryList",value:function(){return this.http.get(this.baseUrl+"/api/country")}},{key:"getStateList",value:function(){return this.http.get(this.baseUrl+"/api/state")}},{key:"getCityList",value:function(){return this.http.get(this.baseUrl+"/api/city")}},{key:"getAreaList",value:function(){return this.http.get(this.baseUrl+"/api/area")}},{key:"getVehicleList",value:function(){return this.http.get(this.baseUrl+"/api/vehicle/list")}},{key:"newUser",value:function(e){var t=e;return e.location&&""!=e.location.trim()&&(t.location={type:"Point",coordinates:e.location.split(",")}),this.http.post(this.baseUrl+"/api/user/register",e)}},{key:"updateUser",value:function(e){var t=e;return e.location&&""!=e.location.trim()&&(t.location={type:"Point",coordinates:e.location.split(",")}),this.http.put(this.baseUrl+"/api/user/update/"+e._id,e)}},{key:"getUserDetailsById",value:function(e){return this.http.get(this.baseUrl+"/api/user/userDetail/"+e)}}]),t}()).\u0275fac=function(e){return new(e||n)(p.Yb(h.b))},n.\u0275prov=p.Kb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),v=r("2Vo4"),g=((o=function(){function t(){e(this,t),this.users=new v.a({}),this.editUserDetails=new v.a({})}return a(t,[{key:"getUsers",value:function(){return this.users.asObservable()}},{key:"setUsers",value:function(e){this.users.next(e)}},{key:"getEditUserDetails",value:function(){return this.editUserDetails.asObservable()}},{key:"setEditUserDetails",value:function(e){this.editUserDetails.next(e)}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=p.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),T=r("5eHb"),P=((c=function(){function t(a,i,r){e(this,t),this.api=a,this.usersstate=i,this.toster=r}return a(t,[{key:"loadUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.api.getUsers(t,a,i).subscribe((function(t){e.usersstate.setUsers(t)}))}},{key:"getUsers",value:function(){return this.usersstate.getUsers().pipe(Object(d.a)((function(e){return e})))}},{key:"getRoleList",value:function(){return this.api.getUserRoleList().pipe(Object(d.a)((function(e){return e})))}},{key:"getCountryList",value:function(){return this.api.getCountryList().pipe(Object(d.a)((function(e){return e})))}},{key:"getStateList",value:function(){return this.api.getStateList().pipe(Object(d.a)((function(e){return e})))}},{key:"getCityList",value:function(){return this.api.getCityList().pipe(Object(d.a)((function(e){return e})))}},{key:"getAreaList",value:function(){return this.api.getAreaList().pipe(Object(d.a)((function(e){return e})))}},{key:"getVehicleList",value:function(){return this.api.getVehicleList().pipe(Object(d.a)((function(e){return e})))}},{key:"newUser",value:function(e){var t=this;return this.api.newUser(e).toPromise().then((function(e){return t.loadUsers(),t.toster.success("User Successfully Created","Success",{timeOut:3e3}),e})).catch((function(e){throw console.error("api call error from new User ",e),e}))}},{key:"deleteUser",value:function(e){var t=this;return this.api.deleteUser(e).toPromise().then((function(e){return t.toster.success("User Successfully Deleted","Success",{timeOut:3e3}),e})).catch((function(e){throw console.error("api call error from Delete User ",e),e}))}},{key:"updateUser",value:function(e){var t=this;return this.api.updateUser(e).toPromise().then((function(e){return t.loadUsers(),t.toster.success("User Successfully Updated","Success",{timeOut:3e3}),e})).catch((function(e){throw console.error("api call error from Update User ",e),e}))}},{key:"loadUserDetails",value:function(e){var t=this;return this.api.getUserDetailsById(e).toPromise().then((function(e){return t.usersstate.setEditUserDetails(e.data),e})).catch((function(e){throw console.error("api call error from load banner Details",e),e}))}},{key:"getUserDetails",value:function(){return this.usersstate.getEditUserDetails().pipe(Object(d.a)((function(e){return e})))}}]),t}()).\u0275fac=function(e){return new(e||c)(p.Yb(U),p.Yb(g),p.Yb(T.b))},c.\u0275prov=p.Kb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),C=r("+0xr"),y=r("tgey"),N=r("bTqV"),k=r("XiUz"),F=r("Wp6s"),_=r("3Pt+"),w=r("kmnG"),x=r("qFsG"),D=r("zkoq"),S=r("NFeN"),L=r("ofXK");function O(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," First Name "),p.Tb())}function I(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.Rc(" ",a.first_name," ")}}function R(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Last Name "),p.Tb())}function M(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.Rc(" ",a.last_name," ")}}function A(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Email "),p.Tb())}function E(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.Rc(" ",a.email," ")}}function q(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Contact "),p.Tb())}function V(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.Rc(" ",a.contact," ")}}function B(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Active "),p.Tb())}function $(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.Rc(" ",a.is_active?"Yes":"No"," ")}}function j(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Bithdate "),p.Tb())}function z(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pc(1),p.hc(2,"date"),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.Rc(" ",p.ic(2,1,a.dob)," ")}}function G(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Role "),p.Tb())}function W(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.Rc(" ",a.role_id.name," ")}}function H(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Account Verified "),p.Tb())}function K(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.Rc(" ",a.account_verified?"Yes":"No"," ")}}function Y(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Avatar "),p.Tb())}function Q(e,t){if(1&e&&(p.Ub(0,"td",25),p.Pb(1,"img",26),p.Tb()),2&e){var a=t.$implicit;p.Cb(1),p.qc("src",a.profile_pic,p.Fc)}}function X(e,t){1&e&&(p.Ub(0,"th",24),p.Pc(1," Controls "),p.Tb())}function J(e,t){if(1&e){var a=p.Vb();p.Ub(0,"td",25),p.Ub(1,"mat-grid-list",27),p.Ub(2,"mat-grid-tile"),p.Ub(3,"button",28),p.cc("click",(function(){p.Dc(a);var e=t.$implicit;return p.gc().navigateToEdit(e._id)})),p.Ub(4,"mat-icon",29),p.Pc(5,"create"),p.Tb(),p.Tb(),p.Tb(),p.Ub(6,"mat-grid-tile"),p.Ub(7,"button",30),p.cc("click",(function(){p.Dc(a);var e=t.$implicit;return p.gc().deleteUser(e)})),p.Ub(8,"mat-icon",31),p.Pc(9,"delete"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb()}}function Z(e,t){1&e&&p.Pb(0,"tr",32)}function ee(e,t){1&e&&p.Pb(0,"tr",33)}var te,ae=function(){return[5,10,25]},ie=((te=function(){function t(a,i,r){e(this,t),this.usersFacade=a,this.router=i,this.confirmService=r,this.displayedColumns=["first_name","last_name","email","role_id","contact","dob","is_active","account_verified","profile_pic","controls"],this.pageDetails={currentPage:1,itemsPerPage:5,totalRecords:0},this.searchByName=""}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.usersFacade.loadUsers(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchByName),this.usersFacade.getUsers().subscribe((function(t){e.dataSource=new C.p(t.userList),e.pageDetails.totalRecords=t.totalCount,e.dataSource.sort=e.sort}))}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"deleteUser",value:function(e){var t=this;this.confirmService.confirm("Are you sure want to delete this User?","Confirm").subscribe((function(a){1==a&&t.usersFacade.deleteUser(e._id).then((function(e){return t.usersFacade.loadUsers(t.pageDetails.currentPage,t.pageDetails.itemsPerPage,t.searchByName)}))}))}},{key:"pageEvent",value:function(e){console.log(e),this.pageDetails.itemsPerPage=e.pageSize,this.pageDetails.currentPage=e.pageIndex+1,this.usersFacade.loadUsers(this.pageDetails.currentPage,e.pageSize,this.searchByName)}},{key:"resetFilter",value:function(){this.searchByName=""}},{key:"filterUsers",value:function(){this.usersFacade.loadUsers(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchByName)}},{key:"navigateToEdit",value:function(e){var t=this;this.usersFacade.loadUserDetails(e).then((function(a){t.router.navigate(["users","edit",e])}))}}]),t}()).\u0275fac=function(e){return new(e||te)(p.Ob(P),p.Ob(l.f),p.Ob(b.a))},te.\u0275cmp=p.Ib({type:te,selectors:[["app-users-user-list"]],viewQuery:function(e,t){var a;1&e&&(p.Sc(u.a,!0),p.Sc(m.a,!0)),2&e&&(p.yc(a=p.dc())&&(t.paginator=a.first),p.yc(a=p.dc())&&(t.sort=a.first))},decls:53,vars:8,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["fxFlex","25","fxFlex.lt-sm","100",1,"matero-col"],["matInput","","placeholder","First Name","name","searchByName",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","first_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","last_name"],["matColumnDef","email"],["matColumnDef","contact"],["matColumnDef","is_active"],["matColumnDef","dob"],["matColumnDef","role_id"],["matColumnDef","account_verified"],["matColumnDef","profile_pic"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","Avatar","width","50px","height","50px",3,"src"],["cols","2","rowHeight","1:1"],["mat-icon-button","","aria-label","Edit",3,"click"],["color","primary"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(p.Pb(0,"page-header"),p.Ub(1,"section"),p.Ub(2,"a",0),p.Pc(3," Add New "),p.Tb(),p.Tb(),p.Pb(4,"br"),p.Ub(5,"div",1),p.Ub(6,"div",2),p.Ub(7,"mat-card"),p.Ub(8,"mat-card-title"),p.Pc(9,"Filter"),p.Tb(),p.Ub(10,"form"),p.Ub(11,"mat-form-field",3),p.Ub(12,"input",4),p.cc("ngModelChange",(function(e){return t.searchByName=e})),p.Tb(),p.Tb(),p.Ub(13,"div",3),p.Ub(14,"button",5),p.cc("click",(function(){return t.filterUsers()})),p.Pc(15,"Search"),p.Tb(),p.Ub(16,"button",6),p.cc("click",(function(){return t.resetFilter()})),p.Pc(17,"Reset"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(18,"div",7),p.Ub(19,"table",8),p.Sb(20,9),p.Nc(21,O,2,0,"th",10),p.Nc(22,I,2,1,"td",11),p.Rb(),p.Sb(23,12),p.Nc(24,R,2,0,"th",10),p.Nc(25,M,2,1,"td",11),p.Rb(),p.Sb(26,13),p.Nc(27,A,2,0,"th",10),p.Nc(28,E,2,1,"td",11),p.Rb(),p.Sb(29,14),p.Nc(30,q,2,0,"th",10),p.Nc(31,V,2,1,"td",11),p.Rb(),p.Sb(32,15),p.Nc(33,B,2,0,"th",10),p.Nc(34,$,2,1,"td",11),p.Rb(),p.Sb(35,16),p.Nc(36,j,2,0,"th",10),p.Nc(37,z,3,3,"td",11),p.Rb(),p.Sb(38,17),p.Nc(39,G,2,0,"th",10),p.Nc(40,W,2,1,"td",11),p.Rb(),p.Sb(41,18),p.Nc(42,H,2,0,"th",10),p.Nc(43,K,2,1,"td",11),p.Rb(),p.Sb(44,19),p.Nc(45,Y,2,0,"th",10),p.Nc(46,Q,2,1,"td",11),p.Rb(),p.Sb(47,20),p.Nc(48,X,2,0,"th",10),p.Nc(49,J,10,0,"td",11),p.Rb(),p.Nc(50,Z,1,0,"tr",21),p.Nc(51,ee,1,0,"tr",22),p.Tb(),p.Ub(52,"mat-paginator",23),p.cc("page",(function(e){return t.pageEvent(e)})),p.Tb(),p.Tb()),2&e&&(p.Cb(12),p.pc("ngModel",t.searchByName),p.Cb(7),p.pc("dataSource",t.dataSource),p.Cb(31),p.pc("matHeaderRowDef",t.displayedColumns),p.Cb(1),p.pc("matRowDefColumns",t.displayedColumns),p.Cb(1),p.pc("length",t.pageDetails.totalRecords)("pageSize",t.pageDetails.itemsPerPage)("pageSizeOptions",p.rc(7,ae)))},directives:[y.a,N.a,l.i,k.c,k.a,F.a,F.c,_.x,_.q,_.r,w.c,x.b,_.d,_.p,_.s,N.b,C.o,m.a,C.c,C.i,C.b,C.k,C.n,u.a,C.h,m.b,C.a,D.a,D.c,S.a,C.j,C.m],pipes:[L.f],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}"]}),te),re=r("FKr1"),ne=r("sYmb"),oe=r("7EHt"),ce=r("d3UM"),se=r("iadO"),le=r("bSwM");function be(e,t){1&e&&(p.Ub(0,"mat-error"),p.Pc(1),p.hc(2,"translate"),p.Tb()),2&e&&(p.Cb(1),p.Rc(" ",p.ic(2,1,"validations.required")," "))}function ue(e,t){1&e&&(p.Ub(0,"mat-error"),p.Pc(1),p.hc(2,"translate"),p.Tb()),2&e&&(p.Cb(1),p.Rc(" ",p.ic(2,1,"validations.required")," "))}function me(e,t){1&e&&(p.Ub(0,"mat-error"),p.Pc(1),p.hc(2,"translate"),p.Tb()),2&e&&(p.Cb(1),p.Rc(" ",p.ic(2,1,"validations.required")," "))}function de(e,t){if(1&e&&(p.Ub(0,"mat-error"),p.Pc(1),p.hc(2,"translate"),p.Tb()),2&e){var a=p.gc();p.Cb(1),p.Rc(" ",p.ic(2,1,a.getErrorMessage(a.userForm))," ")}}function fe(e,t){if(1&e&&(p.Ub(0,"mat-option",47),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.pc("value",a._id),p.Cb(1),p.Qc(a.name)}}function pe(e,t){if(1&e&&(p.Ub(0,"mat-error"),p.Pc(1),p.hc(2,"translate"),p.Tb()),2&e){var a=p.gc();p.Cb(1),p.Rc(" ",p.ic(2,1,a.getErrorMessage(a.userForm))," ")}}function he(e,t){if(1&e&&(p.Ub(0,"mat-error"),p.Pc(1),p.hc(2,"translate"),p.Tb()),2&e){var a=p.gc();p.Cb(1),p.Rc(" ",p.ic(2,1,a.getErrorMessage(a.userForm))," ")}}function Ue(e,t){if(1&e&&(p.Ub(0,"mat-option",47),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.pc("value",a._id),p.Cb(1),p.Qc(a.name)}}function ve(e,t){if(1&e&&(p.Ub(0,"mat-option",47),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.pc("value",a._id),p.Cb(1),p.Qc(a.name)}}function ge(e,t){if(1&e&&(p.Ub(0,"mat-option",47),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.pc("value",a._id),p.Cb(1),p.Qc(a.name)}}function Te(e,t){if(1&e&&(p.Ub(0,"mat-option",47),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.pc("value",a._id),p.Cb(1),p.Qc(a.name)}}function Pe(e,t){if(1&e&&(p.Ub(0,"mat-option",47),p.Pc(1),p.Tb()),2&e){var a=t.$implicit;p.pc("value",a._id),p.Cb(1),p.Qc(a.type+" - "+a.regnumber)}}var Ce,ye,Ne,ke=function(){return["home","users","new"]},Fe=((Ce=function(){function t(a,i,r,n,o,c,s){var l=this;e(this,t),this.usersFacade=a,this.fb=i,this.dateAdapter=r,this.translate=n,this.activeRoute=o,this.toastr=c,this.router=s,this.q={username:"",email:"",gender:""},this.roleList=[],this.countryList=[],this.stateList=[],this.cityList=[],this.areaList=[],this.vehicleList=[],this.isEditMode=!1,this.states=[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],this.filteredStates=this.states,this.step=0,this.userForm=this.fb.group({first_name:["",[_.w.required]],last_name:["",[_.w.required]],contact:["",[_.w.required]],contact_2:[""],role_id:[""],gender:[""],email:["",[_.w.required,_.w.email]],current_address:[""],sameAddress:[!1],permanent_address:[""],dob:[""],uid:[""],family_details:[""],previous_occupation:[""],bank_details:[""],firm_name:[""],firm_gst:[""],supplier_of_what:[""],reference:[""],country_id:[""],state_id:[""],city_id:[""],area_id:[""],vehicle_id:[""],location:[""]}),this.activeRoute.params.subscribe((function(e){null!=e.id&&null!=e.id&&""!=e.id&&(l.isEditMode=!0,l.activeEditId=e.id)}))}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.translateSubscription=this.translate.onLangChange.subscribe((function(t){e.dateAdapter.setLocale(t.lang)})),this.loadRoles(),this.loadFormDropdowns(),this.loadEditForm()}},{key:"ngOnDestroy",value:function(){this.translateSubscription.unsubscribe()}},{key:"onFormSubmit",value:function(e){var t=this;if(0==this.userForm.valid)this.toastr.error("Please Fill all required field!","Required",{timeOut:3e3});else if(this.isEditMode){var a=this.userForm.value;a._id=this.activeEditId,this.usersFacade.updateUser(a).then((function(e){t.userForm.reset(),t.router.navigate(["users"])}))}else this.usersFacade.newUser(this.userForm.value).then((function(e){t.userForm.reset(),t.router.navigate(["users"])}))}},{key:"loadRoles",value:function(){var e=this;this.usersFacade.getRoleList().subscribe((function(t){e.roleList=t.data}),(function(e){return console.error(e)}))}},{key:"loadFormDropdowns",value:function(){var e=this;this.usersFacade.getCountryList().subscribe((function(t){e.countryList=t.data}),(function(e){return console.error(e)})),this.usersFacade.getStateList().subscribe((function(t){e.stateList=t.data}),(function(e){return console.error(e)})),this.usersFacade.getCityList().subscribe((function(t){e.cityList=t.data}),(function(e){return console.error(e)})),this.usersFacade.getAreaList().subscribe((function(t){e.areaList=t.data}),(function(e){return console.error(e)})),this.usersFacade.getVehicleList().subscribe((function(t){e.vehicleList=t.data}),(function(e){return console.error(e)}))}},{key:"loadEditForm",value:function(){var e=this;this.isEditMode&&this.usersFacade.getUserDetails().subscribe((function(t){e.userForm.patchValue(t);var a=t.role_id._id,i=t.location.coordinates.join(",");e.userForm.patchValue({role_id:a,location:i})}),(function(e){return console.error(e)}))}},{key:"getErrorMessage",value:function(e){return e.get("email").hasError("required")?"validations.required":e.get("email").hasError("email")?"validations.invalid_email":""}},{key:"filter",value:function(e){return e?this.states.filter((function(t){return t.name.toLowerCase().startsWith(e.toLowerCase())})):this.states}},{key:"setStep",value:function(e){this.step=e}},{key:"nextStep",value:function(){this.step++}},{key:"prevStep",value:function(){this.step--}}]),t}()).\u0275fac=function(e){return new(e||Ce)(p.Ob(P),p.Ob(_.f),p.Ob(re.c),p.Ob(ne.e),p.Ob(l.a),p.Ob(T.b),p.Ob(l.f))},Ce.\u0275cmp=p.Ib({type:Ce,selectors:[["app-users-user-add"]],decls:194,vars:22,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],[1,"example-headers-align"],["hideToggle","",3,"expanded","opened"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","33","fxFlex.lt-sm","100"],["matInput","","placeholder","First Name","formControlName","first_name","required",""],[4,"ngIf"],["matInput","","placeholder","Last Name","formControlName","last_name"],["fxFlex","34","fxFlex.lt-sm","100"],["matInput","","placeholder","Contact","type","number","formControlName","contact","required",""],["matSuffix",""],["matInput","","placeholder","Email","type","email","formControlName","email","required",""],["formControlName","role_id","placeholder","User Role","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","gender","placeholder","Gender","required",""],["value","Male"],["value","Female"],["color","accent"],["matInput","","formControlName","dob","placeholder","Birthdate",3,"matDatepicker"],["matSuffix","",3,"for"],["dob",""],["matInput","","placeholder","UID","formControlName","uid"],["matInput","","placeholder","Alternative Contact","type","number","formControlName","contact_2"],["fxFlex","100","fxFlex.lt-sm","100"],["matInput","","placeholder","Family Details","formControlName","family_details"],["mat-button","","color","primary","type","button",3,"click"],["matInput","","placeholder","Previous Occupation","formControlName","previous_occupation"],["matInput","","placeholder","Bank Details","formControlName","bank_details"],["fxFlex","50","fxFlex.lt-sm","100"],["matInput","","placeholder","Firm Name","formControlName","firm_name"],["matInput","","placeholder","Firm GST","formControlName","firm_gst"],["matInput","","placeholder","Supplier of What","formControlName","supplier_of_what"],["matInput","","placeholder","Reference","formControlName","reference"],["mat-button","","color","warn","type","button",3,"click"],["matInput","","placeholder","Current Address","formControlName","current_address"],["formControlName","sameAddress"],["matInput","","placeholder","Permanent Address","formControlName","permanent_address"],["formControlName","country_id","placeholder","Country"],["formControlName","state_id","placeholder","State"],["formControlName","city_id","placeholder","City"],["formControlName","area_id","placeholder","Area"],["matInput","","placeholder","Location","formControlName","location"],["formControlName","vehicle_id","placeholder","Vehicle"],["mat-button","","color","primary","type","submit"],[3,"value"]],template:function(e,t){if(1&e&&(p.Pb(0,"page-header",0),p.Ub(1,"div",1),p.Ub(2,"div",2),p.Ub(3,"mat-card"),p.Ub(4,"mat-card-title"),p.Pc(5),p.Tb(),p.Ub(6,"form",3),p.cc("submit",(function(e){return t.onFormSubmit(e)})),p.Ub(7,"mat-accordion",4),p.Ub(8,"mat-expansion-panel",5),p.cc("opened",(function(){return t.setStep(0)})),p.Ub(9,"mat-expansion-panel-header"),p.Ub(10,"mat-panel-title"),p.Pc(11," Personal data "),p.Tb(),p.Ub(12,"mat-panel-description"),p.Pc(13," Personal Details "),p.Ub(14,"mat-icon"),p.Pc(15,"account_circle"),p.Tb(),p.Tb(),p.Tb(),p.Ub(16,"div",6),p.Ub(17,"div",7),p.Ub(18,"mat-form-field"),p.Ub(19,"mat-label"),p.Pc(20,"First Name"),p.Tb(),p.Pb(21,"input",8),p.Nc(22,be,3,3,"mat-error",9),p.Tb(),p.Tb(),p.Ub(23,"div",7),p.Ub(24,"mat-form-field"),p.Ub(25,"mat-label"),p.Pc(26,"Last Name"),p.Tb(),p.Pb(27,"input",10),p.Nc(28,ue,3,3,"mat-error",9),p.Tb(),p.Tb(),p.Ub(29,"div",11),p.Ub(30,"mat-form-field"),p.Ub(31,"mat-label"),p.Pc(32,"Contact"),p.Tb(),p.Pb(33,"input",12),p.Ub(34,"mat-icon",13),p.Pc(35,"phone"),p.Tb(),p.Nc(36,me,3,3,"mat-error",9),p.Tb(),p.Tb(),p.Ub(37,"div",7),p.Ub(38,"mat-form-field"),p.Ub(39,"mat-label"),p.Pc(40,"Email"),p.Tb(),p.Pb(41,"input",14),p.Nc(42,de,3,3,"mat-error",9),p.Tb(),p.Tb(),p.Ub(43,"div",7),p.Ub(44,"mat-form-field"),p.Ub(45,"mat-label"),p.Pc(46,"Role"),p.Tb(),p.Ub(47,"mat-select",15),p.Nc(48,fe,2,2,"mat-option",16),p.Tb(),p.Nc(49,pe,3,3,"mat-error",9),p.Tb(),p.Tb(),p.Ub(50,"div",11),p.Ub(51,"mat-form-field"),p.Ub(52,"mat-label"),p.Pc(53,"Gender"),p.Tb(),p.Ub(54,"mat-select",17),p.Ub(55,"mat-option",18),p.Pc(56,"Male"),p.Tb(),p.Ub(57,"mat-option",19),p.Pc(58,"Female"),p.Tb(),p.Tb(),p.Nc(59,he,3,3,"mat-error",9),p.Tb(),p.Tb(),p.Ub(60,"div",7),p.Ub(61,"mat-form-field",20),p.Ub(62,"mat-label"),p.Pc(63,"Birthdate"),p.Tb(),p.Pb(64,"input",21),p.Pb(65,"mat-datepicker-toggle",22),p.Pb(66,"mat-datepicker",null,23),p.Tb(),p.Tb(),p.Ub(68,"div",7),p.Ub(69,"mat-form-field"),p.Ub(70,"mat-label"),p.Pc(71,"UID"),p.Tb(),p.Pb(72,"input",24),p.Tb(),p.Tb(),p.Ub(73,"div",11),p.Ub(74,"mat-form-field"),p.Ub(75,"mat-label"),p.Pc(76,"Alternative Contact"),p.Tb(),p.Pb(77,"input",25),p.Ub(78,"mat-icon",13),p.Pc(79,"phone"),p.Tb(),p.Tb(),p.Tb(),p.Ub(80,"div",26),p.Ub(81,"mat-form-field"),p.Ub(82,"mat-label"),p.Pc(83,"Family Details"),p.Tb(),p.Pb(84,"textarea",27),p.Tb(),p.Tb(),p.Tb(),p.Ub(85,"mat-action-row"),p.Ub(86,"button",28),p.cc("click",(function(){return t.nextStep()})),p.Pc(87,"Next"),p.Tb(),p.Tb(),p.Tb(),p.Ub(88,"mat-expansion-panel",5),p.cc("opened",(function(){return t.setStep(1)})),p.Ub(89,"mat-expansion-panel-header"),p.Ub(90,"mat-panel-title"),p.Pc(91," Professional "),p.Tb(),p.Ub(92,"mat-panel-description"),p.Pc(93," Professional Details "),p.Ub(94,"mat-icon"),p.Pc(95,"work"),p.Tb(),p.Tb(),p.Tb(),p.Ub(96,"div",6),p.Ub(97,"div",26),p.Ub(98,"mat-form-field"),p.Ub(99,"mat-label"),p.Pc(100,"Previous Occupation"),p.Tb(),p.Pb(101,"textarea",29),p.Tb(),p.Tb(),p.Ub(102,"div",26),p.Ub(103,"mat-form-field"),p.Ub(104,"mat-label"),p.Pc(105,"Bank Details"),p.Tb(),p.Pb(106,"textarea",30),p.Tb(),p.Tb(),p.Ub(107,"div",31),p.Ub(108,"mat-form-field"),p.Ub(109,"mat-label"),p.Pc(110,"Firm Name"),p.Tb(),p.Pb(111,"input",32),p.Tb(),p.Tb(),p.Ub(112,"div",31),p.Ub(113,"mat-form-field"),p.Ub(114,"mat-label"),p.Pc(115,"Firm GST"),p.Tb(),p.Pb(116,"input",33),p.Tb(),p.Tb(),p.Ub(117,"div",31),p.Ub(118,"mat-form-field"),p.Ub(119,"mat-label"),p.Pc(120,"Supplier of What"),p.Tb(),p.Pb(121,"input",34),p.Tb(),p.Tb(),p.Ub(122,"div",31),p.Ub(123,"mat-form-field"),p.Ub(124,"mat-label"),p.Pc(125,"Reference"),p.Tb(),p.Pb(126,"input",35),p.Tb(),p.Tb(),p.Tb(),p.Ub(127,"mat-action-row"),p.Ub(128,"button",36),p.cc("click",(function(){return t.prevStep()})),p.Pc(129,"Previous"),p.Tb(),p.Ub(130,"button",28),p.cc("click",(function(){return t.nextStep()})),p.Pc(131,"Next"),p.Tb(),p.Tb(),p.Tb(),p.Ub(132,"mat-expansion-panel",5),p.cc("opened",(function(){return t.setStep(2)})),p.Ub(133,"mat-expansion-panel-header"),p.Ub(134,"mat-panel-title"),p.Pc(135," Address "),p.Tb(),p.Ub(136,"mat-panel-description"),p.Pc(137," Type the address Details "),p.Ub(138,"mat-icon"),p.Pc(139,"map"),p.Tb(),p.Tb(),p.Tb(),p.Ub(140,"div",6),p.Ub(141,"div",26),p.Ub(142,"mat-form-field"),p.Ub(143,"mat-label"),p.Pc(144,"Current Address"),p.Tb(),p.Pb(145,"textarea",37),p.Tb(),p.Tb(),p.Ub(146,"div",26),p.Ub(147,"mat-checkbox",38),p.Pc(148,"Same As Above"),p.Tb(),p.Tb(),p.Ub(149,"div",26),p.Ub(150,"mat-form-field"),p.Ub(151,"mat-label"),p.Pc(152,"Permanent Address"),p.Tb(),p.Pb(153,"textarea",39),p.Tb(),p.Tb(),p.Ub(154,"div",7),p.Ub(155,"mat-form-field"),p.Ub(156,"mat-label"),p.Pc(157,"Country"),p.Tb(),p.Ub(158,"mat-select",40),p.Nc(159,Ue,2,2,"mat-option",16),p.Tb(),p.Tb(),p.Tb(),p.Ub(160,"div",7),p.Ub(161,"mat-form-field"),p.Ub(162,"mat-label"),p.Pc(163,"State"),p.Tb(),p.Ub(164,"mat-select",41),p.Nc(165,ve,2,2,"mat-option",16),p.Tb(),p.Tb(),p.Tb(),p.Ub(166,"div",11),p.Ub(167,"mat-form-field"),p.Ub(168,"mat-label"),p.Pc(169,"City"),p.Tb(),p.Ub(170,"mat-select",42),p.Nc(171,ge,2,2,"mat-option",16),p.Tb(),p.Tb(),p.Tb(),p.Ub(172,"div",7),p.Ub(173,"mat-form-field"),p.Ub(174,"mat-label"),p.Pc(175,"Area"),p.Tb(),p.Ub(176,"mat-select",43),p.Nc(177,Te,2,2,"mat-option",16),p.Tb(),p.Tb(),p.Tb(),p.Ub(178,"div",7),p.Ub(179,"mat-form-field"),p.Ub(180,"mat-label"),p.Pc(181,"Location"),p.Tb(),p.Pb(182,"input",44),p.Tb(),p.Tb(),p.Ub(183,"div",11),p.Ub(184,"mat-form-field"),p.Ub(185,"mat-label"),p.Pc(186,"Vehicle"),p.Tb(),p.Ub(187,"mat-select",45),p.Nc(188,Pe,2,2,"mat-option",16),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(189,"mat-action-row"),p.Ub(190,"button",36),p.cc("click",(function(){return t.prevStep()})),p.Pc(191,"Previous"),p.Tb(),p.Ub(192,"button",46),p.Pc(193,"End"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&e){var a=p.zc(67);p.qc("title",t.isEditMode?"Edit User":"New User"),p.pc("nav",p.rc(21,ke)),p.Cb(5),p.Qc(t.isEditMode?"Edit User":"New User"),p.Cb(1),p.pc("formGroup",t.userForm),p.Cb(2),p.pc("expanded",0===t.step),p.Cb(14),p.pc("ngIf",t.userForm.get("first_name").invalid),p.Cb(6),p.pc("ngIf",t.userForm.get("last_name").invalid),p.Cb(8),p.pc("ngIf",t.userForm.get("contact").invalid),p.Cb(6),p.pc("ngIf",t.userForm.get("email").invalid),p.Cb(6),p.pc("ngForOf",t.roleList),p.Cb(1),p.pc("ngIf",t.userForm.get("role_id").invalid),p.Cb(10),p.pc("ngIf",t.userForm.get("gender").invalid),p.Cb(5),p.pc("matDatepicker",a),p.Cb(1),p.pc("for",a),p.Cb(23),p.pc("expanded",1===t.step),p.Cb(44),p.pc("expanded",2===t.step),p.Cb(27),p.pc("ngForOf",t.countryList),p.Cb(6),p.pc("ngForOf",t.stateList),p.Cb(6),p.pc("ngForOf",t.cityList),p.Cb(6),p.pc("ngForOf",t.areaList),p.Cb(11),p.pc("ngForOf",t.vehicleList)}},directives:[y.a,k.c,k.a,F.a,F.c,_.x,_.q,_.k,oe.a,oe.c,oe.f,oe.g,oe.e,S.a,k.d,w.c,w.g,x.b,_.d,_.p,_.i,_.v,L.o,_.t,w.i,ce.a,L.n,re.p,se.c,se.f,se.b,oe.d,N.b,le.a,w.b],pipes:[ne.d],styles:[".example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),Ce),_e=[{path:"",component:ie},{path:"new",component:Fe},{path:"edit/:id",component:Fe}],we=((Ne=function t(){e(this,t)}).\u0275mod=p.Mb({type:Ne}),Ne.\u0275inj=p.Lb({factory:function(e){return new(e||Ne)},imports:[[l.j.forChild(_e)],l.j]}),Ne),xe=((ye=function t(){e(this,t)}).\u0275mod=p.Mb({type:ye}),ye.\u0275inj=p.Lb({factory:function(e){return new(e||ye)},imports:[[s.a,we]]}),ye)}}])}();