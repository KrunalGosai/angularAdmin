!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{XdEn:function(e,a,c){"use strict";c.r(a),c.d(a,"ItemsModule",(function(){return we}));var r,o,s,l=c("PCNd"),b=c("tyNb"),u=c("2Vo4"),m=c("fXoL"),d=((r=function(){function t(){i(this,t),this.items=new u.a({}),this.editItem=new u.a({}),this.itemTypes=new u.a([{name:"Sellable",value:"SELLABLE"},{name:"Packaging Material",value:"PACKAGING_MATERIAL"},{name:"Raw Material",value:"RAW_MATERIAL"}]),this.itemViewData=new u.a({}),this.isItemsSet=!1,this.isItemDetailsSet=!1}return n(t,[{key:"getItemList",value:function(){return this.items.asObservable()}},{key:"setItemList",value:function(t){this.isItemsSet=!0,this.items.next(t)}},{key:"getEditItem",value:function(){return this.editItem.asObservable()}},{key:"setEditItem",value:function(t){this.isItemDetailsSet=!0,this.editItem.next(t)}},{key:"getItemTypes",value:function(){return this.itemTypes.asObservable()}},{key:"setItemViewData",value:function(t){this.itemViewData.next(t)}},{key:"getItemViewData",value:function(){return this.itemViewData.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||r)},r.\u0275prov=m.Kb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),f=c("vkgz"),p=c("AytR"),h=c("tk/3"),g=((o=function(){function t(e){i(this,t),this.http=e,this.baseURl=p.a.SERVER_ORIGIN}return n(t,[{key:"getItemList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",r=this.baseURl+"/api/item/get_admin_item_list?currentPage=".concat(t,"&currentPageSize=").concat(e);return null!=i&&null!=i&&""!=i.trim()&&(r+="&item_type="+i),null!=a&&null!=a&&(r+="&availability_status="+a),null!=n&&null!=n&&""!=n.trim()&&(r+="&user_id="+n),null!=c&&null!=c&&""!=c.trim()&&(r+="&category_id="+c),this.http.get(r)}},{key:"deleteItem",value:function(t){return this.http.delete(this.baseURl+"/api/item/delete_Item/"+t)}},{key:"getItemDetailsById",value:function(t){return this.http.get(this.baseURl+"/api/item/get_Itemdetail?item_id="+t)}},{key:"updateActivationStatus",value:function(t,e){return this.http.put(this.baseURl+"/api/item/update_Active_Deactive_Item",{item_id:e,is_active:t})}},{key:"newitem",value:function(t){return this.http.post(this.baseURl+"/api/item/add_Item",t)}},{key:"updateItem",value:function(t){return this.http.put(this.baseURl+"/api/item/update/"+t._id,t)}},{key:"updateItemDepoPrice",value:function(t){return this.http.put(this.baseURl+"/api/item/update_itemdepo_price",t)}}]),t}()).\u0275fac=function(t){return new(t||o)(m.Yb(h.b))},o.\u0275prov=m.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),v=c("5eHb"),y=((s=function(){function t(e,a,n){i(this,t),this.api=e,this.state=a,this.toster=n}return n(t,[{key:"loadItemList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";this.api.getItemList(e,i,a,n,c,r).subscribe((function(e){t.state.setItemList(e)}),(function(t){return console.error("api call error from load items ",t)}))}},{key:"getItemList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return this.state.isItemsSet||this.loadItemList(t,e,i,a,n,c),this.state.getItemList().pipe(Object(f.a)((function(t){return t})))}},{key:"getSallableItemList",value:function(){return this.api.getItemList(1,200,"SELLABLE").pipe(Object(f.a)((function(t){return t})))}},{key:"newItem",value:function(t){var e=this;return this.api.newitem(t).toPromise().then((function(t){return e.loadItemList(),e.toster.success("Item Successfully Created","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from new Item ",t),t}))}},{key:"deleteItem",value:function(t){var e=this;return this.api.deleteItem(t).toPromise().then((function(t){return e.toster.success("Item Successfully Deleted","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from Delete Item",t),t}))}},{key:"getItemDetails",value:function(t){return this.state.isItemDetailsSet||this.loadItemDetails(t),this.state.getEditItem().pipe(Object(f.a)((function(t){return t})))}},{key:"loadItemDetails",value:function(t){var e=this;return this.api.getItemDetailsById(t).toPromise().then((function(t){return e.state.setEditItem(t.item),t})).catch((function(t){throw console.error("api call error from load Item Details",t),t}))}},{key:"updateItem",value:function(t){var e=this;return this.api.updateItem(t).toPromise().then((function(t){return e.loadItemList(),e.toster.success("Item Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from Update item ",t),t}))}},{key:"changeActivationStatus",value:function(t){var e=this;return this.api.updateActivationStatus(t.is_active,t._id).toPromise().then((function(t){return e.toster.success("Unit Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from change activation status Unit",t),t}))}},{key:"getItemTypes",value:function(){return this.state.getItemTypes().pipe(Object(f.a)((function(t){return t})))}},{key:"setItemViewData",value:function(t){this.state.setItemViewData(t)}},{key:"getItemViewData",value:function(){return this.state.getItemViewData().pipe(Object(f.a)((function(t){return t})))}},{key:"updateItemDepoPrice",value:function(t){var e=this;return this.api.updateItemDepoPrice(t).toPromise().then((function(t){return e.toster.success("Item Depo Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from updateItemDepoPrice",t),t}))}}]),t}()).\u0275fac=function(t){return new(t||s)(m.Yb(g),m.Yb(d),m.Yb(v.b))},s.\u0275prov=m.Kb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),T=c("XiUz"),U=c("Wp6s"),C=c("kmnG"),I=c("ofXK");function P(t,e){1&t&&m.Pb(0,"img",7),2&t&&m.qc("src",e.$implicit,m.Fc)}var _,R,D=((_=function(){function t(e){i(this,t),this.facde=e,this.viewData={},this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[]}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.facde.getItemViewData().subscribe((function(e){t.viewData=e,t.dataSource=t.viewData.all_item_units}))}}]),t}()).\u0275fac=function(t){return new(t||_)(m.Ob(y))},_.\u0275cmp=m.Ib({type:_,selectors:[["app-item-view"]],decls:84,vars:11,consts:[["fxLayout","row wrap",1,"matero-row"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","15","fxFlex.lt-sm","100"],["fxFlex","85","fxFlex.lt-sm","100"],["alt","Item Thumbnail","height","60px","width","80px",3,"src"],["fxFlex","35","fxFlex.lt-sm","100"],["alt","Item Picture","height","60px","width","80px",3,"src",4,"ngFor","ngForOf"],["alt","Item Picture","height","60px","width","80px",3,"src"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Ub(1,"mat-card"),m.Ub(2,"mat-card-title"),m.Pc(3,"Item View"),m.Tb(),m.Ub(4,"div",1),m.Ub(5,"div",2),m.Ub(6,"mat-label"),m.Ub(7,"strong"),m.Pc(8," Thumbnail "),m.Tb(),m.Pc(9,":"),m.Tb(),m.Tb(),m.Ub(10,"div",3),m.Pb(11,"img",4),m.Tb(),m.Ub(12,"div",2),m.Ub(13,"mat-label"),m.Ub(14,"strong"),m.Pc(15," Name "),m.Tb(),m.Tb(),m.Tb(),m.Ub(16,"div",5),m.Ub(17,"mat-label"),m.Pc(18),m.Tb(),m.Tb(),m.Ub(19,"div",2),m.Ub(20,"mat-label"),m.Ub(21,"strong"),m.Pc(22,"Category "),m.Tb(),m.Tb(),m.Tb(),m.Ub(23,"div",5),m.Ub(24,"mat-label"),m.Pc(25),m.Tb(),m.Tb(),m.Ub(26,"div",2),m.Ub(27,"mat-label"),m.Ub(28,"strong"),m.Pc(29," Type "),m.Tb(),m.Tb(),m.Tb(),m.Ub(30,"div",5),m.Ub(31,"mat-label"),m.Pc(32),m.Tb(),m.Tb(),m.Ub(33,"div",2),m.Ub(34,"mat-label"),m.Ub(35,"strong"),m.Pc(36," Qty "),m.Tb(),m.Tb(),m.Tb(),m.Ub(37,"div",5),m.Ub(38,"mat-label"),m.Pc(39),m.Tb(),m.Tb(),m.Ub(40,"div",2),m.Ub(41,"mat-label"),m.Ub(42,"strong"),m.Pc(43," Position "),m.Tb(),m.Tb(),m.Tb(),m.Ub(44,"div",5),m.Ub(45,"mat-label"),m.Pc(46),m.Tb(),m.Tb(),m.Ub(47,"div",2),m.Ub(48,"mat-label"),m.Ub(49,"strong"),m.Pc(50," is Active "),m.Tb(),m.Tb(),m.Tb(),m.Ub(51,"div",5),m.Ub(52,"mat-label"),m.Pc(53),m.Tb(),m.Tb(),m.Ub(54,"div",2),m.Ub(55,"mat-label"),m.Ub(56,"strong"),m.Pc(57," Price "),m.Tb(),m.Tb(),m.Tb(),m.Ub(58,"div",5),m.Ub(59,"mat-label"),m.Pc(60),m.Tb(),m.Tb(),m.Ub(61,"div",2),m.Ub(62,"mat-label"),m.Ub(63,"strong"),m.Pc(64," Availability "),m.Tb(),m.Tb(),m.Tb(),m.Ub(65,"div",5),m.Ub(66,"mat-label"),m.Pc(67),m.Tb(),m.Tb(),m.Ub(68,"div",2),m.Ub(69,"mat-label"),m.Ub(70,"strong"),m.Pc(71," Unit Name"),m.Tb(),m.Tb(),m.Tb(),m.Ub(72,"div",5),m.Ub(73,"mat-label"),m.Pc(74),m.Tb(),m.Tb(),m.Pb(75,"div",2),m.Pb(76,"div",5),m.Ub(77,"div",2),m.Ub(78,"mat-label"),m.Ub(79,"strong"),m.Pc(80," Pictures "),m.Tb(),m.Pc(81,":"),m.Tb(),m.Tb(),m.Ub(82,"div",3),m.Nc(83,P,1,1,"img",6),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Cb(11),m.qc("src",e.viewData.thumbnail,m.Fc),m.Cb(7),m.Rc(": ",e.viewData.name,""),m.Cb(7),m.Rc(": ",e.viewData.category_id?e.viewData.category_id.name:"",""),m.Cb(7),m.Rc(": ",e.itemTypes[e.viewData.type],""),m.Cb(7),m.Rc(": ",e.viewData.item_volume,""),m.Cb(7),m.Rc(": ",e.viewData.position,""),m.Cb(7),m.Rc(": ",e.viewData.is_active?"Yes":"No",""),m.Cb(7),m.Rc(": ",e.viewData.price,""),m.Cb(7),m.Rc(": ",e.viewData.availability_status,""),m.Cb(7),m.Rc(": ",e.viewData.unit_id?e.viewData.unit_id.name:"",""),m.Cb(9),m.pc("ngForOf",e.viewData.picture))},directives:[T.c,U.a,U.c,T.d,T.a,C.g,I.n],styles:[""]}),_),w=c("uEtv"),S=c("WW+1"),N=c("Xibt"),F=c("Dh3D"),L=c("+0xr"),O=((R={}).available="TRUE",R.notAvailable="FALSE",R.notify="NOTIFY",R),k=c("ey9i"),A=function(t){return t.ADMIN="ADMIN",t.DEPO="DEPO",t.RETAILER="RETAILER",t.PURCHASE_MANAGER="PURCHASE_MANAGER",t.DELIVERY_BOY="DELIVERY_BOY",t.HAWKER="HAWKER",t.CUSTOMER="CUSTOMER",t.MANUFACTURING_PLANT="MANUFACTURING_PLANT",t.SUPPLIER="SUPPLIER",t}({}),E=c("dKfg"),M=function(t){return t.USER="USER",t.SUPPLIER="SUPPLIER",t.HOCKER="HOCKER",t.DELIVERYBOY="DELIVERYBOY",t.PURCHASEMANAGER="PURCHASEMANAGER",t.DEPO="DEPO",t.MANUFACTUREPLANT="MANUFACTUREPLANT",t}({}),x=c("0IaG"),V=c("bTqV"),$=c("3Pt+"),q=c("QibW");function G(t,e){1&t&&(m.Ub(0,"th",13),m.Pc(1," Price "),m.Tb())}var j=function(){return{standalone:!0}};function B(t,e){if(1&t){var i=m.Vb();m.Ub(0,"td",14),m.Ub(1,"input",15),m.cc("change",(function(){m.Dc(i);var t=e.$implicit;return m.gc().changePrice(t)}))("ngModelChange",(function(t){return m.Dc(i),e.$implicit.price=t})),m.Tb(),m.Tb()}if(2&t){var a=e.$implicit;m.Cb(1),m.pc("ngModelOptions",m.rc(2,j))("ngModel",a.price)}}function K(t,e){1&t&&(m.Ub(0,"th",13),m.Pc(1," item Quantity "),m.Tb())}function H(t,e){if(1&t&&(m.Ub(0,"td",14),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.Cb(1),m.Rc(" ",i.item_quantity," ")}}function Q(t,e){1&t&&(m.Ub(0,"th",13),m.Pc(1," Unit "),m.Tb())}function z(t,e){if(1&t&&(m.Ub(0,"td",14),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.Cb(1),m.Rc(" ",i.unit_id," ")}}function Y(t,e){1&t&&(m.Ub(0,"th",13),m.Pc(1," Is Customer Show "),m.Tb())}function W(t,e){if(1&t){var i=m.Vb();m.Ub(0,"td",14),m.Ub(1,"mat-radio-group",16),m.cc("ngModelChange",(function(t){return m.Dc(i),m.gc().defaultUnitId=t})),m.Ub(2,"mat-radio-button",17),m.cc("change",(function(t){return m.Dc(i),m.gc().radioChange(t)})),m.Pc(3),m.Tb(),m.Tb(),m.Tb()}if(2&t){var a=e.$implicit,n=m.gc();m.Cb(1),m.pc("ngModel",n.defaultUnitId),m.Cb(1),m.pc("value",a._id),m.Cb(1),m.Rc(" ",""," ")}}function X(t,e){1&t&&m.Pb(0,"tr",18)}function J(t,e){1&t&&m.Pb(0,"tr",19)}var Z,tt=((Z=function(){function e(t,a){i(this,e),this.data=t,this.facade=a,this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[],this.defaultUnitId=""}return n(e,[{key:"ngOnInit",value:function(){var t=this.data.all_item_units;this.dataSource=this.data.all_item_units||[];var e=t.filter((function(t){return 1==t.is_customer_show}));e&&e.length>0&&(this.defaultUnitId=e[0]._id)}},{key:"changePrice",value:function(){var t=Object.assign({},this.data);this.facade.updateItemDepoPrice({item_id:t._id,position:t.position,is_active:t.is_active,availability_status:t.availability_status,item_units:this.dataSource,user_id:"5fbf5b9f5724111c6f29e903"})}},{key:"radioChange",value:function(e){var i=e.value,a=Object.assign({},this.data),n={item_id:a._id,position:a.position,is_active:a.is_active,availability_status:a.availability_status,user_id:"5fbf5b9f5724111c6f29e903"},c=t(this.dataSource);c.map((function(t){t.is_customer_show=t._id==i})),n.item_units=c,this.dataSource=c,this.facade.updateItemDepoPrice(n)}}]),e}()).\u0275fac=function(t){return new(t||Z)(m.Ob(x.a),m.Ob(y))},Z.\u0275cmp=m.Ib({type:Z,selectors:[["app-item-unit-view"]],decls:22,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography",2,"min-width","30%"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","price"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","qty"],["matColumnDef","unit"],["matColumnDef","is_customer_show"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-header-cell",""],["mat-cell",""],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],[3,"ngModel","ngModelChange"],["name","is_customer_show",3,"value","change"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Ub(0,"h1",0),m.Pc(1,"Item Units"),m.Tb(),m.Ub(2,"mat-dialog-content",1),m.Ub(3,"table",2),m.Sb(4,3),m.Nc(5,G,2,0,"th",4),m.Nc(6,B,2,3,"td",5),m.Rb(),m.Sb(7,6),m.Nc(8,K,2,0,"th",4),m.Nc(9,H,2,1,"td",5),m.Rb(),m.Sb(10,7),m.Nc(11,Q,2,0,"th",4),m.Nc(12,z,2,1,"td",5),m.Rb(),m.Sb(13,8),m.Nc(14,Y,2,0,"th",4),m.Nc(15,W,4,3,"td",5),m.Rb(),m.Nc(16,X,1,0,"tr",9),m.Nc(17,J,1,0,"tr",10),m.Tb(),m.Pb(18,"br"),m.Tb(),m.Ub(19,"mat-dialog-actions",11),m.Ub(20,"button",12),m.Pc(21,"Close"),m.Tb(),m.Tb()),2&t&&(m.Cb(3),m.pc("dataSource",e.dataSource),m.Cb(13),m.pc("matHeaderRowDef",e.displayedColumns),m.Cb(1),m.pc("matRowDefColumns",e.displayedColumns))},directives:[x.j,x.g,L.o,L.c,L.i,L.b,L.k,L.n,x.d,V.b,x.e,L.h,L.a,$.t,$.d,$.p,$.s,q.b,q.a,L.j,L.m],styles:["table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{min-width:70px}"]}),Z),et=c("tgey"),it=c("d3UM"),at=c("M9IT"),nt=c("FKr1"),ct=c("1jcm"),rt=c("zkoq"),ot=c("NFeN");function st(t,e){if(1&t&&(m.Ub(0,"mat-option",38),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i.type),m.Cb(1),m.Qc(i.name)}}function lt(t,e){if(1&t){var i=m.Vb();m.Ub(0,"mat-form-field",36),m.Ub(1,"mat-label"),m.Pc(2,"User Role"),m.Tb(),m.Ub(3,"mat-select",37),m.cc("selectionChange",(function(){return m.Dc(i),m.gc().filterRoleChanged()}))("ngModelChange",(function(t){return m.Dc(i),m.gc().searchRoleName=t})),m.Nc(4,st,2,2,"mat-option",8),m.Tb(),m.Tb()}if(2&t){var a=m.gc();m.Cb(3),m.pc("ngModel",a.searchRoleName),m.Cb(1),m.pc("ngForOf",a.filterRoleList)}}function bt(t,e){if(1&t&&(m.Ub(0,"mat-option",38),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i._id),m.Cb(1),m.Qc(i.first_name)}}function ut(t,e){if(1&t){var i=m.Vb();m.Ub(0,"mat-form-field",36),m.Ub(1,"mat-label"),m.Pc(2,"User"),m.Tb(),m.Ub(3,"mat-select",39),m.cc("ngModelChange",(function(t){return m.Dc(i),m.gc().searchUserId=t})),m.Nc(4,bt,2,2,"mat-option",8),m.Tb(),m.Tb()}if(2&t){var a=m.gc();m.Cb(3),m.pc("ngModel",a.searchUserId),m.Cb(1),m.pc("ngForOf",a.filterUserList)}}function mt(t,e){if(1&t&&(m.Ub(0,"mat-option",38),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i.value),m.Cb(1),m.Qc(i.name)}}function dt(t,e){if(1&t&&(m.Ub(0,"mat-option",38),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i._id),m.Cb(1),m.Qc(i.name)}}function ft(t,e){if(1&t&&(m.Ub(0,"mat-option",38),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i.value),m.Cb(1),m.Qc(i.name)}}function pt(t,e){1&t&&(m.Ub(0,"th",40),m.Pc(1," Position "),m.Tb())}var ht=function(){return{standalone:!0}};function gt(t,e){if(1&t){var i=m.Vb();m.Ub(0,"td",41),m.Ub(1,"input",42),m.cc("change",(function(){m.Dc(i);var t=e.$implicit;return m.gc().changePosition(t)}))("ngModelChange",(function(t){return m.Dc(i),e.$implicit.position=t})),m.Tb(),m.Tb()}if(2&t){var a=e.$implicit;m.Cb(1),m.pc("ngModelOptions",m.rc(2,ht))("ngModel",a.position)}}function vt(t,e){1&t&&(m.Ub(0,"th",40),m.Pc(1," Name "),m.Tb())}function yt(t,e){if(1&t&&(m.Ub(0,"td",43),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.Cb(1),m.Rc(" ",i.name," ")}}function Tt(t,e){1&t&&(m.Ub(0,"th",40),m.Pc(1," Second Name "),m.Tb())}function Ut(t,e){if(1&t&&(m.Ub(0,"td",41),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.Cb(1),m.Rc(" ",i.secondary_name," ")}}function Ct(t,e){1&t&&(m.Ub(0,"th",40),m.Pc(1," Category "),m.Tb())}function It(t,e){if(1&t&&(m.Ub(0,"td",41),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.Cb(1),m.Rc(" ",i.category_id?i.category_id.name:""," ")}}function Pt(t,e){1&t&&(m.Ub(0,"th",44),m.Pc(1," Image "),m.Tb())}function _t(t,e){if(1&t&&(m.Ub(0,"td",41),m.Pb(1,"img",45),m.Tb()),2&t){var i=e.$implicit;m.Cb(1),m.qc("src",i.thumbnail,m.Fc)}}function Rt(t,e){1&t&&(m.Ub(0,"th",40),m.Pc(1," Type "),m.Tb())}function Dt(t,e){if(1&t&&(m.Ub(0,"td",41),m.Pc(1),m.Tb()),2&t){var i=e.$implicit,a=m.gc();m.Cb(1),m.Rc(" ",a.itemTypes[i.type]," ")}}function wt(t,e){1&t&&(m.Ub(0,"th",44),m.Pc(1," Price "),m.Tb())}function St(t,e){if(1&t&&(m.Ub(0,"td",41),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.Cb(1),m.Rc(" ",i.price," ")}}function Nt(t,e){1&t&&(m.Ub(0,"th",44),m.Pc(1," Price "),m.Tb())}function Ft(t,e){if(1&t){var i=m.Vb();m.Ub(0,"td",41),m.Ub(1,"input",42),m.cc("change",(function(){m.Dc(i);var t=e.$implicit;return m.gc().changePosition(t)}))("ngModelChange",(function(t){return m.Dc(i),e.$implicit.price=t})),m.Tb(),m.Tb()}if(2&t){var a=e.$implicit;m.Cb(1),m.pc("ngModelOptions",m.rc(2,ht))("ngModel",a.price)}}function Lt(t,e){1&t&&(m.Ub(0,"th",44),m.Pc(1," Quantity "),m.Tb())}function Ot(t,e){if(1&t&&(m.Ub(0,"td",41),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.Cb(1),m.Qc(i.item_volume)}}function kt(t,e){1&t&&(m.Ub(0,"th",44),m.Pc(1," Availability Status "),m.Tb())}function At(t,e){if(1&t&&(m.Ub(0,"mat-option",38),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i.value),m.Cb(1),m.Qc(i.name)}}function Et(t,e){if(1&t){var i=m.Vb();m.Ub(0,"td",41),m.Ub(1,"mat-select",46),m.cc("selectionChange",(function(){m.Dc(i);var t=e.$implicit;return m.gc().updateItemDepoPrice(t)}))("ngModelChange",(function(t){return m.Dc(i),e.$implicit.availability_status=t})),m.Nc(2,At,2,2,"mat-option",8),m.Tb(),m.Tb()}if(2&t){var a=e.$implicit,n=m.gc();m.Cb(1),m.pc("ngModel",a.availability_status),m.Cb(1),m.pc("ngForOf",n.availabilityList)}}function Mt(t,e){1&t&&(m.Ub(0,"th",40),m.Pc(1," Active "),m.Tb())}function xt(t,e){if(1&t){var i=m.Vb();m.Ub(0,"td",41),m.Ub(1,"mat-slide-toggle",47),m.cc("ngModelChange",(function(t){return m.Dc(i),e.$implicit.is_active=t}))("change",(function(){m.Dc(i);var t=e.$implicit;return m.gc().changeActivationStatus(t)})),m.Tb(),m.Tb()}if(2&t){var a=e.$implicit;m.Cb(1),m.pc("ngModel",a.is_active)}}function Vt(t,e){1&t&&(m.Ub(0,"th",40),m.Pc(1," Controls "),m.Tb())}function $t(t,e){if(1&t){var i=m.Vb();m.Ub(0,"mat-grid-tile"),m.Ub(1,"button",52),m.cc("click",(function(){m.Dc(i);var t=m.gc().$implicit;return m.gc().viewItemUnit(t)})),m.Ub(2,"mat-icon",53),m.Pc(3,"visibility"),m.Tb(),m.Tb(),m.Tb()}}function qt(t,e){if(1&t){var i=m.Vb();m.Ub(0,"mat-grid-tile"),m.Ub(1,"button",52),m.cc("click",(function(){m.Dc(i);var t=m.gc().$implicit;return m.gc().openItemViewDialog(t)})),m.Ub(2,"mat-icon",53),m.Pc(3,"visibility"),m.Tb(),m.Tb(),m.Tb()}}var Gt=function(){return[]};function jt(t,e){if(1&t){var i=m.Vb();m.Ub(0,"mat-grid-tile"),m.Ub(1,"button",54),m.cc("click",(function(){m.Dc(i);var t=m.gc().$implicit;return m.gc().navigateToEdit(t._id)})),m.Ub(2,"mat-icon",53),m.Pc(3,"create"),m.Tb(),m.Tb(),m.Tb()}2&t&&(m.Cb(1),m.pc("routerLink",m.rc(1,Gt)))}function Bt(t,e){if(1&t){var i=m.Vb();m.Ub(0,"td",41),m.Ub(1,"mat-grid-list",48),m.Nc(2,$t,4,0,"mat-grid-tile",49),m.Nc(3,qt,4,0,"mat-grid-tile",49),m.Nc(4,jt,4,2,"mat-grid-tile",49),m.Ub(5,"mat-grid-tile"),m.Ub(6,"button",50),m.cc("click",(function(){m.Dc(i);var t=e.$implicit;return m.gc().deleteIcon(t._id)})),m.Ub(7,"mat-icon",51),m.Pc(8,"delete"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()}if(2&t){var a=m.gc();m.Cb(2),m.pc("ngIf",a.isDepoView),m.Cb(1),m.pc("ngIf",!a.isDepoView),m.Cb(1),m.pc("ngIf",!a.isDepoView)}}function Kt(t,e){1&t&&m.Pb(0,"tr",55)}function Ht(t,e){1&t&&m.Pb(0,"tr",56)}var Qt,zt=function(){return[5,10,25]},Yt=((Qt=function(){function t(e,a,n,c,r,o,s,l){i(this,t),this.router=e,this.settingService=a,this.usersFacade=n,this.categoryFacade=c,this.facade=r,this.sidebarNoticeService=o,this.itemUnitViewDialog=s,this.confirmService=l,this.displayedColumns=[],this.itemTypeList=[],this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.filterUserList=[],this.filterCategoryList=[],this.filterRoleList=[],this.searchRoleName="",this.searchItemType="",this.searchUserId="",this.filterCategoryId="",this.isDepoUserSearched=!1,this.availabilityStatus=null,this.availabilityList=[{name:"Available",value:O.available},{name:"Not Available",value:O.notAvailable},{name:"Notify",value:O.notify}],this.currentRole=this.settingService.user.role_id.type||"User",this.pageDetails={currentPage:1,itemsPerPage:10,totalPages:3,totalRecords:200},this.totalBanner=0}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.filterItem(),this.facade.getItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,O,this.searchUserId,this.filterCategoryId).subscribe((function(e){t.dataSource=new L.p(e.data),t.dataSource.sort=t.sort,t.pageDetails.totalRecords=e.totalCount})),this.facade.getItemTypes().subscribe((function(e){t.itemTypeList=e})),this.usersFacade.getUsersByType(1,2e3).subscribe((function(e){t.filterUserList=e.userList})),this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe((function(e){t.filterCategoryList=e})),this.usersFacade.getRoleList().subscribe((function(e){t.filterRoleList=e.data}))}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"pageEvent",value:function(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex+1,this.filterItem()}},{key:"deleteIcon",value:function(t){var e=this;this.confirmService.confirm("Are you sure want to delete this Item?","Confirm").subscribe((function(i){1==i&&e.facade.deleteItem(t).then((function(t){return e.filterItem()}))}))}},{key:"navigateToEdit",value:function(t){var e=this;this.facade.loadItemDetails(t).then((function(i){e.router.navigate(["items","edit",t])}))}},{key:"filterItem",value:function(){this.facade.loadItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus,this.searchUserId,this.filterCategoryId),this.searchRoleName==M.DEPO&&this.searchUserId&&""!=this.searchUserId?(this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","controls"],this.isDepoUserSearched=!0):(this.setRoleBasedColumn(),this.isDepoUserSearched=!1)}},{key:"resetFilter",value:function(){this.searchItemType="",this.availabilityStatus=null,this.searchRoleName="",this.searchUserId="",this.filterCategoryId="",this.filterUserList=[]}},{key:"changeActivationStatus",value:function(t){var e=this,i=Object.assign({},t);this.isDepoView?this.updateItemDepoPrice(t):this.facade.changeActivationStatus(i).then((function(t){e.filterItem()}))}},{key:"changePosition",value:function(t){var e=Object.assign({},t),i=[];e.subCategory_ids.map((function(t){i.push(t._id)})),e.item_type=e.type,e.category_id=e.category_id._id,e.subCategory_ids=i,this.isDepoView?this.updateItemDepoPrice(e):this.facade.updateItem(e)}},{key:"filterRoleChanged",value:function(){""!=this.searchRoleName.trim()?this.usersFacade.loadUsers(1,200,"",this.searchRoleName):this.filterUserList=[]}},{key:"setRoleBasedColumn",value:function(){switch(this.currentRole){case A.ADMIN:this.displayedColumns=["thumbnail","position","name","price","type","is_active","category","controls"];break;case A.DEPO:this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","controls"];break;case A.HAWKER:this.displayedColumns=["thumbnail","position","name","category","item_volume","price","controls"];break;default:this.displayedColumns=["thumbnail","position","name","category"]}}},{key:"openItemViewDialog",value:function(t){this.sidebarNoticeService.setComponent(D),this.sidebarNoticeService.setIsOpened(!0),this.facade.setItemViewData(t)}},{key:"updateItemDepoPrice",value:function(t){var e=this,i={item_id:t._id,user_id:this.searchUserId,position:t.position,is_active:t.is_active,availability_status:t.availability_status,item_units:t.all_item_units};i.item_units.map((function(e){1==e.is_customer_show&&(e.price=t.price)})),this.facade.updateItemDepoPrice(i).then((function(t){e.filterItem()}))}},{key:"viewItemUnit",value:function(t){var e=this;this.itemUnitViewDialog.open(tt,{data:t}).afterClosed().subscribe((function(t){e.filterItem()}))}},{key:"isDepoView",get:function(){return!(!this.isDepoUserSearched&&this.currentRole!=A.DEPO)}},{key:"isDepoRole",get:function(){return this.currentRole==A.DEPO}}]),t}()).\u0275fac=function(t){return new(t||Qt)(m.Ob(b.f),m.Ob(k.d),m.Ob(S.a),m.Ob(w.a),m.Ob(y),m.Ob(E.a),m.Ob(x.c),m.Ob(N.a))},Qt.\u0275cmp=m.Ib({type:Qt,selectors:[["app-items-components-item-list"]],viewQuery:function(t,e){var i;1&t&&m.Sc(F.a,!0),2&t&&m.yc(i=m.dc())&&(e.sort=i.first)},decls:77,vars:15,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[1,"form-field-full"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100","class","matero-col",4,"ngIf"],["fxFlex","33","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Item Type","name","filterType",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Category","name","filterType",3,"ngModel","ngModelChange"],["fxFlex","34","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Type","name","filterCategoryId",3,"ngModel","ngModelChange"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","style","max-width: 100px;",4,"matCellDef"],["matColumnDef","secondary_name"],["matColumnDef","category"],["matColumnDef","thumbnail"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","price"],["matColumnDef","price_edit"],["matColumnDef","item_volume"],["matColumnDef","availability_status"],["matColumnDef","is_active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["fxFlex","50","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","User Role","name","searchRoleName",3,"ngModel","selectionChange","ngModelChange"],[3,"value"],["placeholder","User","name","searchUserId",3,"ngModel","ngModelChange"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-cell","",2,"max-width","100px"],["mat-header-cell",""],["alt","Item Image","width","100px","height","50px",3,"src"],["placeholder","Type","name","availability_status",3,"ngModel","selectionChange","ngModelChange"],["color","primary",3,"ngModel","ngModelChange","change"],["cols","3","rowHeight","50px"],[4,"ngIf"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-icon-button","","aria-label","View",3,"click"],["color","primary"],["mat-icon-button","","aria-label","Edit",3,"routerLink","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Pb(0,"page-header"),m.Ub(1,"section"),m.Ub(2,"a",0),m.Pc(3," Add New "),m.Tb(),m.Tb(),m.Pb(4,"br"),m.Ub(5,"div",1),m.Ub(6,"div",2),m.Ub(7,"mat-card"),m.Ub(8,"mat-card-title"),m.Pc(9,"Filter"),m.Tb(),m.Ub(10,"form",3),m.Ub(11,"div",4),m.Nc(12,lt,5,2,"mat-form-field",5),m.Nc(13,ut,5,2,"mat-form-field",5),m.Ub(14,"mat-form-field",6),m.Ub(15,"mat-label"),m.Pc(16,"Item Type"),m.Tb(),m.Ub(17,"mat-select",7),m.cc("ngModelChange",(function(t){return e.searchItemType=t})),m.Nc(18,mt,2,2,"mat-option",8),m.Tb(),m.Tb(),m.Ub(19,"mat-form-field",6),m.Ub(20,"mat-label"),m.Pc(21,"Category"),m.Tb(),m.Ub(22,"mat-select",9),m.cc("ngModelChange",(function(t){return e.filterCategoryId=t})),m.Nc(23,dt,2,2,"mat-option",8),m.Tb(),m.Tb(),m.Ub(24,"mat-form-field",10),m.Ub(25,"mat-label"),m.Pc(26,"Availability"),m.Tb(),m.Ub(27,"mat-select",11),m.cc("ngModelChange",(function(t){return e.availabilityStatus=t})),m.Nc(28,ft,2,2,"mat-option",8),m.Tb(),m.Tb(),m.Ub(29,"div",12),m.Ub(30,"button",13),m.cc("click",(function(){return e.filterItem()})),m.Pc(31,"Search"),m.Tb(),m.Ub(32,"button",14),m.cc("click",(function(){return e.resetFilter()})),m.Pc(33,"Reset"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Ub(34,"div",15),m.Ub(35,"table",16),m.Sb(36,17),m.Ub(37,"form"),m.Nc(38,pt,2,0,"th",18),m.Nc(39,gt,2,3,"td",19),m.Tb(),m.Rb(),m.Sb(40,20),m.Nc(41,vt,2,0,"th",18),m.Nc(42,yt,2,1,"td",21),m.Rb(),m.Sb(43,22),m.Nc(44,Tt,2,0,"th",18),m.Nc(45,Ut,2,1,"td",19),m.Rb(),m.Sb(46,23),m.Nc(47,Ct,2,0,"th",18),m.Nc(48,It,2,1,"td",19),m.Rb(),m.Sb(49,24),m.Nc(50,Pt,2,0,"th",25),m.Nc(51,_t,2,1,"td",19),m.Rb(),m.Sb(52,26),m.Nc(53,Rt,2,0,"th",18),m.Nc(54,Dt,2,1,"td",19),m.Rb(),m.Sb(55,27),m.Nc(56,wt,2,0,"th",25),m.Nc(57,St,2,1,"td",19),m.Rb(),m.Sb(58,28),m.Nc(59,Nt,2,0,"th",25),m.Nc(60,Ft,2,3,"td",19),m.Rb(),m.Sb(61,29),m.Nc(62,Lt,2,0,"th",25),m.Nc(63,Ot,2,1,"td",19),m.Rb(),m.Sb(64,30),m.Nc(65,kt,2,0,"th",25),m.Ub(66,"form"),m.Nc(67,Et,3,2,"td",19),m.Tb(),m.Rb(),m.Sb(68,31),m.Nc(69,Mt,2,0,"th",18),m.Nc(70,xt,2,1,"td",19),m.Rb(),m.Sb(71,32),m.Nc(72,Vt,2,0,"th",18),m.Nc(73,Bt,9,3,"td",19),m.Rb(),m.Nc(74,Kt,1,0,"tr",33),m.Nc(75,Ht,1,0,"tr",34),m.Tb(),m.Ub(76,"mat-paginator",35),m.cc("page",(function(t){return e.pageEvent(t)})),m.Tb(),m.Tb()),2&t&&(m.Cb(12),m.pc("ngIf",!e.isDepoRole),m.Cb(1),m.pc("ngIf",!e.isDepoRole),m.Cb(4),m.pc("ngModel",e.searchItemType),m.Cb(1),m.pc("ngForOf",e.itemTypeList),m.Cb(4),m.pc("ngModel",e.filterCategoryId),m.Cb(1),m.pc("ngForOf",e.filterCategoryList),m.Cb(4),m.pc("ngModel",e.availabilityStatus),m.Cb(1),m.pc("ngForOf",e.availabilityList),m.Cb(7),m.pc("dataSource",e.dataSource),m.Cb(39),m.pc("matHeaderRowDef",e.displayedColumns),m.Cb(1),m.pc("matRowDefColumns",e.displayedColumns),m.Cb(1),m.pc("length",e.pageDetails.totalRecords)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",m.rc(14,zt)))},directives:[et.a,V.a,b.i,T.c,T.a,U.a,U.c,$.x,$.q,$.r,T.d,I.o,C.c,C.g,it.a,$.p,$.s,I.n,V.b,L.o,F.a,L.c,L.i,L.b,L.k,L.n,at.a,nt.p,L.h,F.b,L.a,$.t,$.d,ct.a,rt.a,rt.c,ot.a,b.g,L.j,L.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}"]}),Qt),Wt=c("FtGj"),Xt=c("rGne"),Jt=c("qFsG"),Zt=c("A5z7"),te=c("sYmb");function ee(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function ie(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function ae(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function ne(t,e){if(1&t&&(m.Ub(0,"mat-option",30),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i._id),m.Cb(1),m.Qc(i.name)}}function ce(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function re(t,e){if(1&t&&(m.Ub(0,"mat-option",30),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i._id),m.Cb(1),m.Qc(i.name)}}function oe(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function se(t,e){if(1&t&&(m.Ub(0,"mat-option",30),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i.value),m.Cb(1),m.Qc(i.name)}}function le(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function be(t,e){if(1&t&&(m.Ub(0,"mat-option",30),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i._id),m.Cb(1),m.Qc(i.name)}}function ue(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function me(t,e){if(1&t&&(m.Ub(0,"mat-option",30),m.Pc(1),m.Tb()),2&t){var i=e.$implicit;m.pc("value",i._id),m.Cb(1),m.Qc(i.name)}}function de(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function fe(t,e){if(1&t){var i=m.Vb();m.Ub(0,"mat-chip",31),m.cc("removed",(function(){m.Dc(i);var t=e.$implicit;return m.gc().removetag(t)})),m.Pc(1),m.Ub(2,"mat-icon",32),m.Pc(3,"cancel"),m.Tb(),m.Tb()}if(2&t){var a=e.$implicit;m.Cb(1),m.Rc(" ",a," ")}}function pe(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function he(t,e){if(1&t){var i=m.Vb();m.Ub(0,"mat-chip",31),m.cc("removed",(function(){m.Dc(i);var t=e.$implicit;return m.gc().removepic(t)})),m.Pc(1),m.Ub(2,"mat-icon",32),m.Pc(3,"cancel"),m.Tb(),m.Tb()}if(2&t){var a=e.$implicit;m.Cb(1),m.Rc(" ",a," ")}}function ge(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function ve(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}function ye(t,e){1&t&&(m.Ub(0,"mat-error"),m.Pc(1),m.hc(2,"translate"),m.Tb()),2&t&&(m.Cb(1),m.Rc(" ",m.ic(2,1,"validations.required")," "))}var Te,Ue,Ce,Ie=function(){return["home","items","new"]},Pe=function(){return["/items"]},_e=((Te=function(){function e(t,a,n,c,r,o){var s=this;i(this,e),this.fb=t,this.router=a,this.activeRoute=n,this.facade=c,this.unitFacde=r,this.categoryFacade=o,this.recommendedList=[],this.isEditMode=!1,this.activeEditId="",this.separatorKeysCodes=[Wt.g,Wt.c],this.cateTagValues=[],this.subCateTagValues=[],this.itemForm=this.fb.group({name:["",[$.w.required]],secondary_name:[""],price:[0],is_active:[!0],category_id:[""],unit_id:[""],item_type:[""],description:[""],benefits:[""],category_tags:[[]],thumbnail:[""],picture:[[]],recommended_items:[[]],subCategory_ids:[[]]}),this.activeRoute.params.subscribe((function(t){null!=t.id&&null!=t.id&&""!=t.id&&(s.isEditMode=!0,s.activeEditId=t.id)}))}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.categoryFacade.loadParentCategories(),this.unitFacde.loadUnites(1,500),this.categoryFacade.getParentCategories().subscribe((function(e){t.categoryList=e})),this.categoryFacade.getCategoriesByParentId().subscribe((function(e){t.subCategoryList=e.data})),this.unitFacde.getUnites().subscribe((function(e){t.unitList=e.data})),this.facade.getItemTypes().subscribe((function(e){t.itemTypeList=e})),this.facade.getSallableItemList().subscribe((function(e){t.recommendedList=e.data})),this.isEditMode&&this.facade.getItemDetails(this.activeEditId).subscribe((function(e){var i=Object.assign({},e);t.itemForm.patchValue(e),t.itemForm.patchValue({item_type:i.type})}),(function(t){return console.error(t)}))}},{key:"onFormSubmit",value:function(t){var e=this;if(console.log("form value ",this.itemForm.value,this.itemForm.valid),this.itemForm.valid)if(this.isEditMode){var i=this.itemForm.value;i._id=this.activeEditId,this.facade.updateItem(i).then((function(t){e.itemForm.reset(),e.router.navigate(["items"])}))}else this.facade.newItem(this.itemForm.value).then((function(t){e.itemForm.reset(),e.router.navigate(["items"])}))}},{key:"addtag",value:function(e){var i=e.input,a=e.value,n=t(this.itemForm.get("category_tags").value);(a||"").trim()&&(n.push(a.trim()),this.itemForm.get("category_tags").setValue(n)),i&&(i.value="")}},{key:"removetag",value:function(e){var i=t(this.itemForm.get("category_tags").value),a=i.indexOf(e);a>=0&&(i.splice(a,1),this.itemForm.get("category_tags").setValue(i))}},{key:"addpic",value:function(e){var i=e.input,a=e.value,n=t(this.itemForm.get("picture").value);(a||"").trim()&&(n.push(a.trim()),this.itemForm.get("picture").setValue(n)),i&&(i.value="")}},{key:"removepic",value:function(e){var i=t(this.itemForm.get("picture").value),a=i.indexOf(e);a>=0&&(i.splice(a,1),this.itemForm.get("picture").setValue(i))}},{key:"onCategorySelectionChange",value:function(){var e,i=this;this.cateTagValues=[];var a=this.itemForm.get("category_id").value;this.categoryList.filter((function(t){a==t._id&&i.cateTagValues.push(t.name)})),this.itemForm.patchValue({category_tags:(e=[]).concat.apply(e,t(this.cateTagValues))}),this.itemForm.get("subCategory_ids").setValue([]),this.loadSubCategories(a)}},{key:"onSubCategorySelectionChange",value:function(){var e,i=this;this.subCateTagValues=[];var a=this.itemForm.get("subCategory_ids").value;this.subCategoryList.filter((function(t){a.indexOf(t._id)>=0&&i.subCateTagValues.push(t.name)})),this.itemForm.patchValue({category_tags:(e=[]).concat.apply(e,t(this.cateTagValues).concat([this.subCateTagValues]))})}},{key:"loadSubCategories",value:function(t){this.categoryFacade.loadCategories(1,200,t,"")}},{key:"is_active_value",get:function(){return!!this.itemForm.get("is_active").value&&this.itemForm.get("is_active").value}}]),e}()).\u0275fac=function(t){return new(t||Te)(m.Ob($.f),m.Ob(b.f),m.Ob(b.a),m.Ob(y),m.Ob(Xt.a),m.Ob(w.a))},Te.\u0275cmp=m.Ib({type:Te,selectors:[["app-items-components-item-add"]],decls:103,vars:33,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","25","fxFlex.lt-sm","100"],["matInput","","placeholder","Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Secondary Name","formControlName","secondary_name","required",""],["matInput","","placeholder","Price","formControlName","price","required","","type","number"],["formControlName","is_active","color","primary",2,"margin-top","20px"],["formControlName","category_id","placeholder","Category","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subCategory_ids","placeholder","Sub Category","required","","multiple","",3,"selectionChange"],["formControlName","item_type","placeholder","Type","required",""],["formControlName","unit_id","placeholder","Unit","required",""],["fxFlex","50","fxFlex.lt-sm","100"],["formControlName","recommended_items","placeholder","Recommendation","multiple",""],["matInput","","placeholder","Thumbnail","formControlName","thumbnail","required",""],["aria-label","Tags"],["chipList",""],["selectable","true","removable","true",3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-label","Pictures"],["picList",""],["placeholder","Pictures",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","placeholder","Description","formControlName","description","required",""],["matInput","","placeholder","Benefits","formControlName","benefits","required",""],["mat-raised-button","","color","primary","type","submit",1,"m-t-8",2,"margin-right","5px"],["mat-raised-button","","type","button",1,"m-t-8",3,"routerLink"],[3,"value"],["selectable","true","removable","true",3,"removed"],["matChipRemove",""]],template:function(t,e){if(1&t&&(m.Pb(0,"page-header",0),m.Ub(1,"div",1),m.Ub(2,"div",2),m.Ub(3,"mat-card"),m.Ub(4,"mat-card-title"),m.Pc(5),m.Tb(),m.Ub(6,"form",3),m.cc("submit",(function(t){return e.onFormSubmit(t)})),m.Ub(7,"div",4),m.Ub(8,"div",5),m.Ub(9,"mat-form-field"),m.Ub(10,"mat-label"),m.Pc(11,"Name"),m.Tb(),m.Pb(12,"input",6),m.Nc(13,ee,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(14,"div",5),m.Ub(15,"mat-form-field"),m.Ub(16,"mat-label"),m.Pc(17,"Secondary Name"),m.Tb(),m.Pb(18,"input",8),m.Nc(19,ie,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(20,"div",5),m.Ub(21,"mat-form-field"),m.Ub(22,"mat-label"),m.Pc(23,"Price"),m.Tb(),m.Pb(24,"input",9),m.Nc(25,ae,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(26,"div",5),m.Ub(27,"mat-slide-toggle",10),m.Pc(28),m.Tb(),m.Tb(),m.Ub(29,"div",5),m.Ub(30,"mat-form-field"),m.Ub(31,"mat-label"),m.Pc(32,"Category"),m.Tb(),m.Ub(33,"mat-select",11),m.cc("selectionChange",(function(){return e.onCategorySelectionChange()})),m.Nc(34,ne,2,2,"mat-option",12),m.Tb(),m.Nc(35,ce,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(36,"div",5),m.Ub(37,"mat-form-field"),m.Ub(38,"mat-label"),m.Pc(39,"Sub Category"),m.Tb(),m.Ub(40,"mat-select",13),m.cc("selectionChange",(function(){return e.onSubCategorySelectionChange()})),m.Nc(41,re,2,2,"mat-option",12),m.Tb(),m.Nc(42,oe,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(43,"div",5),m.Ub(44,"mat-form-field"),m.Ub(45,"mat-label"),m.Pc(46,"Type"),m.Tb(),m.Ub(47,"mat-select",14),m.Nc(48,se,2,2,"mat-option",12),m.Tb(),m.Nc(49,le,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(50,"div",5),m.Ub(51,"mat-form-field"),m.Ub(52,"mat-label"),m.Pc(53,"Unit"),m.Tb(),m.Ub(54,"mat-select",15),m.Nc(55,be,2,2,"mat-option",12),m.Tb(),m.Nc(56,ue,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(57,"div",16),m.Ub(58,"mat-form-field"),m.Ub(59,"mat-label"),m.Pc(60,"Recommendation"),m.Tb(),m.Ub(61,"mat-select",17),m.Nc(62,me,2,2,"mat-option",12),m.Tb(),m.Tb(),m.Tb(),m.Ub(63,"div",16),m.Ub(64,"mat-form-field"),m.Ub(65,"mat-label"),m.Pc(66,"Thumbnail"),m.Tb(),m.Pb(67,"input",18),m.Nc(68,de,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(69,"div",16),m.Ub(70,"mat-form-field"),m.Ub(71,"mat-label"),m.Pc(72,"Tags"),m.Tb(),m.Ub(73,"mat-chip-list",19,20),m.Nc(75,fe,4,1,"mat-chip",21),m.Ub(76,"input",22),m.cc("matChipInputTokenEnd",(function(t){return e.addtag(t)})),m.Tb(),m.Tb(),m.Nc(77,pe,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(78,"div",16),m.Ub(79,"mat-form-field"),m.Ub(80,"mat-label"),m.Pc(81,"Pictures"),m.Tb(),m.Ub(82,"mat-chip-list",23,24),m.Nc(84,he,4,1,"mat-chip",21),m.Ub(85,"input",25),m.cc("matChipInputTokenEnd",(function(t){return e.addpic(t)})),m.Tb(),m.Tb(),m.Nc(86,ge,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(87,"div",16),m.Ub(88,"mat-form-field"),m.Ub(89,"mat-label"),m.Pc(90,"Description"),m.Tb(),m.Pb(91,"textarea",26),m.Nc(92,ve,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Ub(93,"div",16),m.Ub(94,"mat-form-field"),m.Ub(95,"mat-label"),m.Pc(96,"Benefits"),m.Tb(),m.Pb(97,"textarea",27),m.Nc(98,ye,3,3,"mat-error",7),m.Tb(),m.Tb(),m.Tb(),m.Ub(99,"button",28),m.Pc(100,"Save"),m.Tb(),m.Ub(101,"button",29),m.Pc(102," Back"),m.Tb(),m.Tb(),m.Tb(),m.Tb(),m.Tb()),2&t){var i=m.zc(74),a=m.zc(83);m.qc("title",e.isEditMode?"Edit Item":"New Item"),m.pc("nav",m.rc(31,Ie)),m.Cb(5),m.Rc("",e.isEditMode?"Edit Item":"New Item"," "),m.Cb(1),m.pc("formGroup",e.itemForm),m.Cb(7),m.pc("ngIf",e.itemForm.get("name").invalid),m.Cb(6),m.pc("ngIf",e.itemForm.get("secondary_name").invalid),m.Cb(6),m.pc("ngIf",e.itemForm.get("price").invalid),m.Cb(3),m.Rc(" ",e.is_active_value?"Active":"Inactive"," "),m.Cb(6),m.pc("ngForOf",e.categoryList),m.Cb(1),m.pc("ngIf",e.itemForm.get("category_id").invalid),m.Cb(6),m.pc("ngForOf",e.subCategoryList),m.Cb(1),m.pc("ngIf",e.itemForm.get("subCategory_ids").invalid),m.Cb(6),m.pc("ngForOf",e.itemTypeList),m.Cb(1),m.pc("ngIf",e.itemForm.get("item_type").invalid),m.Cb(6),m.pc("ngForOf",e.unitList),m.Cb(1),m.pc("ngIf",e.itemForm.get("unit_id").invalid),m.Cb(6),m.pc("ngForOf",e.recommendedList),m.Cb(6),m.pc("ngIf",e.itemForm.get("thumbnail").invalid),m.Cb(7),m.pc("ngForOf",e.itemForm.get("category_tags").value),m.Cb(1),m.pc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),m.Cb(1),m.pc("ngIf",e.itemForm.get("category_tags").invalid),m.Cb(7),m.pc("ngForOf",e.itemForm.get("picture").value),m.Cb(1),m.pc("matChipInputFor",a)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),m.Cb(1),m.pc("ngIf",e.itemForm.get("picture").invalid),m.Cb(6),m.pc("ngIf",e.itemForm.get("description").invalid),m.Cb(6),m.pc("ngIf",e.itemForm.get("benefits").invalid),m.Cb(3),m.pc("routerLink",m.rc(32,Pe))}},directives:[et.a,T.c,T.a,U.a,U.c,$.x,$.q,$.k,T.d,C.c,C.g,Jt.b,$.d,$.p,$.i,$.v,I.o,$.t,ct.a,it.a,I.n,Zt.c,Zt.b,V.b,b.g,C.b,nt.p,Zt.a,ot.a,Zt.d],pipes:[te.d],styles:[""]}),Te),Re=[{path:"",component:Yt},{path:"new",component:_e},{path:"edit/:id",component:_e}],De=((Ce=function t(){i(this,t)}).\u0275mod=m.Mb({type:Ce}),Ce.\u0275inj=m.Lb({factory:function(t){return new(t||Ce)},imports:[[b.j.forChild(Re)],b.j]}),Ce),we=((Ue=function t(){i(this,t)}).\u0275mod=m.Mb({type:Ue}),Ue.\u0275inj=m.Lb({factory:function(t){return new(t||Ue)},imports:[[l.a,De]]}),Ue)}}])}();