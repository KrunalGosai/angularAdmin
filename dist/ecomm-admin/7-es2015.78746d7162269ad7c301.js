(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{jR2d:function(t,e,a){"use strict";a.r(e),a.d(e,"CategoriesModule",(function(){return J}));var i=a("PCNd"),r=a("tyNb"),o=a("uEtv"),c=a("3Pt+"),n=a("fXoL"),s=a("tgey"),l=a("XiUz"),b=a("Wp6s"),m=a("kmnG"),g=a("qFsG"),d=a("ofXK"),u=a("d3UM"),p=a("bTqV"),f=a("NFeN"),h=a("1jcm"),y=a("FKr1"),C=a("sYmb");function U(t,e){1&t&&(n.Ub(0,"mat-error"),n.Pc(1),n.hc(2,"translate"),n.Tb()),2&t&&(n.Cb(1),n.Rc(" ",n.ic(2,1,"validations.required")," "))}function T(t,e){if(1&t&&(n.Ub(0,"mat-option",18),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.pc("value",t._id),n.Cb(1),n.Qc(t.name)}}function v(t,e){1&t&&(n.Ub(0,"mat-error"),n.Pc(1),n.hc(2,"translate"),n.Tb()),2&t&&(n.Cb(1),n.Rc(" ",n.ic(2,1,"validations.required")," "))}function P(t,e){1&t&&(n.Ub(0,"mat-error"),n.Pc(1),n.hc(2,"translate"),n.Tb()),2&t&&(n.Cb(1),n.Rc(" ",n.ic(2,1,"validations.required")," "))}const F=function(){return["home","categories","new"]};let w=(()=>{class t{constructor(t,e,a,i){this.fb=t,this.router=e,this.activeRoute=a,this.categoryFacade=i,this.isEditMode=!1,this.activeEditId="",this.categoryForm=this.fb.group({name:["",[c.w.required]],parent:[""],sort:[1],isactive:!0,category_img:[""],category_img_name:[""],img_file:[null]}),this.activeRoute.params.subscribe(t=>{null!=t.id&&null!=t.id&&""!=t.id&&(this.isEditMode=!0,this.activeEditId=t.id)})}ngOnInit(){this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe(t=>{this.categoryList=t}),this.isEditMode&&this.categoryFacade.getCategoryDetails(this.activeEditId).then(t=>{let e=t;e=e.categoryDetail,console.log({result:t}),this.categoryForm.patchValue({name:e.name,parent:e.parent_categoriesIds.length>0?e.parent_categoriesIds[0]:"",category_img_name:e.category_image,isactive:e.is_active})}).catch(t=>console.error(t))}fileUpladChange(t){let e=t.target.files;if(e&&null!=e&&e.length>0){let t=e[0];this.categoryForm.get("category_img_name").setValue(t.name),this.categoryForm.get("img_file").setValue(t)}else this.categoryForm.get("category_img_name").reset()}onFormSubmit(t){if(this.categoryForm.valid)if(this.isEditMode){let t=this.categoryForm.value;t.id=this.activeEditId,this.categoryFacade.updateCategory(t).then(t=>{this.categoryForm.reset(),this.router.navigate(["categories"])})}else this.categoryFacade.newCategory(this.categoryForm.value).then(t=>{this.categoryForm.reset(),this.router.navigate(["categories"])})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(c.f),n.Ob(r.f),n.Ob(r.a),n.Ob(o.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-categories-components-category-add"]],decls:42,vars:9,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100"],["matInput","","placeholder","Category Name","formControlName","name","required",""],[4,"ngIf"],["formControlName","parent","placeholder","Parent Category"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","25","fxFlex.lt-sm","100"],["matInput","","placeholder","Sort Order","formControlName","sort","required","","type","number"],["matInput","","placeholder","File Name","type","text","formControlName","category_img_name","required","","readonly",""],["type","file","formControlName","category_img","hidden","true",3,"change"],["file",""],["mat-button","","type","button","matSuffix","","mat-icon-button","","aria-label","Upload",3,"click"],["formControlName","isactive","color","primary"],["mat-raised-button","","color","primary","type","submit",1,"m-t-8"],[3,"value"]],template:function(t,e){if(1&t){const t=n.Vb();n.Pb(0,"page-header",0),n.Ub(1,"div",1),n.Ub(2,"div",2),n.Ub(3,"mat-card"),n.Ub(4,"mat-card-title"),n.Pc(5),n.Tb(),n.Ub(6,"form",3),n.cc("submit",(function(t){return e.onFormSubmit(t)})),n.Ub(7,"div",4),n.Ub(8,"div",5),n.Ub(9,"mat-form-field"),n.Ub(10,"mat-label"),n.Pc(11,"Name"),n.Tb(),n.Pb(12,"input",6),n.Nc(13,U,3,3,"mat-error",7),n.Tb(),n.Tb(),n.Ub(14,"div",5),n.Ub(15,"mat-form-field"),n.Ub(16,"mat-label"),n.Pc(17,"Parent Category"),n.Tb(),n.Ub(18,"mat-select",8),n.Nc(19,T,2,2,"mat-option",9),n.Tb(),n.Tb(),n.Tb(),n.Ub(20,"div",10),n.Ub(21,"mat-form-field"),n.Ub(22,"mat-label"),n.Pc(23,"Sort"),n.Tb(),n.Pb(24,"input",11),n.Nc(25,v,3,3,"mat-error",7),n.Tb(),n.Tb(),n.Ub(26,"div",10),n.Ub(27,"mat-form-field"),n.Ub(28,"mat-label"),n.Pc(29,"Image"),n.Tb(),n.Pb(30,"input",12),n.Ub(31,"input",13,14),n.cc("change",(function(t){return e.fileUpladChange(t)})),n.Tb(),n.Ub(33,"button",15),n.cc("click",(function(){return n.Dc(t),n.zc(32).click()})),n.Ub(34,"mat-icon"),n.Pc(35,"folder"),n.Tb(),n.Tb(),n.Nc(36,P,3,3,"mat-error",7),n.Tb(),n.Tb(),n.Ub(37,"div",10),n.Ub(38,"mat-slide-toggle",16),n.Pc(39," Is Active "),n.Tb(),n.Tb(),n.Tb(),n.Ub(40,"button",17),n.Pc(41,"Save"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()}2&t&&(n.qc("title",e.isEditMode?"Edit Category":"New Category"),n.pc("nav",n.rc(8,F)),n.Cb(5),n.Rc("",e.isEditMode?"Edit Category":"New Category"," "),n.Cb(1),n.pc("formGroup",e.categoryForm),n.Cb(7),n.pc("ngIf",e.categoryForm.get("name").invalid),n.Cb(6),n.pc("ngForOf",e.categoryList),n.Cb(6),n.pc("ngIf",e.categoryForm.get("sort").invalid),n.Cb(11),n.pc("ngIf",e.categoryForm.get("category_img").invalid))},directives:[s.a,l.c,l.a,b.a,b.c,c.x,c.q,c.k,l.d,m.c,m.g,g.b,c.d,c.p,c.i,c.v,d.o,u.a,d.n,c.t,p.b,m.i,f.a,h.a,m.b,y.p],pipes:[C.d],styles:[""]}),t})();var N=a("Xibt"),x=a("M9IT"),S=a("Dh3D"),_=a("+0xr"),D=a("zkoq");function I(t,e){if(1&t&&(n.Ub(0,"mat-option",22),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.pc("value",t._id),n.Cb(1),n.Qc(t.name)}}function R(t,e){1&t&&(n.Ub(0,"th",23),n.Pc(1," Name "),n.Tb())}function O(t,e){if(1&t&&(n.Ub(0,"td",24),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Rc(" ",t.name," ")}}function M(t,e){1&t&&(n.Ub(0,"th",23),n.Pc(1," parent "),n.Tb())}function k(t,e){if(1&t&&(n.Ub(0,"span"),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Rc(" ",t.name," ")}}function E(t,e){if(1&t&&(n.Ub(0,"td",24),n.Nc(1,k,2,1,"span",25),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.pc("ngForOf",t.parent_categoriesIds)}}function L(t,e){1&t&&(n.Ub(0,"th",23),n.Pc(1," Active "),n.Tb())}function q(t,e){if(1&t&&(n.Ub(0,"td",24),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Rc(" ",t.is_active?"Yes":"No"," ")}}function z(t,e){1&t&&(n.Ub(0,"th",23),n.Pc(1," Controls "),n.Tb())}const V=function(t){return["edit",t]};function $(t,e){if(1&t){const t=n.Vb();n.Ub(0,"td",24),n.Ub(1,"mat-grid-list",26),n.Ub(2,"mat-grid-tile"),n.Ub(3,"button",27),n.Ub(4,"mat-icon",28),n.Pc(5,"create"),n.Tb(),n.Tb(),n.Tb(),n.Ub(6,"mat-grid-tile"),n.Ub(7,"button",29),n.cc("click",(function(){n.Dc(t);const a=e.$implicit;return n.gc().deleteIcon(a._id)})),n.Ub(8,"mat-icon",30),n.Pc(9,"delete"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=e.$implicit;n.Cb(3),n.pc("routerLink",n.sc(1,V,t._id))}}function j(t,e){1&t&&n.Pb(0,"tr",31)}function A(t,e){1&t&&n.Pb(0,"tr",32)}function G(t,e){if(1&t&&(n.Ub(0,"tr",33),n.Ub(1,"td",34),n.Pc(2),n.Tb(),n.Tb()),2&t){n.gc();const t=n.zc(25);n.Cb(2),n.Rc('No data matching the filter "',t.value,'"')}}const H=function(){return[5,10,25]},X=[{path:"",component:(()=>{class t{constructor(t,e){this.categoriesFacade=t,this.confirmService=e,this.displayedColumns=["name","parent","active","controls"],this.parentCategoryFilterValue="",this.pageDetails={currentPage:1,itemsPerPage:5,totalPages:3,totalRecords:100},this.totalCategory=0,this.q={username:"",email:"",gender:""}}ngOnInit(){this.categoriesFacade.loadCategories(),this.categoriesFacade.loadParentCategories(),this.categoriesFacade.getCategories().subscribe(t=>{this.dataSource=new _.p(t.data),this.totalCategory=t.categryCount}),this.categoriesFacade.getParentCategories().subscribe(t=>{this.parentCategoryList=t})}ngAfterViewInit(){this.dataSource.sort=this.sort}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}pageEvent(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex+1,this.categoriesFacade.loadCategories(this.pageDetails.currentPage,t.pageSize,"")}deleteIcon(t){this.confirmService.confirm("Are you sure want to delete this category?","Confirm").subscribe(e=>{1==e&&this.categoriesFacade.deleteCategory(t).then(t=>this.categoriesFacade.loadCategories(this.pageDetails.currentPage,this.pageDetails.itemsPerPage))})}navigateToEdit(t){}filterCategories(){this.categoriesFacade.loadCategories(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.parentCategoryFilterValue)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(o.a),n.Ob(N.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-categories-components-category-list"]],viewQuery:function(t,e){var a;1&t&&(n.Sc(x.a,!0),n.Sc(S.a,!0)),2&t&&(n.yc(a=n.dc())&&(e.paginator=a.first),n.yc(a=n.dc())&&(e.sort=a.first))},decls:44,vars:9,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["fxFlex","25","fxFlex.lt-sm","100",1,"matero-col"],["name","gender",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["matInput","","placeholder","Ex. Abc",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","parent"],["matColumnDef","active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"length","pageSize","pageSizeOptions","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["cols","2","rowHeight","50px"],["mat-icon-button","","aria-label","Edit",3,"routerLink"],["color","primary"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(n.Pb(0,"page-header"),n.Ub(1,"section"),n.Ub(2,"a",0),n.Pc(3," Add New "),n.Tb(),n.Tb(),n.Pb(4,"br"),n.Ub(5,"div",1),n.Ub(6,"div",2),n.Ub(7,"mat-card"),n.Ub(8,"mat-card-title"),n.Pc(9,"Filter"),n.Tb(),n.Ub(10,"form"),n.Ub(11,"mat-form-field",3),n.Ub(12,"mat-label"),n.Pc(13,"Parent Category"),n.Tb(),n.Ub(14,"mat-select",4),n.cc("ngModelChange",(function(t){return e.parentCategoryFilterValue=t})),n.Ub(15,"mat-option",5),n.Pc(16,"--Select--"),n.Tb(),n.Nc(17,I,2,2,"mat-option",6),n.Tb(),n.Tb(),n.Ub(18,"div",3),n.Ub(19,"button",7),n.cc("click",(function(){return e.filterCategories()})),n.Pc(20,"Search"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(21,"mat-form-field"),n.Ub(22,"mat-label"),n.Pc(23,"Search"),n.Tb(),n.Ub(24,"input",8,9),n.cc("keyup",(function(t){return e.applyFilter(t)})),n.Tb(),n.Tb(),n.Ub(26,"div",10),n.Ub(27,"table",11),n.Sb(28,12),n.Nc(29,R,2,0,"th",13),n.Nc(30,O,2,1,"td",14),n.Rb(),n.Sb(31,15),n.Nc(32,M,2,0,"th",13),n.Nc(33,E,2,1,"td",14),n.Rb(),n.Sb(34,16),n.Nc(35,L,2,0,"th",13),n.Nc(36,q,2,1,"td",14),n.Rb(),n.Sb(37,17),n.Nc(38,z,2,0,"th",13),n.Nc(39,$,10,3,"td",14),n.Rb(),n.Nc(40,j,1,0,"tr",18),n.Nc(41,A,1,0,"tr",19),n.Nc(42,G,3,1,"tr",20),n.Tb(),n.Ub(43,"mat-paginator",21),n.cc("page",(function(t){return e.pageEvent(t)})),n.Tb(),n.Tb()),2&t&&(n.Cb(14),n.pc("ngModel",e.parentCategoryFilterValue),n.Cb(3),n.pc("ngForOf",e.parentCategoryList),n.Cb(10),n.pc("dataSource",e.dataSource),n.Cb(13),n.pc("matHeaderRowDef",e.displayedColumns),n.Cb(1),n.pc("matRowDefColumns",e.displayedColumns),n.Cb(2),n.pc("length",e.totalCategory)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",n.rc(8,H)))},directives:[s.a,p.a,r.i,l.c,l.a,b.a,b.c,c.x,c.q,c.r,m.c,m.g,u.a,c.p,c.s,y.p,d.n,p.b,g.b,_.o,S.a,_.c,_.i,_.b,_.k,_.n,_.l,x.a,_.h,S.b,_.a,D.a,D.c,r.g,f.a,_.j,_.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]}),t})()},{path:"new",component:w},{path:"edit/:id",component:w}];let Q=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[r.j.forChild(X)],r.j]}),t})(),J=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[i.a,Q]]}),t})()}}]);