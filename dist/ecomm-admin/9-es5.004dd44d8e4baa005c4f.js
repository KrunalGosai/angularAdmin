!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{XdEn:function(e,a,r){"use strict";r.r(a),r.d(a,"ItemsModule",(function(){return we}));var c,o,s,l=r("PCNd"),u=r("tyNb"),m=r("2Vo4"),b=r("fXoL"),d=((c=function(){function t(){i(this,t),this.items=new m.a({}),this.editItem=new m.a({}),this.itemTypes=new m.a([{name:"Sellable",value:"SELLABLE"},{name:"Packaging Material",value:"PACKAGING_MATERIAL"},{name:"Raw Material",value:"RAW_MATERIAL"}]),this.itemViewData=new m.a({}),this.isItemsSet=!1,this.isItemDetailsSet=!1}return n(t,[{key:"getItemList",value:function(){return this.items.asObservable()}},{key:"setItemList",value:function(t){this.isItemsSet=!0,this.items.next(t)}},{key:"getEditItem",value:function(){return this.editItem.asObservable()}},{key:"setEditItem",value:function(t){this.isItemDetailsSet=!0,this.editItem.next(t)}},{key:"getItemTypes",value:function(){return this.itemTypes.asObservable()}},{key:"setItemViewData",value:function(t){this.itemViewData.next(t)}},{key:"getItemViewData",value:function(){return this.itemViewData.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||c)},c.\u0275prov=b.Kb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),p=r("vkgz"),f=r("AytR"),h=r("tk/3"),g=((o=function(){function t(e){i(this,t),this.http=e,this.baseURl=f.a.SERVER_ORIGIN}return n(t,[{key:"getItemList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",o=this.baseURl+"/api/item/get_admin_item_list?currentPage=".concat(t,"&currentPageSize=").concat(e);return null!=i&&null!=i&&""!=i.trim()&&(o+="&item_type="+i),null!=a&&null!=a&&(o+="&availability_status="+a),null!=n&&null!=n&&""!=n.trim()&&(o+="&user_type="+n),null!=r&&null!=r&&""!=r.trim()&&(o+="&user_id="+r),null!=c&&null!=c&&""!=c.trim()&&(o+="&category_id="+c),this.http.get(o)}},{key:"deleteItem",value:function(t){return this.http.delete(this.baseURl+"/api/item/delete_Item/"+t)}},{key:"getItemDetailsById",value:function(t){return this.http.get(this.baseURl+"/api/item/get_Itemdetail?item_id="+t)}},{key:"updateActivationStatus",value:function(t,e){return this.http.put(this.baseURl+"/api/item/update_Active_Deactive_Item",{item_id:e,is_active:t})}},{key:"newitem",value:function(t){return this.http.post(this.baseURl+"/api/item/add_Item",t)}},{key:"updateItem",value:function(t){return this.http.put(this.baseURl+"/api/item/update/"+t._id,t)}},{key:"updateItemDepoPrice",value:function(t){return this.http.put(this.baseURl+"/api/item/update_itemdepo_price",t)}}]),t}()).\u0275fac=function(t){return new(t||o)(b.Yb(h.b))},o.\u0275prov=b.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),v=r("5eHb"),y=((s=function(){function t(e,a,n){i(this,t),this.api=e,this.state=a,this.toster=n}return n(t,[{key:"loadItemList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";this.api.getItemList(e,i,a,n,r,c,o).subscribe((function(e){t.state.setItemList(e)}),(function(t){return console.error("api call error from load items ",t)}))}},{key:"getItemList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";return this.state.isItemsSet||this.loadItemList(t,e,i,a,n,r,c),this.state.getItemList().pipe(Object(p.a)((function(t){return t})))}},{key:"getSallableItemList",value:function(){return this.api.getItemList(1,200,"SELLABLE").pipe(Object(p.a)((function(t){return t})))}},{key:"newItem",value:function(t){var e=this;return this.api.newitem(t).toPromise().then((function(t){return e.loadItemList(),e.toster.success("Item Successfully Created","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from new Item ",t),t}))}},{key:"deleteItem",value:function(t){var e=this;return this.api.deleteItem(t).toPromise().then((function(t){return e.toster.success("Item Successfully Deleted","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from Delete Item",t),t}))}},{key:"getItemDetails",value:function(t){return this.state.isItemDetailsSet||this.loadItemDetails(t),this.state.getEditItem().pipe(Object(p.a)((function(t){return t})))}},{key:"loadItemDetails",value:function(t){var e=this;return this.api.getItemDetailsById(t).toPromise().then((function(t){return e.state.setEditItem(t.item),t})).catch((function(t){throw console.error("api call error from load Item Details",t),t}))}},{key:"updateItem",value:function(t){var e=this;return this.api.updateItem(t).toPromise().then((function(t){return e.loadItemList(),e.toster.success("Item Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from Update item ",t),t}))}},{key:"changeActivationStatus",value:function(t){var e=this;return this.api.updateActivationStatus(t.is_active,t._id).toPromise().then((function(t){return e.toster.success("Unit Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from change activation status Unit",t),t}))}},{key:"getItemTypes",value:function(){return this.state.getItemTypes().pipe(Object(p.a)((function(t){return t})))}},{key:"setItemViewData",value:function(t){this.state.setItemViewData(t)}},{key:"getItemViewData",value:function(){return this.state.getItemViewData().pipe(Object(p.a)((function(t){return t})))}},{key:"updateItemDepoPrice",value:function(t){var e=this;return this.api.updateItemDepoPrice(t).toPromise().then((function(t){return e.toster.success("Item Depo Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from updateItemDepoPrice",t),t}))}}]),t}()).\u0275fac=function(t){return new(t||s)(b.Yb(g),b.Yb(d),b.Yb(v.b))},s.\u0275prov=b.Kb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),U=r("XiUz"),T=r("Wp6s"),C=r("kmnG"),I=r("ofXK");function P(t,e){1&t&&b.Pb(0,"img",7),2&t&&b.qc("src",e.$implicit,b.Fc)}var _,w=((_=function(){function t(e){i(this,t),this.facde=e,this.viewData={},this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[]}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.facde.getItemViewData().subscribe((function(e){t.viewData=e,t.dataSource=t.viewData.all_item_units}))}}]),t}()).\u0275fac=function(t){return new(t||_)(b.Ob(y))},_.\u0275cmp=b.Ib({type:_,selectors:[["app-item-view"]],decls:84,vars:11,consts:[["fxLayout","row wrap",1,"matero-row"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","15","fxFlex.lt-sm","100"],["fxFlex","85","fxFlex.lt-sm","100"],["alt","Item Thumbnail","height","60px","width","80px",3,"src"],["fxFlex","35","fxFlex.lt-sm","100"],["alt","Item Picture","height","60px","width","80px",3,"src",4,"ngFor","ngForOf"],["alt","Item Picture","height","60px","width","80px",3,"src"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"mat-card"),b.Ub(2,"mat-card-title"),b.Pc(3,"Item View"),b.Tb(),b.Ub(4,"div",1),b.Ub(5,"div",2),b.Ub(6,"mat-label"),b.Ub(7,"strong"),b.Pc(8," Thumbnail "),b.Tb(),b.Pc(9,":"),b.Tb(),b.Tb(),b.Ub(10,"div",3),b.Pb(11,"img",4),b.Tb(),b.Ub(12,"div",2),b.Ub(13,"mat-label"),b.Ub(14,"strong"),b.Pc(15," Name "),b.Tb(),b.Tb(),b.Tb(),b.Ub(16,"div",5),b.Ub(17,"mat-label"),b.Pc(18),b.Tb(),b.Tb(),b.Ub(19,"div",2),b.Ub(20,"mat-label"),b.Ub(21,"strong"),b.Pc(22,"Category "),b.Tb(),b.Tb(),b.Tb(),b.Ub(23,"div",5),b.Ub(24,"mat-label"),b.Pc(25),b.Tb(),b.Tb(),b.Ub(26,"div",2),b.Ub(27,"mat-label"),b.Ub(28,"strong"),b.Pc(29," Type "),b.Tb(),b.Tb(),b.Tb(),b.Ub(30,"div",5),b.Ub(31,"mat-label"),b.Pc(32),b.Tb(),b.Tb(),b.Ub(33,"div",2),b.Ub(34,"mat-label"),b.Ub(35,"strong"),b.Pc(36," Qty "),b.Tb(),b.Tb(),b.Tb(),b.Ub(37,"div",5),b.Ub(38,"mat-label"),b.Pc(39),b.Tb(),b.Tb(),b.Ub(40,"div",2),b.Ub(41,"mat-label"),b.Ub(42,"strong"),b.Pc(43," Position "),b.Tb(),b.Tb(),b.Tb(),b.Ub(44,"div",5),b.Ub(45,"mat-label"),b.Pc(46),b.Tb(),b.Tb(),b.Ub(47,"div",2),b.Ub(48,"mat-label"),b.Ub(49,"strong"),b.Pc(50," is Active "),b.Tb(),b.Tb(),b.Tb(),b.Ub(51,"div",5),b.Ub(52,"mat-label"),b.Pc(53),b.Tb(),b.Tb(),b.Ub(54,"div",2),b.Ub(55,"mat-label"),b.Ub(56,"strong"),b.Pc(57," Price "),b.Tb(),b.Tb(),b.Tb(),b.Ub(58,"div",5),b.Ub(59,"mat-label"),b.Pc(60),b.Tb(),b.Tb(),b.Ub(61,"div",2),b.Ub(62,"mat-label"),b.Ub(63,"strong"),b.Pc(64," Availability "),b.Tb(),b.Tb(),b.Tb(),b.Ub(65,"div",5),b.Ub(66,"mat-label"),b.Pc(67),b.Tb(),b.Tb(),b.Ub(68,"div",2),b.Ub(69,"mat-label"),b.Ub(70,"strong"),b.Pc(71," Unit Name"),b.Tb(),b.Tb(),b.Tb(),b.Ub(72,"div",5),b.Ub(73,"mat-label"),b.Pc(74),b.Tb(),b.Tb(),b.Pb(75,"div",2),b.Pb(76,"div",5),b.Ub(77,"div",2),b.Ub(78,"mat-label"),b.Ub(79,"strong"),b.Pc(80," Pictures "),b.Tb(),b.Pc(81,":"),b.Tb(),b.Tb(),b.Ub(82,"div",3),b.Nc(83,P,1,1,"img",6),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t&&(b.Cb(11),b.qc("src",e.viewData.thumbnail,b.Fc),b.Cb(7),b.Rc(": ",e.viewData.name,""),b.Cb(7),b.Rc(": ",e.viewData.category_id?e.viewData.category_id.name:"",""),b.Cb(7),b.Rc(": ",e.itemTypes[e.viewData.type],""),b.Cb(7),b.Rc(": ",e.viewData.item_volume,""),b.Cb(7),b.Rc(": ",e.viewData.position,""),b.Cb(7),b.Rc(": ",e.viewData.is_active?"Yes":"No",""),b.Cb(7),b.Rc(": ",e.viewData.price,""),b.Cb(7),b.Rc(": ",e.viewData.availability_status,""),b.Cb(7),b.Rc(": ",e.viewData.unit_id?e.viewData.unit_id.name:"",""),b.Cb(9),b.pc("ngForOf",e.viewData.picture))},directives:[U.c,T.a,T.c,U.d,U.a,C.g,I.n],styles:[""]}),_),R=r("uEtv"),D=r("WW+1"),N=r("Xibt"),S=r("Dh3D"),F=r("+0xr"),x=r("ey9i"),L=function(t){return t.ADMIN="ADMIN",t.DEPO="DEPO",t.RETAILER="RETAILER",t.PURCHASE_MANAGER="PURCHASE_MANAGER",t.DELIVERY_BOY="DELIVERY_BOY",t.HAWKER="HAWKER",t.CUSTOMER="CUSTOMER",t.MANUFACTURING_PLANT="MANUFACTURING_PLANT",t.SUPPLIER="SUPPLIER",t}({}),O=r("dKfg"),k=function(t){return t.USER="USER",t.SUPPLIER="SUPPLIER",t.HOCKER="HOCKER",t.DELIVERYBOY="DELIVERYBOY",t.PURCHASEMANAGER="PURCHASEMANAGER",t.DEPO="DEPO",t.MANUFACTUREPLANT="MANUFACTUREPLANT",t}({}),M=r("0IaG"),A=r("bTqV"),E=r("3Pt+"),V=r("QibW");function $(t,e){1&t&&(b.Ub(0,"th",14),b.Pc(1," Price "),b.Tb())}var q=function(){return{standalone:!0}};function G(t,e){if(1&t){var i=b.Vb();b.Ub(0,"td",15),b.Ub(1,"input",16),b.cc("change",(function(){b.Dc(i);var t=e.$implicit;return b.gc().changePrice(t)}))("ngModelChange",(function(t){return b.Dc(i),e.$implicit.price=t})),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit;b.Cb(1),b.pc("ngModelOptions",b.rc(2,q))("ngModel",a.price)}}function j(t,e){1&t&&(b.Ub(0,"th",14),b.Pc(1," Quantity "),b.Tb())}function B(t,e){if(1&t&&(b.Ub(0,"td",17),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.Cb(1),b.Rc(" ",i.item_quantity," ")}}function K(t,e){1&t&&(b.Ub(0,"th",14),b.Pc(1," Unit "),b.Tb())}function H(t,e){if(1&t&&(b.Ub(0,"td",15),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.Cb(1),b.Rc(" ",i.unit_id?i.unit_id.name:""," ")}}function Q(t,e){1&t&&(b.Ub(0,"th",14),b.Pc(1," Is Default "),b.Tb())}function z(t,e){if(1&t){var i=b.Vb();b.Ub(0,"td",15),b.Ub(1,"mat-radio-group",18),b.cc("ngModelChange",(function(t){return b.Dc(i),b.gc().defaultUnitId=t})),b.Ub(2,"mat-radio-button",19),b.cc("change",(function(t){return b.Dc(i),b.gc().radioChange(t)})),b.Pc(3),b.Tb(),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit,n=b.gc();b.Cb(1),b.pc("ngModel",n.defaultUnitId),b.Cb(1),b.pc("value",a._id),b.Cb(1),b.Rc(" ",""," ")}}function Y(t,e){1&t&&b.Pb(0,"tr",20)}function W(t,e){1&t&&b.Pb(0,"tr",21)}var X,J=((X=function(){function t(e,a){i(this,t),this.viewdata=e,this.facade=a,this.isAnyChange=!1,this.searchUserId="",this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[],this.defaultUnitId=""}return n(t,[{key:"ngOnInit",value:function(){this.data=this.viewdata.row,this.searchUserId=this.viewdata.searchUserId;var t=this.data.all_item_units;this.dataSource=this.data.all_item_units||[];var e=t.filter((function(t){return 1==t.is_customer_show}));e&&e.length>0&&(this.defaultUnitId=e[0]._id)}},{key:"changePrice",value:function(){this.updateItemDepo(!1)}},{key:"radioChange",value:function(t){this.updateItemDepo(!0,t.value)}},{key:"updateItemDepo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=Object.assign({},this.data),a=[];this.dataSource.map(t&&1==t?function(t){a.push({_id:t._id,is_customer_show:t._id==e,item_quantity:t.item_quantity,price:t.price,unit_id:t.unit_id?t.unit_id._id:""})}:function(t){a.push({_id:t._id,is_customer_show:t.is_customer_show,item_quantity:t.item_quantity,price:t.price,unit_id:t.unit_id?t.unit_id._id:""})}),this.facade.updateItemDepoPrice({item_id:i._id,position:i.position,is_active:i.is_active,availability_status:i.availability_status,item_units:a,user_id:this.searchUserId}),this.isAnyChange=!0}}]),t}()).\u0275fac=function(t){return new(t||X)(b.Ob(M.a),b.Ob(y))},X.\u0275cmp=b.Ib({type:X,selectors:[["app-item-unit-view"]],decls:22,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography",2,"min-width","30%"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","price"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","qty"],["mat-cell","","style","padding-left: 10px;",4,"matCellDef"],["matColumnDef","unit"],["matColumnDef","is_customer_show"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-header-cell",""],["mat-cell",""],["type","number",2,"max-width","65px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-cell","",2,"padding-left","10px"],[3,"ngModel","ngModelChange"],["name","is_customer_show",3,"value","change"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Ub(0,"h1",0),b.Pc(1,"Item Units"),b.Tb(),b.Ub(2,"mat-dialog-content",1),b.Ub(3,"table",2),b.Sb(4,3),b.Nc(5,$,2,0,"th",4),b.Nc(6,G,2,3,"td",5),b.Rb(),b.Sb(7,6),b.Nc(8,j,2,0,"th",4),b.Nc(9,B,2,1,"td",7),b.Rb(),b.Sb(10,8),b.Nc(11,K,2,0,"th",4),b.Nc(12,H,2,1,"td",5),b.Rb(),b.Sb(13,9),b.Nc(14,Q,2,0,"th",4),b.Nc(15,z,4,3,"td",5),b.Rb(),b.Nc(16,Y,1,0,"tr",10),b.Nc(17,W,1,0,"tr",11),b.Tb(),b.Pb(18,"br"),b.Tb(),b.Ub(19,"mat-dialog-actions",12),b.Ub(20,"button",13),b.Pc(21,"Close"),b.Tb(),b.Tb()),2&t&&(b.Cb(3),b.pc("dataSource",e.dataSource),b.Cb(13),b.pc("matHeaderRowDef",e.displayedColumns),b.Cb(1),b.pc("matRowDefColumns",e.displayedColumns),b.Cb(3),b.pc("mat-dialog-close",e.isAnyChange))},directives:[M.j,M.g,F.o,F.c,F.i,F.b,F.k,F.n,M.d,A.b,M.e,F.h,F.a,E.t,E.d,E.p,E.s,V.b,V.a,F.j,F.m],styles:["table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{min-width:90px}"]}),X),Z=r("tgey"),tt=r("d3UM"),et=r("M9IT"),it=r("FKr1"),at=r("1jcm"),nt=r("zkoq"),rt=r("NFeN");function ct(t,e){if(1&t&&(b.Ub(0,"mat-option",39),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i.type),b.Cb(1),b.Qc(i.name)}}function ot(t,e){if(1&t){var i=b.Vb();b.Ub(0,"mat-form-field",37),b.Ub(1,"mat-label"),b.Pc(2,"User Role"),b.Tb(),b.Ub(3,"mat-select",38),b.cc("selectionChange",(function(){return b.Dc(i),b.gc().filterRoleChanged()}))("ngModelChange",(function(t){return b.Dc(i),b.gc().searchRoleName=t})),b.Nc(4,ct,2,2,"mat-option",8),b.Tb(),b.Tb()}if(2&t){var a=b.gc();b.Cb(3),b.pc("ngModel",a.searchRoleName),b.Cb(1),b.pc("ngForOf",a.filterRoleList)}}function st(t,e){if(1&t&&(b.Ub(0,"mat-option",39),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i._id),b.Cb(1),b.Qc(i.first_name)}}function lt(t,e){if(1&t){var i=b.Vb();b.Ub(0,"mat-form-field",37),b.Ub(1,"mat-label"),b.Pc(2,"User"),b.Tb(),b.Ub(3,"mat-select",40),b.cc("ngModelChange",(function(t){return b.Dc(i),b.gc().searchUserId=t})),b.Nc(4,st,2,2,"mat-option",8),b.Tb(),b.Tb()}if(2&t){var a=b.gc();b.Cb(3),b.pc("ngModel",a.searchUserId),b.Cb(1),b.pc("ngForOf",a.filterUserList)}}function ut(t,e){if(1&t&&(b.Ub(0,"mat-option",39),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i.value),b.Cb(1),b.Qc(i.name)}}function mt(t,e){if(1&t&&(b.Ub(0,"mat-option",39),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i._id),b.Cb(1),b.Qc(i.name)}}function bt(t,e){if(1&t&&(b.Ub(0,"mat-option",39),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i.value),b.Cb(1),b.Qc(i.name)}}function dt(t,e){1&t&&(b.Ub(0,"th",41),b.Pc(1,"Position"),b.Tb())}var pt=function(){return{standalone:!0}};function ft(t,e){if(1&t){var i=b.Vb();b.Ub(0,"td",42),b.Ub(1,"input",43),b.cc("change",(function(){b.Dc(i);var t=e.$implicit;return b.gc().changePosition(t)}))("ngModelChange",(function(t){return b.Dc(i),e.$implicit.position=t})),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit;b.Cb(1),b.pc("ngModelOptions",b.rc(2,pt))("ngModel",a.position)}}function ht(t,e){1&t&&(b.Ub(0,"th",41),b.Pc(1,"Name"),b.Tb())}function gt(t,e){if(1&t&&(b.Ub(0,"td",44),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.Cb(1),b.Rc(" ",i.name," ")}}function vt(t,e){1&t&&(b.Ub(0,"th",41),b.Pc(1,"Second Name"),b.Tb())}function yt(t,e){if(1&t&&(b.Ub(0,"td",42),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.Cb(1),b.Qc(i.secondary_name)}}function Ut(t,e){1&t&&(b.Ub(0,"th",41),b.Pc(1,"Category"),b.Tb())}function Tt(t,e){if(1&t&&(b.Ub(0,"td",42),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.Cb(1),b.Rc(" ",i.category_id?i.category_id.name:""," ")}}function Ct(t,e){1&t&&(b.Ub(0,"th",45),b.Pc(1,"Image"),b.Tb())}function It(t,e){if(1&t&&(b.Ub(0,"td",42),b.Pb(1,"img",46),b.Tb()),2&t){var i=e.$implicit;b.Cb(1),b.qc("src",i.thumbnail,b.Fc)}}function Pt(t,e){1&t&&(b.Ub(0,"th",41),b.Pc(1,"Type"),b.Tb())}function _t(t,e){if(1&t&&(b.Ub(0,"td",42),b.Pc(1),b.Tb()),2&t){var i=e.$implicit,a=b.gc();b.Cb(1),b.Rc(" ",a.itemTypes[i.type]," ")}}function wt(t,e){1&t&&(b.Ub(0,"th",45),b.Pc(1,"Price"),b.Tb())}function Rt(t,e){if(1&t&&(b.Ub(0,"td",42),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.Cb(1),b.Rc(" ",i.price," ")}}function Dt(t,e){1&t&&(b.Ub(0,"th",45),b.Pc(1,"Price"),b.Tb())}function Nt(t,e){if(1&t){var i=b.Vb();b.Ub(0,"td",42),b.Ub(1,"input",47),b.cc("change",(function(){b.Dc(i);var t=e.$implicit;return b.gc().changePosition(t)}))("ngModelChange",(function(t){return b.Dc(i),e.$implicit.user_price=t})),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit;b.Cb(1),b.pc("ngModelOptions",b.rc(2,pt))("ngModel",a.user_price)}}function St(t,e){1&t&&(b.Ub(0,"th",45),b.Pc(1,"Quantity"),b.Tb())}function Ft(t,e){if(1&t&&(b.Ub(0,"td",42),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.Cb(1),b.Qc(i.item_quantity)}}function xt(t,e){1&t&&(b.Ub(0,"th",45),b.Pc(1,"Unit"),b.Tb())}var Lt=function(){return[]};function Ot(t,e){if(1&t){var i=b.Vb();b.Ub(0,"td",42),b.Pc(1),b.Ub(2,"a",48),b.cc("click",(function(){b.Dc(i);var t=e.$implicit;return b.gc().viewItemUnit(t)})),b.Pc(3),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit;b.Cb(1),b.Rc(" ",a.unit_id?a.unit_id.name:"",""),b.Cb(1),b.pc("routerLink",b.rc(3,Lt)),b.Cb(1),b.Rc("( ",a.all_item_units&&a.all_item_units.length>0?a.all_item_units.length:""," )")}}function kt(t,e){1&t&&(b.Ub(0,"th",45),b.Pc(1,"Availability Status"),b.Tb())}function Mt(t,e){if(1&t&&(b.Ub(0,"mat-option",39),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i.value),b.Cb(1),b.Qc(i.name)}}function At(t,e){if(1&t){var i=b.Vb();b.Ub(0,"td",42),b.Ub(1,"mat-select",49),b.cc("selectionChange",(function(){b.Dc(i);var t=e.$implicit;return b.gc().updateItemDepoPrice(t)}))("ngModelChange",(function(t){return b.Dc(i),e.$implicit.availability_status=t})),b.Nc(2,Mt,2,2,"mat-option",8),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit,n=b.gc();b.Cb(1),b.pc("ngModelOptions",b.rc(3,pt))("ngModel",a.availability_status),b.Cb(1),b.pc("ngForOf",n.availabilityList)}}function Et(t,e){1&t&&(b.Ub(0,"th",41),b.Pc(1,"Active"),b.Tb())}function Vt(t,e){if(1&t){var i=b.Vb();b.Ub(0,"td",42),b.Ub(1,"mat-slide-toggle",50),b.cc("ngModelChange",(function(t){return b.Dc(i),e.$implicit.is_active=t}))("change",(function(){b.Dc(i);var t=e.$implicit;return b.gc().changeActivationStatus(t)})),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit;b.Cb(1),b.pc("ngModel",a.is_active)}}function $t(t,e){1&t&&(b.Ub(0,"th",41),b.Pc(1,"Controls"),b.Tb())}function qt(t,e){if(1&t){var i=b.Vb();b.Ub(0,"mat-grid-tile"),b.Ub(1,"button",55),b.cc("click",(function(){b.Dc(i);var t=b.gc().$implicit;return b.gc().openItemViewDialog(t)})),b.Ub(2,"mat-icon",56),b.Pc(3,"visibility"),b.Tb(),b.Tb(),b.Tb()}}function Gt(t,e){if(1&t){var i=b.Vb();b.Ub(0,"mat-grid-tile"),b.Ub(1,"button",57),b.cc("click",(function(){b.Dc(i);var t=b.gc().$implicit;return b.gc().navigateToEdit(t._id)})),b.Ub(2,"mat-icon",56),b.Pc(3,"create"),b.Tb(),b.Tb(),b.Tb()}2&t&&(b.Cb(1),b.pc("routerLink",b.rc(1,Lt)))}function jt(t,e){if(1&t){var i=b.Vb();b.Ub(0,"td",42),b.Ub(1,"mat-grid-list",51),b.Nc(2,qt,4,0,"mat-grid-tile",52),b.Nc(3,Gt,4,2,"mat-grid-tile",52),b.Ub(4,"mat-grid-tile"),b.Ub(5,"button",53),b.cc("click",(function(){b.Dc(i);var t=e.$implicit;return b.gc().deleteIcon(t._id)})),b.Ub(6,"mat-icon",54),b.Pc(7,"delete"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&t){var a=b.gc();b.Cb(2),b.pc("ngIf",!a.isDepoView),b.Cb(1),b.pc("ngIf",!a.isDepoView)}}function Bt(t,e){1&t&&b.Pb(0,"tr",58)}function Kt(t,e){1&t&&b.Pb(0,"tr",59)}var Ht,Qt=function(){return[5,10,25]},zt=((Ht=function(){function t(e,a,n,r,c,o,s,l){i(this,t),this.router=e,this.settingService=a,this.usersFacade=n,this.categoryFacade=r,this.facade=c,this.sidebarNoticeService=o,this.itemUnitViewDialog=s,this.confirmService=l,this.displayedColumns=[],this.itemTypeList=[],this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.filterUserList=[],this.filterCategoryList=[],this.filterRoleList=[],this.searchRoleName="",this.searchItemType="",this.searchUserId="",this.filterCategoryId="",this.isDepoUserSearched=!1,this.availabilityStatus=null,this.availabilityList=[{name:"Available",value:"TRUE"},{name:"Notify",value:"NOTIFY"}],this.currentRole=this.settingService.user.role_id.type||"User",this.pageDetails={currentPage:1,itemsPerPage:10,totalPages:3,totalRecords:200},this.totalBanner=0}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.filterItem(),this.facade.getItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus,this.searchRoleName,this.searchUserId,this.filterCategoryId).subscribe((function(e){t.dataSource=new F.p(e.data),t.dataSource.sort=t.sort,t.pageDetails.totalRecords=e.totalCount})),this.facade.getItemTypes().subscribe((function(e){t.itemTypeList=e})),this.usersFacade.getUsersByType(1,2e3).subscribe((function(e){t.filterUserList=e.userList})),this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe((function(e){t.filterCategoryList=e})),this.usersFacade.getRoleList().subscribe((function(e){t.filterRoleList=e.data.filter((function(t){return"ADMIN"!=t.type&&"CUSTOMER"!=t.type&&"DELIVERY_BOY"!=t.type}))}))}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"pageEvent",value:function(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex+1,this.filterItem()}},{key:"deleteIcon",value:function(t){var e=this;this.confirmService.confirm("Are you sure want to delete this Item?","Confirm").subscribe((function(i){1==i&&e.facade.deleteItem(t).then((function(t){return e.filterItem()}))}))}},{key:"navigateToEdit",value:function(t){var e=this;this.facade.loadItemDetails(t).then((function(i){e.router.navigate(["items","edit",t])}))}},{key:"filterItem",value:function(){this.facade.loadItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus,this.searchRoleName,this.searchUserId,this.filterCategoryId),this.searchRoleName==k.DEPO&&this.searchUserId&&""!=this.searchUserId?(this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","unit_id"],this.isDepoUserSearched=!0):(this.setRoleBasedColumn(),this.isDepoUserSearched=!1)}},{key:"resetFilter",value:function(){this.searchItemType="",this.availabilityStatus=null,this.searchRoleName="",this.searchUserId="",this.filterCategoryId="",this.filterUserList=[]}},{key:"changeActivationStatus",value:function(t){var e=this,i=Object.assign({},t);this.isDepoView?this.updateItemDepoPrice(t):this.facade.changeActivationStatus(i).then((function(t){e.filterItem()}))}},{key:"changePosition",value:function(t){var e=Object.assign({},t),i=[];e.subCategory_ids.map((function(t){i.push(t._id)})),e.item_type=e.type,e.category_id=e.category_id._id,e.subCategory_ids=i,this.isDepoView?this.updateItemDepoPrice(e):this.facade.updateItem(e)}},{key:"filterRoleChanged",value:function(){""!=this.searchRoleName.trim()?this.usersFacade.loadUsers(1,200,"",this.searchRoleName):this.filterUserList=[]}},{key:"setRoleBasedColumn",value:function(){switch(this.currentRole){case L.ADMIN:this.displayedColumns=["thumbnail","position","name","price","type","is_active","category","controls"];break;case L.DEPO:this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","unit_id"];break;case L.HAWKER:this.displayedColumns=["thumbnail","position","name","category","item_volume","price","controls"];break;default:this.displayedColumns=["thumbnail","position","name","category"]}}},{key:"openItemViewDialog",value:function(t){this.sidebarNoticeService.setComponent(w),this.sidebarNoticeService.setIsOpened(!0),this.facade.setItemViewData(t)}},{key:"updateItemDepoPrice",value:function(t){var e=this,i=Object.assign({},t);i.all_item_units.map((function(t){t.unit_id=t.unit_id?t.unit_id._id:""}));var a={item_id:t._id,user_id:this.searchUserId,position:t.position,is_active:t.is_active,availability_status:i.availability_status,item_units:i.all_item_units};a.item_units.map((function(t){1==t.is_customer_show&&(t.price=i.user_price)})),this.facade.updateItemDepoPrice(a).then((function(t){e.filterItem()}))}},{key:"viewItemUnit",value:function(t){var e=this;this.itemUnitViewDialog.open(J,{data:{row:t,searchUserId:this.searchUserId}}).afterClosed().subscribe((function(t){t&&e.filterItem()}))}},{key:"isDepoView",get:function(){return!(!this.isDepoUserSearched&&this.currentRole!=L.DEPO)}},{key:"isDepoRole",get:function(){return this.currentRole==L.DEPO}}]),t}()).\u0275fac=function(t){return new(t||Ht)(b.Ob(u.f),b.Ob(x.d),b.Ob(D.a),b.Ob(R.a),b.Ob(y),b.Ob(O.a),b.Ob(M.c),b.Ob(N.a))},Ht.\u0275cmp=b.Ib({type:Ht,selectors:[["app-items-components-item-list"]],viewQuery:function(t,e){var i;1&t&&b.Sc(S.a,!0),2&t&&b.yc(i=b.dc())&&(e.sort=i.first)},decls:80,vars:15,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[1,"form-field-full"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100","class","matero-col",4,"ngIf"],["fxFlex","33","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Item Type","name","filterType",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Category","name","filterType",3,"ngModel","ngModelChange"],["fxFlex","34","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Type","name","filterCategoryId",3,"ngModel","ngModelChange"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","style","max-width: 100px",4,"matCellDef"],["matColumnDef","secondary_name"],["matColumnDef","category"],["matColumnDef","thumbnail"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","price"],["matColumnDef","price_edit"],["matColumnDef","item_volume"],["matColumnDef","unit_id"],["matColumnDef","availability_status"],["matColumnDef","is_active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["fxFlex","50","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","User Role","name","searchRoleName",3,"ngModel","selectionChange","ngModelChange"],[3,"value"],["placeholder","User","name","searchUserId",3,"ngModel","ngModelChange"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number",2,"max-width","50px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-cell","",2,"max-width","100px"],["mat-header-cell",""],["alt","Item Image","width","100px","height","50px",1,"itemimg",3,"src"],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],[3,"routerLink","click"],["placeholder","Type","name","availability_status",3,"ngModelOptions","ngModel","selectionChange","ngModelChange"],["color","primary",3,"ngModel","ngModelChange","change"],["cols","3","rowHeight","50px"],[4,"ngIf"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-icon-button","","aria-label","View",3,"click"],["color","primary"],["mat-icon-button","","aria-label","Edit",3,"routerLink","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Pb(0,"page-header"),b.Ub(1,"section"),b.Ub(2,"a",0),b.Pc(3," Add New "),b.Tb(),b.Tb(),b.Pb(4,"br"),b.Ub(5,"div",1),b.Ub(6,"div",2),b.Ub(7,"mat-card"),b.Ub(8,"mat-card-title"),b.Pc(9,"Filter"),b.Tb(),b.Ub(10,"form",3),b.Ub(11,"div",4),b.Nc(12,ot,5,2,"mat-form-field",5),b.Nc(13,lt,5,2,"mat-form-field",5),b.Ub(14,"mat-form-field",6),b.Ub(15,"mat-label"),b.Pc(16,"Item Type"),b.Tb(),b.Ub(17,"mat-select",7),b.cc("ngModelChange",(function(t){return e.searchItemType=t})),b.Nc(18,ut,2,2,"mat-option",8),b.Tb(),b.Tb(),b.Ub(19,"mat-form-field",6),b.Ub(20,"mat-label"),b.Pc(21,"Category"),b.Tb(),b.Ub(22,"mat-select",9),b.cc("ngModelChange",(function(t){return e.filterCategoryId=t})),b.Nc(23,mt,2,2,"mat-option",8),b.Tb(),b.Tb(),b.Ub(24,"mat-form-field",10),b.Ub(25,"mat-label"),b.Pc(26,"Availability"),b.Tb(),b.Ub(27,"mat-select",11),b.cc("ngModelChange",(function(t){return e.availabilityStatus=t})),b.Nc(28,bt,2,2,"mat-option",8),b.Tb(),b.Tb(),b.Ub(29,"div",12),b.Ub(30,"button",13),b.cc("click",(function(){return e.filterItem()})),b.Pc(31," Search "),b.Tb(),b.Ub(32,"button",14),b.cc("click",(function(){return e.resetFilter()})),b.Pc(33,"Reset"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(34,"div",15),b.Ub(35,"table",16),b.Sb(36,17),b.Ub(37,"form"),b.Nc(38,dt,2,0,"th",18),b.Nc(39,ft,2,3,"td",19),b.Tb(),b.Rb(),b.Sb(40,20),b.Nc(41,ht,2,0,"th",18),b.Nc(42,gt,2,1,"td",21),b.Rb(),b.Sb(43,22),b.Nc(44,vt,2,0,"th",18),b.Nc(45,yt,2,1,"td",19),b.Rb(),b.Sb(46,23),b.Nc(47,Ut,2,0,"th",18),b.Nc(48,Tt,2,1,"td",19),b.Rb(),b.Sb(49,24),b.Nc(50,Ct,2,0,"th",25),b.Nc(51,It,2,1,"td",19),b.Rb(),b.Sb(52,26),b.Nc(53,Pt,2,0,"th",18),b.Nc(54,_t,2,1,"td",19),b.Rb(),b.Sb(55,27),b.Nc(56,wt,2,0,"th",25),b.Nc(57,Rt,2,1,"td",19),b.Rb(),b.Sb(58,28),b.Nc(59,Dt,2,0,"th",25),b.Nc(60,Nt,2,3,"td",19),b.Rb(),b.Sb(61,29),b.Nc(62,St,2,0,"th",25),b.Nc(63,Ft,2,1,"td",19),b.Rb(),b.Sb(64,30),b.Nc(65,xt,2,0,"th",25),b.Nc(66,Ot,4,4,"td",19),b.Rb(),b.Sb(67,31),b.Nc(68,kt,2,0,"th",25),b.Ub(69,"form"),b.Nc(70,At,3,4,"td",19),b.Tb(),b.Rb(),b.Sb(71,32),b.Nc(72,Et,2,0,"th",18),b.Nc(73,Vt,2,1,"td",19),b.Rb(),b.Sb(74,33),b.Nc(75,$t,2,0,"th",18),b.Nc(76,jt,8,2,"td",19),b.Rb(),b.Nc(77,Bt,1,0,"tr",34),b.Nc(78,Kt,1,0,"tr",35),b.Tb(),b.Ub(79,"mat-paginator",36),b.cc("page",(function(t){return e.pageEvent(t)})),b.Tb(),b.Tb()),2&t&&(b.Cb(12),b.pc("ngIf",!e.isDepoRole),b.Cb(1),b.pc("ngIf",!e.isDepoRole),b.Cb(4),b.pc("ngModel",e.searchItemType),b.Cb(1),b.pc("ngForOf",e.itemTypeList),b.Cb(4),b.pc("ngModel",e.filterCategoryId),b.Cb(1),b.pc("ngForOf",e.filterCategoryList),b.Cb(4),b.pc("ngModel",e.availabilityStatus),b.Cb(1),b.pc("ngForOf",e.availabilityList),b.Cb(7),b.pc("dataSource",e.dataSource),b.Cb(42),b.pc("matHeaderRowDef",e.displayedColumns),b.Cb(1),b.pc("matRowDefColumns",e.displayedColumns),b.Cb(1),b.pc("length",e.pageDetails.totalRecords)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",b.rc(14,Qt)))},directives:[Z.a,A.a,u.i,U.c,U.a,T.a,T.c,E.x,E.q,E.r,U.d,I.o,C.c,C.g,tt.a,E.p,E.s,I.n,A.b,F.o,S.a,F.c,F.i,F.b,F.k,F.n,et.a,it.p,F.h,S.b,F.a,E.t,E.d,at.a,nt.a,nt.c,rt.a,u.g,F.j,F.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}.itemimg[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;border-radius:5px;transform-origin:0 0;transition:transform .25s,visibility .25s ease-in}.itemimg[_ngcontent-%COMP%]:hover{transform:scale(2)}"]}),Ht),Yt=r("FtGj"),Wt=r("rGne"),Xt=r("qFsG"),Jt=r("A5z7"),Zt=r("sYmb");function te(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function ee(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function ie(t,e){if(1&t&&(b.Ub(0,"mat-option",31),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i._id),b.Cb(1),b.Qc(i.name)}}function ae(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function ne(t,e){if(1&t&&(b.Ub(0,"mat-option",31),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i._id),b.Cb(1),b.Qc(i.name)}}function re(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function ce(t,e){if(1&t&&(b.Ub(0,"mat-option",31),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i.value),b.Cb(1),b.Qc(i.name)}}function oe(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function se(t,e){if(1&t&&(b.Ub(0,"mat-option",31),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i._id),b.Cb(1),b.Qc(i.name)}}function le(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function ue(t,e){if(1&t&&(b.Ub(0,"mat-option",31),b.Pc(1),b.Tb()),2&t){var i=e.$implicit;b.pc("value",i._id),b.Cb(1),b.Qc(i.name)}}function me(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function be(t,e){if(1&t){var i=b.Vb();b.Ub(0,"mat-chip",32),b.cc("removed",(function(){b.Dc(i);var t=e.$implicit;return b.gc().removetag(t)})),b.Pc(1),b.Ub(2,"mat-icon",33),b.Pc(3,"cancel"),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit;b.Cb(1),b.Rc(" ",a," ")}}function de(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function pe(t,e){if(1&t){var i=b.Vb();b.Ub(0,"mat-chip",32),b.cc("removed",(function(){b.Dc(i);var t=e.$implicit;return b.gc().removepic(t)})),b.Pc(1),b.Ub(2,"mat-icon",33),b.Pc(3,"cancel"),b.Tb(),b.Tb()}if(2&t){var a=e.$implicit;b.Cb(1),b.Rc(" ",a," ")}}function fe(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function he(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}function ge(t,e){1&t&&(b.Ub(0,"mat-error"),b.Pc(1),b.hc(2,"translate"),b.Tb()),2&t&&(b.Cb(1),b.Rc(" ",b.ic(2,1,"validations.required")," "))}var ve,ye,Ue,Te=function(){return["home","items","new"]},Ce=function(){return["/items"]},Ie=((ve=function(){function e(t,a,n,r,c,o){var s=this;i(this,e),this.fb=t,this.router=a,this.activeRoute=n,this.facade=r,this.unitFacde=c,this.categoryFacade=o,this.recommendedList=[],this.isEditMode=!1,this.activeEditId="",this.separatorKeysCodes=[Yt.g,Yt.c],this.cateTagValues=[],this.subCateTagValues=[],this.itemForm=this.fb.group({name:["",[E.w.required,E.w.maxLength(50)]],price:[0,[E.w.required,E.w.pattern("[1-9]{1}[0-9]*")]],is_active:[!0],category_id:[""],unit_id:[""],item_type:[""],description:[""],benefits:[""],category_tags:[[]],thumbnail:[""],picture:[[]],recommended_items:[[]],subCategory_ids:[[]]}),this.activeRoute.params.subscribe((function(t){null!=t.id&&null!=t.id&&""!=t.id&&(s.isEditMode=!0,s.activeEditId=t.id)}))}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.categoryFacade.loadParentCategories(),this.unitFacde.loadUnites(1,500),this.categoryFacade.getParentCategories().subscribe((function(e){t.categoryList=e})),this.categoryFacade.getCategoriesByParentId().subscribe((function(e){t.subCategoryList=e.data})),this.unitFacde.getUnites().subscribe((function(e){t.unitList=e.data})),this.facade.getItemTypes().subscribe((function(e){t.itemTypeList=e})),this.facade.getSallableItemList().subscribe((function(e){t.recommendedList=e.data})),this.isEditMode&&this.facade.getItemDetails(this.activeEditId).subscribe((function(e){var i=Object.assign({},e);t.itemForm.patchValue(e),t.itemForm.patchValue({item_type:i.type})}),(function(t){return console.error(t)}))}},{key:"onFormSubmit",value:function(t){var e=this;if(console.log("form value ",this.itemForm.value,this.itemForm.valid),this.itemForm.valid)if(this.isEditMode){var i=this.itemForm.value;i._id=this.activeEditId,this.facade.updateItem(i).then((function(t){e.itemForm.reset(),e.router.navigate(["items"])}))}else this.facade.newItem(this.itemForm.value).then((function(t){e.itemForm.reset(),e.router.navigate(["items"])}))}},{key:"addtag",value:function(e){var i=e.input,a=e.value,n=t(this.itemForm.get("category_tags").value);(a||"").trim()&&(n.push(a.trim()),this.itemForm.get("category_tags").setValue(n)),i&&(i.value="")}},{key:"removetag",value:function(e){var i=t(this.itemForm.get("category_tags").value),a=i.indexOf(e);a>=0&&(i.splice(a,1),this.itemForm.get("category_tags").setValue(i))}},{key:"addpic",value:function(e){var i=e.input,a=e.value,n=t(this.itemForm.get("picture").value);(a||"").trim()&&(n.push(a.trim()),this.itemForm.get("picture").setValue(n)),i&&(i.value="")}},{key:"removepic",value:function(e){var i=t(this.itemForm.get("picture").value),a=i.indexOf(e);a>=0&&(i.splice(a,1),this.itemForm.get("picture").setValue(i))}},{key:"onCategorySelectionChange",value:function(){var e,i=this;this.cateTagValues=[];var a=this.itemForm.get("category_id").value;this.categoryList.filter((function(t){a==t._id&&i.cateTagValues.push(t.name)})),this.itemForm.patchValue({category_tags:(e=[]).concat.apply(e,t(this.cateTagValues))}),this.itemForm.get("subCategory_ids").setValue([]),this.loadSubCategories(a)}},{key:"onSubCategorySelectionChange",value:function(){var e,i=this;this.subCateTagValues=[];var a=this.itemForm.get("subCategory_ids").value;this.subCategoryList.filter((function(t){a.indexOf(t._id)>=0&&i.subCateTagValues.push(t.name)})),this.itemForm.patchValue({category_tags:(e=[]).concat.apply(e,t(this.cateTagValues).concat([this.subCateTagValues]))})}},{key:"loadSubCategories",value:function(t){this.categoryFacade.loadCategories(1,200,t,"")}},{key:"is_active_value",get:function(){return!!this.itemForm.get("is_active").value&&this.itemForm.get("is_active").value}}]),e}()).\u0275fac=function(t){return new(t||ve)(b.Ob(E.f),b.Ob(u.f),b.Ob(u.a),b.Ob(y),b.Ob(Wt.a),b.Ob(R.a))},ve.\u0275cmp=b.Ib({type:ve,selectors:[["app-items-components-item-add"]],decls:97,vars:32,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","40","fxFlex.lt-sm","100"],["matInput","","placeholder","Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Price","formControlName","price","required","","type","text"],["fxFlex","20","fxFlex.lt-sm","100"],["formControlName","is_active","color","primary",2,"margin-top","20px"],["fxFlex","25","fxFlex.lt-sm","100"],["formControlName","category_id","placeholder","Category","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subCategory_ids","placeholder","Sub Category","required","","multiple","",3,"selectionChange"],["formControlName","item_type","placeholder","Type","required",""],["formControlName","unit_id","placeholder","Unit","required",""],["fxFlex","50","fxFlex.lt-sm","100"],["formControlName","recommended_items","placeholder","Recommendation","multiple",""],["matInput","","placeholder","Thumbnail","formControlName","thumbnail","required",""],["aria-label","Tags"],["chipList",""],["selectable","true","removable","true",3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-label","Pictures"],["picList",""],["placeholder","Pictures",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","placeholder","Description","formControlName","description",2,"resize","none"],["matInput","","placeholder","Benefits","formControlName","benefits",2,"resize","none"],["mat-raised-button","","color","primary","type","submit",1,"m-t-8",2,"margin-right","5px"],["mat-raised-button","","type","button",1,"m-t-8",3,"routerLink"],[3,"value"],["selectable","true","removable","true",3,"removed"],["matChipRemove",""]],template:function(t,e){if(1&t&&(b.Pb(0,"page-header",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Ub(3,"mat-card"),b.Ub(4,"mat-card-title"),b.Pc(5),b.Tb(),b.Ub(6,"form",3),b.cc("submit",(function(t){return e.onFormSubmit(t)})),b.Ub(7,"div",4),b.Ub(8,"div",5),b.Ub(9,"mat-form-field"),b.Ub(10,"mat-label"),b.Pc(11,"Name"),b.Tb(),b.Pb(12,"input",6),b.Nc(13,te,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(14,"div",5),b.Ub(15,"mat-form-field"),b.Ub(16,"mat-label"),b.Pc(17,"Price"),b.Tb(),b.Pb(18,"input",8),b.Nc(19,ee,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(20,"div",9),b.Ub(21,"mat-slide-toggle",10),b.Pc(22),b.Tb(),b.Tb(),b.Ub(23,"div",11),b.Ub(24,"mat-form-field"),b.Ub(25,"mat-label"),b.Pc(26,"Category"),b.Tb(),b.Ub(27,"mat-select",12),b.cc("selectionChange",(function(){return e.onCategorySelectionChange()})),b.Nc(28,ie,2,2,"mat-option",13),b.Tb(),b.Nc(29,ae,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(30,"div",11),b.Ub(31,"mat-form-field"),b.Ub(32,"mat-label"),b.Pc(33,"Sub Category"),b.Tb(),b.Ub(34,"mat-select",14),b.cc("selectionChange",(function(){return e.onSubCategorySelectionChange()})),b.Nc(35,ne,2,2,"mat-option",13),b.Tb(),b.Nc(36,re,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(37,"div",11),b.Ub(38,"mat-form-field"),b.Ub(39,"mat-label"),b.Pc(40,"Type"),b.Tb(),b.Ub(41,"mat-select",15),b.Nc(42,ce,2,2,"mat-option",13),b.Tb(),b.Nc(43,oe,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(44,"div",11),b.Ub(45,"mat-form-field"),b.Ub(46,"mat-label"),b.Pc(47,"Unit"),b.Tb(),b.Ub(48,"mat-select",16),b.Nc(49,se,2,2,"mat-option",13),b.Tb(),b.Nc(50,le,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(51,"div",17),b.Ub(52,"mat-form-field"),b.Ub(53,"mat-label"),b.Pc(54,"Recommendation"),b.Tb(),b.Ub(55,"mat-select",18),b.Nc(56,ue,2,2,"mat-option",13),b.Tb(),b.Tb(),b.Tb(),b.Ub(57,"div",17),b.Ub(58,"mat-form-field"),b.Ub(59,"mat-label"),b.Pc(60,"Thumbnail"),b.Tb(),b.Pb(61,"input",19),b.Nc(62,me,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(63,"div",17),b.Ub(64,"mat-form-field"),b.Ub(65,"mat-label"),b.Pc(66,"Tags"),b.Tb(),b.Ub(67,"mat-chip-list",20,21),b.Nc(69,be,4,1,"mat-chip",22),b.Ub(70,"input",23),b.cc("matChipInputTokenEnd",(function(t){return e.addtag(t)})),b.Tb(),b.Tb(),b.Nc(71,de,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(72,"div",17),b.Ub(73,"mat-form-field"),b.Ub(74,"mat-label"),b.Pc(75,"Pictures"),b.Tb(),b.Ub(76,"mat-chip-list",24,25),b.Nc(78,pe,4,1,"mat-chip",22),b.Ub(79,"input",26),b.cc("matChipInputTokenEnd",(function(t){return e.addpic(t)})),b.Tb(),b.Tb(),b.Nc(80,fe,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(81,"div",17),b.Ub(82,"mat-form-field"),b.Ub(83,"mat-label"),b.Pc(84,"Description"),b.Tb(),b.Pb(85,"textarea",27),b.Nc(86,he,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Ub(87,"div",17),b.Ub(88,"mat-form-field"),b.Ub(89,"mat-label"),b.Pc(90,"Benefits"),b.Tb(),b.Pb(91,"textarea",28),b.Nc(92,ge,3,3,"mat-error",7),b.Tb(),b.Tb(),b.Tb(),b.Ub(93,"button",29),b.Pc(94," Save "),b.Tb(),b.Ub(95,"button",30),b.Pc(96," Back "),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t){var i=b.zc(68),a=b.zc(77);b.qc("title",e.isEditMode?"Edit Item":"New Item"),b.pc("nav",b.rc(30,Te)),b.Cb(5),b.Rc("",e.isEditMode?"Edit Item":"New Item"," "),b.Cb(1),b.pc("formGroup",e.itemForm),b.Cb(7),b.pc("ngIf",e.itemForm.get("name").invalid),b.Cb(6),b.pc("ngIf",e.itemForm.get("price").invalid),b.Cb(3),b.Rc(" ",e.is_active_value?"Active":"Inactive"," "),b.Cb(6),b.pc("ngForOf",e.categoryList),b.Cb(1),b.pc("ngIf",e.itemForm.get("category_id").invalid),b.Cb(6),b.pc("ngForOf",e.subCategoryList),b.Cb(1),b.pc("ngIf",e.itemForm.get("subCategory_ids").invalid),b.Cb(6),b.pc("ngForOf",e.itemTypeList),b.Cb(1),b.pc("ngIf",e.itemForm.get("item_type").invalid),b.Cb(6),b.pc("ngForOf",e.unitList),b.Cb(1),b.pc("ngIf",e.itemForm.get("unit_id").invalid),b.Cb(6),b.pc("ngForOf",e.recommendedList),b.Cb(6),b.pc("ngIf",e.itemForm.get("thumbnail").invalid),b.Cb(7),b.pc("ngForOf",e.itemForm.get("category_tags").value),b.Cb(1),b.pc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),b.Cb(1),b.pc("ngIf",e.itemForm.get("category_tags").invalid),b.Cb(7),b.pc("ngForOf",e.itemForm.get("picture").value),b.Cb(1),b.pc("matChipInputFor",a)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),b.Cb(1),b.pc("ngIf",e.itemForm.get("picture").invalid),b.Cb(6),b.pc("ngIf",e.itemForm.get("description").invalid),b.Cb(6),b.pc("ngIf",e.itemForm.get("benefits").invalid),b.Cb(3),b.pc("routerLink",b.rc(31,Ce))}},directives:[Z.a,U.c,U.a,T.a,T.c,E.x,E.q,E.k,U.d,C.c,C.g,Xt.b,E.d,E.p,E.i,E.v,I.o,at.a,tt.a,I.n,Jt.c,Jt.b,A.b,u.g,C.b,it.p,Jt.a,rt.a,Jt.d],pipes:[Zt.d],styles:[""]}),ve),Pe=[{path:"",component:zt},{path:"new",component:Ie},{path:"edit/:id",component:Ie}],_e=((Ue=function t(){i(this,t)}).\u0275mod=b.Mb({type:Ue}),Ue.\u0275inj=b.Lb({factory:function(t){return new(t||Ue)},imports:[[u.j.forChild(Pe)],u.j]}),Ue),we=((ye=function t(){i(this,t)}).\u0275mod=b.Mb({type:ye}),ye.\u0275inj=b.Lb({factory:function(t){return new(t||ye)},imports:[[l.a,_e]]}),ye)}}])}();