(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{tYg7:function(t,e,i){"use strict";i.r(e),i.d(e,"OffersModule",(function(){return ot}));var c=i("PCNd"),a=i("tyNb"),r=i("Xibt"),o=i("Dh3D"),n=i("+0xr"),s=i("vkgz"),f=i("2Vo4"),l=i("fXoL");let b=(()=>{class t{constructor(){this.offers=new f.a({}),this.isOffersSet=!1}getOfferList(){return this.offers.asObservable()}setOfferList(t){this.isOffersSet=!0,this.offers.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=i("AytR"),p=i("tk/3");let d=(()=>{class t{constructor(t){this.http=t,this.baseUrl=u.a.SERVER_ORIGIN}loadOfferList(t=0,e=0,i=""){let c=this.baseUrl+"/api/offers/list?";return t&&0!=t&&(c+="&currentPage="+t),e&&0!=e&&(c+="&pageSize="+e),i&&""!=i.trim()&&(c+="&offer_type="+i),c=c.replace("?&","?"),this.http.get(c)}deleteOffer(t){return this.http.delete(this.baseUrl+"/api/offers/delete/"+t)}updateActivationStatus(t,e){return this.http.patch(this.baseUrl+"/api/offers/active-deactive",{offer_id:e,is_active:t})}changePosition(t,e){return this.http.patch(this.baseUrl+"/api/offers/setposition",{offer_id:e,position:t})}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(p.b))},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i("5eHb");let m=(()=>{class t{constructor(t,e,i){this.api=t,this.state=e,this.toster=i}loadOfferList(t=0,e=0,i=""){this.api.loadOfferList(t,e,i).subscribe(t=>{this.state.setOfferList(t)},t=>console.error("api call error from load offers ",t))}getOfferList(t=0,e=0,i=""){return this.state.isOffersSet||this.loadOfferList(t,e,i),this.state.getOfferList().pipe(Object(s.a)(t=>t))}deleteOffer(t){return this.api.deleteOffer(t).toPromise().then(t=>(this.toster.success("Offer Successfully Deleted","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from Delete Offer",t),t})}changeActivationStatus(t){return this.api.updateActivationStatus(t.is_active,t._id).toPromise().then(t=>(this.toster.success("Offer Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from change activation status Offer",t),t})}changePosition(t){return this.api.changePosition(t.position,t._id).toPromise().then(t=>(this.toster.success("Offer Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from change activation status Offer",t),t})}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(d),l.Yb(b),l.Yb(h.b))},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=i("tgey"),O=i("bTqV"),T=i("XiUz"),v=i("Wp6s"),P=i("3Pt+"),y=i("kmnG"),C=i("d3UM"),U=i("ofXK"),w=i("M9IT"),S=i("FKr1"),D=i("1jcm"),_=i("zkoq"),R=i("NFeN");function x(t,e){if(1&t&&(l.Ub(0,"mat-option",28),l.Pc(1),l.Tb()),2&t){const t=e.$implicit;l.pc("value",t.value),l.Cb(1),l.Rc(" ",t.name," ")}}function N(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Position"),l.Tb())}const M=function(){return{standalone:!0}};function L(t,e){if(1&t){const t=l.Vb();l.Ub(0,"td",30),l.Ub(1,"input",31),l.cc("change",(function(){l.Dc(t);const i=e.$implicit;return l.gc().changePosition(i)}))("ngModelChange",(function(i){return l.Dc(t),e.$implicit.position=i})),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit;l.Cb(1),l.pc("ngModelOptions",l.rc(2,M))("ngModel",t.position)}}function k(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Offer Type"),l.Tb())}function $(t,e){if(1&t&&(l.Ub(0,"td",32),l.Pc(1),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.Rc(" ",t.offer_type," ")}}function I(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Min Value"),l.Tb())}function A(t,e){if(1&t&&(l.Ub(0,"td",30),l.Pc(1),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.Qc(t.min_value)}}function E(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Discount Type"),l.Tb())}function F(t,e){if(1&t&&(l.Ub(0,"td",30),l.Pc(1),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.Rc(" ",t.discount_type," ")}}function z(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Discount Value"),l.Tb())}function j(t,e){if(1&t&&(l.Ub(0,"td",30),l.Pc(1),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.Rc(" ",t.discount_value," ")}}function V(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Coupon Code"),l.Tb())}function G(t,e){if(1&t&&(l.Ub(0,"td",30),l.Pc(1),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.Rc(" ",t.coupon_code.toUpperCase()," ")}}function Y(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Active"),l.Tb())}function H(t,e){if(1&t){const t=l.Vb();l.Ub(0,"td",30),l.Ub(1,"mat-slide-toggle",33),l.cc("ngModelChange",(function(i){return l.Dc(t),e.$implicit.is_active=i}))("change",(function(){l.Dc(t);const i=e.$implicit;return l.gc().changeActivationStatus(i)})),l.Tb(),l.Tb()}if(2&t){const t=e.$implicit;l.Cb(1),l.pc("ngModel",t.is_active)}}function K(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Expiry Date "),l.Tb())}function X(t,e){if(1&t&&(l.Ub(0,"td",30),l.Pc(1),l.hc(2,"date"),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.Rc(" ",l.ic(2,1,t.expiry)," ")}}function q(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1," Created On "),l.Tb())}function J(t,e){if(1&t&&(l.Ub(0,"td",30),l.Pc(1),l.hc(2,"date"),l.Tb()),2&t){const t=e.$implicit;l.Cb(1),l.Rc(" ",l.ic(2,1,t.created_at)," ")}}function Q(t,e){1&t&&(l.Ub(0,"th",29),l.Pc(1,"Controls"),l.Tb())}const B=function(){return[]};function W(t,e){if(1&t){const t=l.Vb();l.Ub(0,"td",30),l.Ub(1,"mat-grid-list",34),l.Ub(2,"mat-grid-tile"),l.Ub(3,"button",35),l.cc("click",(function(){l.Dc(t);const i=e.$implicit;return l.gc().navigateToEdit(i._id)})),l.Ub(4,"mat-icon",36),l.Pc(5,"create"),l.Tb(),l.Tb(),l.Tb(),l.Ub(6,"mat-grid-tile"),l.Ub(7,"button",37),l.cc("click",(function(){l.Dc(t);const i=e.$implicit;return l.gc().deleteIcon(i._id)})),l.Ub(8,"mat-icon",38),l.Pc(9,"delete"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}2&t&&(l.Cb(3),l.pc("routerLink",l.rc(1,B)))}function Z(t,e){1&t&&l.Pb(0,"tr",39)}function tt(t,e){1&t&&l.Pb(0,"tr",40)}const et=function(){return[5,10,25]};let it=(()=>{class t{constructor(t,e,i){this.router=t,this.facade=e,this.confirmService=i,this.displayedColumns=["position","offer_type","min_value","discount_type","discount_value","coupon_code","expiry","is_active","created_at","controls"],this.offerTypeList=[{name:"Order",value:"ORDER"},{name:"Category",value:"CATEGORY"},{name:"Item",value:"ITEM"},{name:"Age",value:"AGE"},{name:"Gender",value:"GENDER"}],this.searchOfferType="",this.pageDetails={currentPage:1,itemsPerPage:10,totalPages:3,totalRecords:200},this.totalBanner=0}ngOnInit(){this.filterOffer(),this.facade.getOfferList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchOfferType).subscribe(t=>{console.log(t),this.dataSource=new n.p(t.data),this.dataSource.sort=this.sort,this.pageDetails.totalRecords=t.totalCount})}get isAdmin(){return!0}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}pageEvent(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex+1,this.filterOffer()}deleteIcon(t){this.confirmService.confirm("Are you sure want to delete this offer?","Confirm").subscribe(e=>{1==e&&this.facade.deleteOffer(t).then(t=>this.filterOffer())})}navigateToEdit(t){}filterOffer(){this.facade.loadOfferList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchOfferType)}resetFilter(){this.searchOfferType=""}changeActivationStatus(t){let e=Object.assign({},t);this.facade.changeActivationStatus(e).then(t=>{this.filterOffer()})}changePosition(t){let e=Object.assign({},t);this.facade.changePosition(e).then(t=>{this.filterOffer()})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(a.f),l.Ob(m),l.Ob(r.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["app-offers-offer-list"]],viewQuery:function(t,e){var i;1&t&&l.Sc(o.a,!0),2&t&&l.yc(i=l.dc())&&(e.sort=i.first)},decls:58,vars:9,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[1,"form-field-full"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","25","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Type","name","searchOfferType",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","offer_type"],["mat-cell","","style","max-width: 100px",4,"matCellDef"],["matColumnDef","min_value"],["matColumnDef","discount_type"],["matColumnDef","discount_value"],["matColumnDef","coupon_code"],["matColumnDef","is_active"],["matColumnDef","expiry"],["matColumnDef","created_at"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number",2,"max-width","50px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-cell","",2,"max-width","100px"],["color","primary",3,"ngModel","ngModelChange","change"],["cols","3","rowHeight","50px"],["mat-icon-button","","aria-label","Edit",3,"routerLink","click"],["color","primary"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(l.Pb(0,"page-header"),l.Ub(1,"section"),l.Ub(2,"a",0),l.Pc(3," Add New "),l.Tb(),l.Tb(),l.Pb(4,"br"),l.Ub(5,"div",1),l.Ub(6,"div",2),l.Ub(7,"mat-card"),l.Ub(8,"mat-card-title"),l.Pc(9,"Filter"),l.Tb(),l.Ub(10,"form",3),l.Ub(11,"div",4),l.Ub(12,"mat-form-field",5),l.Ub(13,"mat-label"),l.Pc(14,"Offer Type"),l.Tb(),l.Ub(15,"mat-select",6),l.cc("ngModelChange",(function(t){return e.searchOfferType=t})),l.Nc(16,x,2,2,"mat-option",7),l.Tb(),l.Tb(),l.Ub(17,"div",5),l.Ub(18,"button",8),l.cc("click",(function(){return e.filterOffer()})),l.Pc(19," Search "),l.Tb(),l.Ub(20,"button",9),l.cc("click",(function(){return e.resetFilter()})),l.Pc(21,"Reset"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(22,"div",10),l.Ub(23,"table",11),l.Sb(24,12),l.Ub(25,"form"),l.Nc(26,N,2,0,"th",13),l.Nc(27,L,2,3,"td",14),l.Tb(),l.Rb(),l.Sb(28,15),l.Nc(29,k,2,0,"th",13),l.Nc(30,$,2,1,"td",16),l.Rb(),l.Sb(31,17),l.Nc(32,I,2,0,"th",13),l.Nc(33,A,2,1,"td",14),l.Rb(),l.Sb(34,18),l.Nc(35,E,2,0,"th",13),l.Nc(36,F,2,1,"td",14),l.Rb(),l.Sb(37,19),l.Nc(38,z,2,0,"th",13),l.Nc(39,j,2,1,"td",14),l.Rb(),l.Sb(40,20),l.Nc(41,V,2,0,"th",13),l.Nc(42,G,2,1,"td",14),l.Rb(),l.Sb(43,21),l.Nc(44,Y,2,0,"th",13),l.Nc(45,H,2,1,"td",14),l.Rb(),l.Sb(46,22),l.Nc(47,K,2,0,"th",13),l.Nc(48,X,3,3,"td",14),l.Rb(),l.Sb(49,23),l.Nc(50,q,2,0,"th",13),l.Nc(51,J,3,3,"td",14),l.Rb(),l.Sb(52,24),l.Nc(53,Q,2,0,"th",13),l.Nc(54,W,10,2,"td",14),l.Rb(),l.Nc(55,Z,1,0,"tr",25),l.Nc(56,tt,1,0,"tr",26),l.Tb(),l.Ub(57,"mat-paginator",27),l.cc("page",(function(t){return e.pageEvent(t)})),l.Tb(),l.Tb()),2&t&&(l.Cb(15),l.pc("ngModel",e.searchOfferType),l.Cb(1),l.pc("ngForOf",e.offerTypeList),l.Cb(7),l.pc("dataSource",e.dataSource),l.Cb(32),l.pc("matHeaderRowDef",e.displayedColumns),l.Cb(1),l.pc("matRowDefColumns",e.displayedColumns),l.Cb(1),l.pc("length",e.pageDetails.totalRecords)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",l.rc(8,et)))},directives:[g.a,O.a,a.i,T.c,T.a,v.a,v.c,P.y,P.r,P.s,T.d,y.c,y.g,C.a,P.q,P.t,U.n,O.b,n.o,o.a,n.c,n.i,n.b,n.k,n.n,w.a,S.p,n.h,o.b,n.a,P.u,P.d,D.a,_.a,_.c,a.g,R.a,n.j,n.m],pipes:[U.f],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}.itemimg[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;border-radius:5px;transform-origin:0 0;transition:transform .25s,visibility .25s ease-in}.itemimg[_ngcontent-%COMP%]:hover{transform:scale(2)}"]}),t})(),ct=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Ib({type:t,selectors:[["app-offers-components-offer-add"]],decls:3,vars:0,template:function(t,e){1&t&&(l.Pb(0,"page-header"),l.Ub(1,"p"),l.Pc(2,"offer-add works!"),l.Tb())},directives:[g.a],styles:[""]}),t})();const at=[{path:"",component:it},{path:"new",component:ct},{path:"edit/:id",component:ct}];let rt=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[a.j.forChild(at)],a.j]}),t})(),ot=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[c.a,rt]]}),t})()}}]);