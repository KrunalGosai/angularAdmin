!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{XdEn:function(e,a,r){"use strict";r.r(a),r.d(a,"ItemsModule",(function(){return Yt}));var c,o,s,l,m=r("PCNd"),u=r("tyNb"),b=((c={}).available="TRUE",c.notAvailable="FALSE",c.notify="NOTIFY",c),d=r("Xibt"),p=r("2Vo4"),f=r("fXoL"),h=((o=function(){function t(){i(this,t),this.items=new p.a({}),this.editItem=new p.a({}),this.itemTypes=new p.a([{name:"Sellable",value:"SELLABLE"},{name:"Packaging Material",value:"PACKAGING_MATERIAL"},{name:"Raw Material",value:"RAW_MATERIAL"}]),this.isItemsSet=!1,this.isItemDetailsSet=!1}return n(t,[{key:"getItemList",value:function(){return this.items.asObservable()}},{key:"setItemList",value:function(t){this.isItemsSet=!0,this.items.next(t)}},{key:"getEditItem",value:function(){return this.editItem.asObservable()}},{key:"setEditItem",value:function(t){this.isItemDetailsSet=!0,this.editItem.next(t)}},{key:"getItemTypes",value:function(){return this.itemTypes.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||o)},o.\u0275prov=f.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),g=r("vkgz"),v=r("AytR"),y=r("tk/3"),T=((s=function(){function t(e){i(this,t),this.http=e,this.baseURl=v.a.SERVER_ORIGIN}return n(t,[{key:"getItemList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,n=this.baseURl+"/api/item/get_admin_item_list?currentPage=".concat(t,"&currentPageSize=").concat(e);return null!=i&&null!=i&&""!=i.trim()&&(n+="&item_type="+i),null!=a&&null!=a&&(n+="&availability_status="+a),this.http.get(n)}},{key:"deleteItem",value:function(t){return this.http.delete(this.baseURl+"/api/item/delete_Item/"+t)}},{key:"getItemDetailsById",value:function(t){return this.http.get(this.baseURl+"/api/item/get_Itemdetail?item_id="+t)}},{key:"updateActivationStatus",value:function(t,e){return this.http.put(this.baseURl+"/api/item/update_Active_Deactive_Item",{item_id:e,is_active:t})}},{key:"newitem",value:function(t){return this.http.post(this.baseURl+"/api/item/add_Item",t)}},{key:"updateItem",value:function(t){return this.http.put(this.baseURl+"/api/item/update/"+t._id,t)}}]),t}()).\u0275fac=function(t){return new(t||s)(f.Yb(y.b))},s.\u0275prov=f.Kb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),C=r("5eHb"),I=((l=function(){function t(e,a,n){i(this,t),this.api=e,this.state=a,this.toster=n}return n(t,[{key:"loadItemList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.api.getItemList(e,i,a,n).subscribe((function(e){t.state.setItemList(e)}),(function(t){return console.error("api call error from load items ",t)}))}},{key:"getItemList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0;return this.state.isItemsSet||this.loadItemList(t,e,i,a),this.state.getItemList().pipe(Object(g.a)((function(t){return t})))}},{key:"getSallableItemList",value:function(){return this.api.getItemList(1,200,"SELLABLE").pipe(Object(g.a)((function(t){return t})))}},{key:"newItem",value:function(t){var e=this;return this.api.newitem(t).toPromise().then((function(t){return e.loadItemList(),e.toster.success("Item Successfully Created","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from new Item ",t),t}))}},{key:"deleteItem",value:function(t){var e=this;return this.api.deleteItem(t).toPromise().then((function(t){return e.toster.success("Item Successfully Deleted","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from Delete Item",t),t}))}},{key:"getItemDetails",value:function(t){return this.state.isItemDetailsSet||this.loadItemDetails(t),this.state.getEditItem().pipe(Object(g.a)((function(t){return t})))}},{key:"loadItemDetails",value:function(t){var e=this;return this.api.getItemDetailsById(t).toPromise().then((function(t){return e.state.setEditItem(t.item),t})).catch((function(t){throw console.error("api call error from load Item Details",t),t}))}},{key:"updateItem",value:function(t){var e=this;return this.api.updateItem(t).toPromise().then((function(t){return e.loadItemList(),e.toster.success("Item Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from Update item ",t),t}))}},{key:"changeActivationStatus",value:function(t){var e=this;return this.api.updateActivationStatus(t.is_active,t._id).toPromise().then((function(t){return e.toster.success("Unit Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from change activation status Unit",t),t}))}},{key:"getItemTypes",value:function(){return this.state.getItemTypes().pipe(Object(g.a)((function(t){return t})))}}]),t}()).\u0275fac=function(t){return new(t||l)(f.Yb(T),f.Yb(h),f.Yb(C.b))},l.\u0275prov=f.Kb({token:l,factory:l.\u0275fac,providedIn:"root"}),l),U=r("Dh3D"),P=r("+0xr"),S=r("ey9i"),F=function(t){return t.ADMIN="ADMIN",t.DEPO="DEPO",t.RETAILER="RETAILER",t.PURCHASE_MANAGER="PURCHASE_MANAGER",t.DELIVERY_BOY="DELIVERY_BOY",t.HAWKER="HAWKER",t.CUSTOMER="CUSTOMER",t.MANUFACTURING_PLANT="MANUFACTURING_PLANT",t.SUPPLIER="SUPPLIER",t}({}),_=r("tgey"),R=r("bTqV"),N=r("XiUz"),L=r("Wp6s"),k=r("3Pt+"),w=r("kmnG"),D=r("d3UM"),A=r("ofXK"),E=r("M9IT"),O=r("FKr1"),M=r("1jcm"),x=r("zkoq"),q=r("NFeN");function V(t,e){if(1&t&&(f.Ub(0,"mat-option",27),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.pc("value",i.value),f.Cb(1),f.Qc(i.name)}}function $(t,e){if(1&t&&(f.Ub(0,"mat-option",27),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.pc("value",i.value),f.Cb(1),f.Qc(i.name)}}function j(t,e){1&t&&(f.Ub(0,"th",28),f.Pc(1," Position "),f.Tb())}var B=function(){return{standalone:!0}};function K(t,e){if(1&t){var i=f.Vb();f.Ub(0,"td",29),f.Ub(1,"input",30),f.cc("change",(function(){f.Dc(i);var t=e.$implicit;return f.gc().categoryPositionChanged(t)}))("ngModelChange",(function(t){return f.Dc(i),e.$implicit.position=t})),f.Tb(),f.Tb()}if(2&t){var a=e.$implicit;f.Cb(1),f.pc("ngModelOptions",f.rc(2,B))("ngModel",a.position)}}function G(t,e){1&t&&(f.Ub(0,"th",28),f.Pc(1," Name "),f.Tb())}function z(t,e){if(1&t&&(f.Ub(0,"td",29),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.Cb(1),f.Rc(" ",i.name," ")}}function H(t,e){1&t&&(f.Ub(0,"th",28),f.Pc(1," Second Name "),f.Tb())}function Q(t,e){if(1&t&&(f.Ub(0,"td",29),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.Cb(1),f.Rc(" ",i.secondary_name," ")}}function Y(t,e){1&t&&(f.Ub(0,"th",28),f.Pc(1," Category "),f.Tb())}function W(t,e){if(1&t&&(f.Ub(0,"td",29),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.Cb(1),f.Rc(" ",i.category_id?i.category_id.name:""," ")}}function X(t,e){1&t&&(f.Ub(0,"th",31),f.Pc(1," Image "),f.Tb())}function J(t,e){if(1&t&&(f.Ub(0,"td",29),f.Pb(1,"img",32),f.Tb()),2&t){var i=e.$implicit;f.Cb(1),f.qc("src",i.thumbnail,f.Fc)}}function Z(t,e){1&t&&(f.Ub(0,"th",28),f.Pc(1," Type "),f.Tb())}function tt(t,e){if(1&t&&(f.Ub(0,"td",29),f.Pc(1),f.Tb()),2&t){var i=e.$implicit,a=f.gc();f.Cb(1),f.Rc(" ",a.itemTypes[i.type]," ")}}function et(t,e){1&t&&(f.Ub(0,"th",31),f.Pc(1," Price "),f.Tb())}function it(t,e){if(1&t&&(f.Ub(0,"td",29),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.Cb(1),f.Rc(" ",i.price," ")}}function at(t,e){1&t&&(f.Ub(0,"th",31),f.Pc(1," Quantity "),f.Tb())}function nt(t,e){if(1&t&&(f.Ub(0,"td",29),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.Cb(1),f.Qc(i.item_volume)}}function rt(t,e){1&t&&(f.Ub(0,"th",28),f.Pc(1," Active "),f.Tb())}function ct(t,e){if(1&t){var i=f.Vb();f.Ub(0,"td",29),f.Ub(1,"mat-slide-toggle",33),f.cc("ngModelChange",(function(t){return f.Dc(i),e.$implicit.is_active=t}))("change",(function(){f.Dc(i);var t=e.$implicit;return f.gc().changeActivationStatus(t)})),f.Tb(),f.Tb()}if(2&t){var a=e.$implicit;f.Cb(1),f.pc("ngModel",a.is_active)}}function ot(t,e){1&t&&(f.Ub(0,"th",28),f.Pc(1," Controls "),f.Tb())}var st=function(){return[]};function lt(t,e){if(1&t){var i=f.Vb();f.Ub(0,"td",29),f.Ub(1,"mat-grid-list",34),f.Ub(2,"mat-grid-tile"),f.Ub(3,"button",35),f.cc("click",(function(){f.Dc(i);var t=e.$implicit;return f.gc().navigateToEdit(t._id)})),f.Ub(4,"mat-icon",36),f.Pc(5,"create"),f.Tb(),f.Tb(),f.Tb(),f.Ub(6,"mat-grid-tile"),f.Ub(7,"button",37),f.cc("click",(function(){f.Dc(i);var t=e.$implicit;return f.gc().deleteIcon(t._id)})),f.Ub(8,"mat-icon",38),f.Pc(9,"delete"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb()}2&t&&(f.Cb(3),f.pc("routerLink",f.rc(1,st)))}function mt(t,e){1&t&&f.Pb(0,"tr",39)}function ut(t,e){1&t&&f.Pb(0,"tr",40)}var bt,dt=function(){return[5,10,25]},pt=((bt=function(){function t(e,a,n,r){i(this,t),this.router=e,this.settingService=a,this.facade=n,this.confirmService=r,this.displayedColumns=[],this.itemTypeList=[],this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.searchItemType="",this.availabilityStatus=null,this.availabilityList=[{name:"Available",value:b.available},{name:"Not Available",value:b.notAvailable},{name:"Notify",value:b.notify}],this.currentRole=this.settingService.user.role_id.type||"User",this.pageDetails={currentPage:1,itemsPerPage:10,totalPages:3,totalRecords:200},this.totalBanner=0}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.facade.loadItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus),this.facade.getItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,b).subscribe((function(e){t.dataSource=new P.p(e.data),t.dataSource.sort=t.sort})),this.facade.getItemTypes().subscribe((function(e){t.itemTypeList=e})),this.setRoleBasedColumn()}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"pageEvent",value:function(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex+1,this.facade.loadItemList(this.pageDetails.currentPage,t.pageSize,this.searchItemType,this.availabilityStatus)}},{key:"deleteIcon",value:function(t){var e=this;this.confirmService.confirm("Are you sure want to delete this Item?","Confirm").subscribe((function(i){1==i&&e.facade.deleteItem(t).then((function(t){return e.facade.loadItemList(e.pageDetails.currentPage,e.pageDetails.itemsPerPage,e.searchItemType,e.availabilityStatus)}))}))}},{key:"navigateToEdit",value:function(t){var e=this;this.facade.loadItemDetails(t).then((function(i){e.router.navigate(["items","edit",t])}))}},{key:"filterItem",value:function(){this.facade.loadItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus)}},{key:"resetFilter",value:function(){this.searchItemType="",this.availabilityStatus=null}},{key:"changeActivationStatus",value:function(t){var e=this,i=Object.assign({},t);this.facade.changeActivationStatus(i).then((function(t){e.facade.loadItemList(e.pageDetails.currentPage,e.pageDetails.itemsPerPage,e.searchItemType,e.availabilityStatus)}))}},{key:"setRoleBasedColumn",value:function(){switch(this.currentRole){case F.ADMIN:this.displayedColumns=["thumbnail","position","name","price","type","is_active","category","controls"];break;case F.DEPO:case F.HAWKER:this.displayedColumns=["thumbnail","position","name","category","item_volume","price","controls"];break;default:this.displayedColumns=["thumbnail","position","name","category"]}}}]),t}()).\u0275fac=function(t){return new(t||bt)(f.Ob(u.f),f.Ob(S.d),f.Ob(I),f.Ob(d.a))},bt.\u0275cmp=f.Ib({type:bt,selectors:[["app-items-components-item-list"]],viewQuery:function(t,e){var i;1&t&&f.Sc(U.a,!0),2&t&&f.yc(i=f.dc())&&(e.sort=i.first)},decls:62,vars:11,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["fxFlex","25","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Item Type","name","filterType",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Type","name","filterType",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","secondary_name"],["matColumnDef","category"],["matColumnDef","thumbnail"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","price"],["matColumnDef","item_volume"],["matColumnDef","is_active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-header-cell",""],["alt","Item Image","width","100px","height","50px",3,"src"],["color","primary",3,"ngModel","ngModelChange","change"],["cols","2","rowHeight","50px"],["mat-icon-button","","aria-label","Edit",3,"routerLink","click"],["color","primary"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(f.Pb(0,"page-header"),f.Ub(1,"section"),f.Ub(2,"a",0),f.Pc(3," Add New "),f.Tb(),f.Tb(),f.Pb(4,"br"),f.Ub(5,"div",1),f.Ub(6,"div",2),f.Ub(7,"mat-card"),f.Ub(8,"mat-card-title"),f.Pc(9,"Filter"),f.Tb(),f.Ub(10,"form"),f.Ub(11,"mat-form-field",3),f.Ub(12,"mat-label"),f.Pc(13,"Item Type"),f.Tb(),f.Ub(14,"mat-select",4),f.cc("ngModelChange",(function(t){return e.searchItemType=t})),f.Nc(15,V,2,2,"mat-option",5),f.Tb(),f.Tb(),f.Ub(16,"mat-form-field",3),f.Ub(17,"mat-label"),f.Pc(18,"Availability"),f.Tb(),f.Ub(19,"mat-select",6),f.cc("ngModelChange",(function(t){return e.availabilityStatus=t})),f.Nc(20,$,2,2,"mat-option",5),f.Tb(),f.Tb(),f.Ub(21,"div",3),f.Ub(22,"button",7),f.cc("click",(function(){return e.filterItem()})),f.Pc(23,"Search"),f.Tb(),f.Ub(24,"button",8),f.cc("click",(function(){return e.resetFilter()})),f.Pc(25,"Reset"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Ub(26,"div",9),f.Ub(27,"table",10),f.Sb(28,11),f.Ub(29,"form"),f.Nc(30,j,2,0,"th",12),f.Nc(31,K,2,3,"td",13),f.Tb(),f.Rb(),f.Sb(32,14),f.Nc(33,G,2,0,"th",12),f.Nc(34,z,2,1,"td",13),f.Rb(),f.Sb(35,15),f.Nc(36,H,2,0,"th",12),f.Nc(37,Q,2,1,"td",13),f.Rb(),f.Sb(38,16),f.Nc(39,Y,2,0,"th",12),f.Nc(40,W,2,1,"td",13),f.Rb(),f.Sb(41,17),f.Nc(42,X,2,0,"th",18),f.Nc(43,J,2,1,"td",13),f.Rb(),f.Sb(44,19),f.Nc(45,Z,2,0,"th",12),f.Nc(46,tt,2,1,"td",13),f.Rb(),f.Sb(47,20),f.Nc(48,et,2,0,"th",18),f.Nc(49,it,2,1,"td",13),f.Rb(),f.Sb(50,21),f.Nc(51,at,2,0,"th",18),f.Nc(52,nt,2,1,"td",13),f.Rb(),f.Sb(53,22),f.Nc(54,rt,2,0,"th",12),f.Nc(55,ct,2,1,"td",13),f.Rb(),f.Sb(56,23),f.Nc(57,ot,2,0,"th",12),f.Nc(58,lt,10,2,"td",13),f.Rb(),f.Nc(59,mt,1,0,"tr",24),f.Nc(60,ut,1,0,"tr",25),f.Tb(),f.Ub(61,"mat-paginator",26),f.cc("page",(function(t){return e.pageEvent(t)})),f.Tb(),f.Tb()),2&t&&(f.Cb(14),f.pc("ngModel",e.searchItemType),f.Cb(1),f.pc("ngForOf",e.itemTypeList),f.Cb(4),f.pc("ngModel",e.availabilityStatus),f.Cb(1),f.pc("ngForOf",e.availabilityList),f.Cb(7),f.pc("dataSource",e.dataSource),f.Cb(32),f.pc("matHeaderRowDef",e.displayedColumns),f.Cb(1),f.pc("matRowDefColumns",e.displayedColumns),f.Cb(1),f.pc("length",e.pageDetails.totalRecords)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",f.rc(10,dt)))},directives:[_.a,R.a,u.i,N.c,N.a,L.a,L.c,k.x,k.q,k.r,w.c,w.g,D.a,k.p,k.s,A.n,R.b,P.o,U.a,P.c,P.i,P.b,P.k,P.n,E.a,O.p,P.h,U.b,P.a,k.t,k.d,M.a,x.a,x.c,u.g,q.a,P.j,P.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}"]}),bt),ft=r("uEtv"),ht=r("FtGj"),gt=r("rGne"),vt=r("qFsG"),yt=r("A5z7"),Tt=r("sYmb");function Ct(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function It(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function Ut(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function Pt(t,e){if(1&t&&(f.Ub(0,"mat-option",30),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.pc("value",i._id),f.Cb(1),f.Qc(i.name)}}function St(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function Ft(t,e){if(1&t&&(f.Ub(0,"mat-option",30),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.pc("value",i._id),f.Cb(1),f.Qc(i.name)}}function _t(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function Rt(t,e){if(1&t&&(f.Ub(0,"mat-option",30),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.pc("value",i.value),f.Cb(1),f.Qc(i.name)}}function Nt(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function Lt(t,e){if(1&t&&(f.Ub(0,"mat-option",30),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.pc("value",i._id),f.Cb(1),f.Qc(i.name)}}function kt(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function wt(t,e){if(1&t&&(f.Ub(0,"mat-option",30),f.Pc(1),f.Tb()),2&t){var i=e.$implicit;f.pc("value",i._id),f.Cb(1),f.Qc(i.name)}}function Dt(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function At(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function Et(t,e){if(1&t){var i=f.Vb();f.Ub(0,"mat-chip",31),f.cc("removed",(function(){f.Dc(i);var t=e.$implicit;return f.gc().removetag(t)})),f.Pc(1),f.Ub(2,"mat-icon",32),f.Pc(3,"cancel"),f.Tb(),f.Tb()}if(2&t){var a=e.$implicit;f.Cb(1),f.Rc(" ",a," ")}}function Ot(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function Mt(t,e){if(1&t){var i=f.Vb();f.Ub(0,"mat-chip",31),f.cc("removed",(function(){f.Dc(i);var t=e.$implicit;return f.gc().removepic(t)})),f.Pc(1),f.Ub(2,"mat-icon",32),f.Pc(3,"cancel"),f.Tb(),f.Tb()}if(2&t){var a=e.$implicit;f.Cb(1),f.Rc(" ",a," ")}}function xt(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function qt(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}function Vt(t,e){1&t&&(f.Ub(0,"mat-error"),f.Pc(1),f.hc(2,"translate"),f.Tb()),2&t&&(f.Cb(1),f.Rc(" ",f.ic(2,1,"validations.required")," "))}var $t,jt,Bt,Kt=function(){return["home","items","new"]},Gt=function(){return["/items"]},zt=(($t=function(){function e(t,a,n,r,c,o){var s=this;i(this,e),this.fb=t,this.router=a,this.activeRoute=n,this.facade=r,this.unitFacde=c,this.categoryFacade=o,this.recommendedList=[],this.isEditMode=!1,this.activeEditId="",this.separatorKeysCodes=[ht.g,ht.c],this.cateTagValues=[],this.subCateTagValues=[],this.itemForm=this.fb.group({name:["",[k.w.required]],secondary_name:[""],price:[0],is_active:[!0],category_id:[""],unit_id:[""],item_type:[""],description:[""],benefits:[""],category_tags:[[]],thumbnail:[""],picture:[[]],recommended_items:[[]],subCategory_ids:[[]]}),this.activeRoute.params.subscribe((function(t){null!=t.id&&null!=t.id&&""!=t.id&&(s.isEditMode=!0,s.activeEditId=t.id)}))}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.categoryFacade.loadParentCategories(),this.unitFacde.loadUnites(1,500),this.categoryFacade.getParentCategories().subscribe((function(e){t.categoryList=e})),this.categoryFacade.getCategoriesByParentId().subscribe((function(e){t.subCategoryList=e.data})),this.unitFacde.getUnites().subscribe((function(e){t.unitList=e.data})),this.facade.getItemTypes().subscribe((function(e){t.itemTypeList=e})),this.facade.getSallableItemList().subscribe((function(e){t.recommendedList=e.data})),this.isEditMode&&this.facade.getItemDetails(this.activeEditId).subscribe((function(e){var i=Object.assign({},e);t.itemForm.patchValue(e),t.itemForm.patchValue({item_type:i.type})}),(function(t){return console.error(t)}))}},{key:"onFormSubmit",value:function(t){var e=this;if(console.log("form value ",this.itemForm.value,this.itemForm.valid),this.itemForm.valid)if(this.isEditMode){var i=this.itemForm.value;i._id=this.activeEditId,this.facade.updateItem(i).then((function(t){e.itemForm.reset(),e.router.navigate(["items"])}))}else this.facade.newItem(this.itemForm.value).then((function(t){e.itemForm.reset(),e.router.navigate(["items"])}))}},{key:"addtag",value:function(e){var i=e.input,a=e.value,n=t(this.itemForm.get("category_tags").value);(a||"").trim()&&(n.push(a.trim()),this.itemForm.get("category_tags").setValue(n)),i&&(i.value="")}},{key:"removetag",value:function(e){var i=t(this.itemForm.get("category_tags").value),a=i.indexOf(e);a>=0&&(i.splice(a,1),this.itemForm.get("category_tags").setValue(i))}},{key:"addpic",value:function(e){var i=e.input,a=e.value,n=t(this.itemForm.get("picture").value);(a||"").trim()&&(n.push(a.trim()),this.itemForm.get("picture").setValue(n)),i&&(i.value="")}},{key:"removepic",value:function(e){var i=t(this.itemForm.get("picture").value),a=i.indexOf(e);a>=0&&(i.splice(a,1),this.itemForm.get("picture").setValue(i))}},{key:"onCategorySelectionChange",value:function(){var e,i=this;this.cateTagValues=[];var a=this.itemForm.get("category_id").value;this.categoryList.filter((function(t){a==t._id&&i.cateTagValues.push(t.name)})),this.itemForm.patchValue({category_tags:(e=[]).concat.apply(e,t(this.cateTagValues))}),this.itemForm.get("subCategory_ids").setValue([]),this.loadSubCategories(a)}},{key:"onSubCategorySelectionChange",value:function(){var e,i=this;this.subCateTagValues=[];var a=this.itemForm.get("subCategory_ids").value;this.subCategoryList.filter((function(t){a.indexOf(t._id)>=0&&i.subCateTagValues.push(t.name)})),this.itemForm.patchValue({category_tags:(e=[]).concat.apply(e,t(this.cateTagValues).concat([this.subCateTagValues]))})}},{key:"loadSubCategories",value:function(t){this.categoryFacade.loadCategories(1,200,t,"")}},{key:"is_active_value",get:function(){return!!this.itemForm.get("is_active").value&&this.itemForm.get("is_active").value}}]),e}()).\u0275fac=function(t){return new(t||$t)(f.Ob(k.f),f.Ob(u.f),f.Ob(u.a),f.Ob(I),f.Ob(gt.a),f.Ob(ft.a))},$t.\u0275cmp=f.Ib({type:$t,selectors:[["app-items-components-item-add"]],decls:104,vars:34,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","25","fxFlex.lt-sm","100"],["matInput","","placeholder","Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Secondary Name","formControlName","secondary_name","required",""],["matInput","","placeholder","Price","formControlName","price","required","","type","number"],["formControlName","is_active","color","primary",2,"margin-top","20px"],["formControlName","category_id","placeholder","Category","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subCategory_ids","placeholder","Sub Category","required","","multiple","",3,"selectionChange"],["formControlName","item_type","placeholder","Type","required",""],["formControlName","unit_id","placeholder","Unit","required",""],["fxFlex","50","fxFlex.lt-sm","100"],["formControlName","recommended_items","placeholder","Recommendation","multiple","","required",""],["matInput","","placeholder","Thumbnail","formControlName","thumbnail","required",""],["aria-label","Tags"],["chipList",""],["selectable","true","removable","true",3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-label","Pictures"],["picList",""],["placeholder","Pictures",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","placeholder","Description","formControlName","description","required",""],["matInput","","placeholder","Benefits","formControlName","benefits","required",""],["mat-raised-button","","color","primary","type","submit",1,"m-t-8",2,"margin-right","5px"],["mat-raised-button","","type","button",1,"m-t-8",3,"routerLink"],[3,"value"],["selectable","true","removable","true",3,"removed"],["matChipRemove",""]],template:function(t,e){if(1&t&&(f.Pb(0,"page-header",0),f.Ub(1,"div",1),f.Ub(2,"div",2),f.Ub(3,"mat-card"),f.Ub(4,"mat-card-title"),f.Pc(5),f.Tb(),f.Ub(6,"form",3),f.cc("submit",(function(t){return e.onFormSubmit(t)})),f.Ub(7,"div",4),f.Ub(8,"div",5),f.Ub(9,"mat-form-field"),f.Ub(10,"mat-label"),f.Pc(11,"Name"),f.Tb(),f.Pb(12,"input",6),f.Nc(13,Ct,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(14,"div",5),f.Ub(15,"mat-form-field"),f.Ub(16,"mat-label"),f.Pc(17,"Secondary Name"),f.Tb(),f.Pb(18,"input",8),f.Nc(19,It,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(20,"div",5),f.Ub(21,"mat-form-field"),f.Ub(22,"mat-label"),f.Pc(23,"Price"),f.Tb(),f.Pb(24,"input",9),f.Nc(25,Ut,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(26,"div",5),f.Ub(27,"mat-slide-toggle",10),f.Pc(28),f.Tb(),f.Tb(),f.Ub(29,"div",5),f.Ub(30,"mat-form-field"),f.Ub(31,"mat-label"),f.Pc(32,"Category"),f.Tb(),f.Ub(33,"mat-select",11),f.cc("selectionChange",(function(){return e.onCategorySelectionChange()})),f.Nc(34,Pt,2,2,"mat-option",12),f.Tb(),f.Nc(35,St,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(36,"div",5),f.Ub(37,"mat-form-field"),f.Ub(38,"mat-label"),f.Pc(39,"Sub Category"),f.Tb(),f.Ub(40,"mat-select",13),f.cc("selectionChange",(function(){return e.onSubCategorySelectionChange()})),f.Nc(41,Ft,2,2,"mat-option",12),f.Tb(),f.Nc(42,_t,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(43,"div",5),f.Ub(44,"mat-form-field"),f.Ub(45,"mat-label"),f.Pc(46,"Type"),f.Tb(),f.Ub(47,"mat-select",14),f.Nc(48,Rt,2,2,"mat-option",12),f.Tb(),f.Nc(49,Nt,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(50,"div",5),f.Ub(51,"mat-form-field"),f.Ub(52,"mat-label"),f.Pc(53,"Unit"),f.Tb(),f.Ub(54,"mat-select",15),f.Nc(55,Lt,2,2,"mat-option",12),f.Tb(),f.Nc(56,kt,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(57,"div",16),f.Ub(58,"mat-form-field"),f.Ub(59,"mat-label"),f.Pc(60,"Recommendation"),f.Tb(),f.Ub(61,"mat-select",17),f.Nc(62,wt,2,2,"mat-option",12),f.Tb(),f.Nc(63,Dt,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(64,"div",16),f.Ub(65,"mat-form-field"),f.Ub(66,"mat-label"),f.Pc(67,"Thumbnail"),f.Tb(),f.Pb(68,"input",18),f.Nc(69,At,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(70,"div",16),f.Ub(71,"mat-form-field"),f.Ub(72,"mat-label"),f.Pc(73,"Tags"),f.Tb(),f.Ub(74,"mat-chip-list",19,20),f.Nc(76,Et,4,1,"mat-chip",21),f.Ub(77,"input",22),f.cc("matChipInputTokenEnd",(function(t){return e.addtag(t)})),f.Tb(),f.Tb(),f.Nc(78,Ot,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(79,"div",16),f.Ub(80,"mat-form-field"),f.Ub(81,"mat-label"),f.Pc(82,"Pictures"),f.Tb(),f.Ub(83,"mat-chip-list",23,24),f.Nc(85,Mt,4,1,"mat-chip",21),f.Ub(86,"input",25),f.cc("matChipInputTokenEnd",(function(t){return e.addpic(t)})),f.Tb(),f.Tb(),f.Nc(87,xt,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(88,"div",16),f.Ub(89,"mat-form-field"),f.Ub(90,"mat-label"),f.Pc(91,"Description"),f.Tb(),f.Pb(92,"textarea",26),f.Nc(93,qt,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Ub(94,"div",16),f.Ub(95,"mat-form-field"),f.Ub(96,"mat-label"),f.Pc(97,"Benefits"),f.Tb(),f.Pb(98,"textarea",27),f.Nc(99,Vt,3,3,"mat-error",7),f.Tb(),f.Tb(),f.Tb(),f.Ub(100,"button",28),f.Pc(101,"Save"),f.Tb(),f.Ub(102,"button",29),f.Pc(103," Back"),f.Tb(),f.Tb(),f.Tb(),f.Tb(),f.Tb()),2&t){var i=f.zc(75),a=f.zc(84);f.qc("title",e.isEditMode?"Edit Item":"New Item"),f.pc("nav",f.rc(32,Kt)),f.Cb(5),f.Rc("",e.isEditMode?"Edit Item":"New Item"," "),f.Cb(1),f.pc("formGroup",e.itemForm),f.Cb(7),f.pc("ngIf",e.itemForm.get("name").invalid),f.Cb(6),f.pc("ngIf",e.itemForm.get("secondary_name").invalid),f.Cb(6),f.pc("ngIf",e.itemForm.get("price").invalid),f.Cb(3),f.Rc(" ",e.is_active_value?"Active":"Inactive"," "),f.Cb(6),f.pc("ngForOf",e.categoryList),f.Cb(1),f.pc("ngIf",e.itemForm.get("category_id").invalid),f.Cb(6),f.pc("ngForOf",e.subCategoryList),f.Cb(1),f.pc("ngIf",e.itemForm.get("subCategory_ids").invalid),f.Cb(6),f.pc("ngForOf",e.itemTypeList),f.Cb(1),f.pc("ngIf",e.itemForm.get("item_type").invalid),f.Cb(6),f.pc("ngForOf",e.unitList),f.Cb(1),f.pc("ngIf",e.itemForm.get("unit_id").invalid),f.Cb(6),f.pc("ngForOf",e.recommendedList),f.Cb(1),f.pc("ngIf",e.itemForm.get("recommended_items").invalid),f.Cb(6),f.pc("ngIf",e.itemForm.get("thumbnail").invalid),f.Cb(7),f.pc("ngForOf",e.itemForm.get("category_tags").value),f.Cb(1),f.pc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),f.Cb(1),f.pc("ngIf",e.itemForm.get("category_tags").invalid),f.Cb(7),f.pc("ngForOf",e.itemForm.get("picture").value),f.Cb(1),f.pc("matChipInputFor",a)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),f.Cb(1),f.pc("ngIf",e.itemForm.get("picture").invalid),f.Cb(6),f.pc("ngIf",e.itemForm.get("description").invalid),f.Cb(6),f.pc("ngIf",e.itemForm.get("benefits").invalid),f.Cb(3),f.pc("routerLink",f.rc(33,Gt))}},directives:[_.a,N.c,N.a,L.a,L.c,k.x,k.q,k.k,N.d,w.c,w.g,vt.b,k.d,k.p,k.i,k.v,A.o,k.t,M.a,D.a,A.n,yt.c,yt.b,R.b,u.g,w.b,O.p,yt.a,q.a,yt.d],pipes:[Tt.d],styles:[""]}),$t),Ht=[{path:"",component:pt},{path:"new",component:zt},{path:"edit/:id",component:zt}],Qt=((Bt=function t(){i(this,t)}).\u0275mod=f.Mb({type:Bt}),Bt.\u0275inj=f.Lb({factory:function(t){return new(t||Bt)},imports:[[u.j.forChild(Ht)],u.j]}),Bt),Yt=((jt=function t(){i(this,t)}).\u0275mod=f.Mb({type:jt}),jt.\u0275inj=f.Lb({factory:function(t){return new(t||jt)},imports:[[m.a,Qt]]}),jt)}}])}();