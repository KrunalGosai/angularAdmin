(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{XdEn:function(t,e,i){"use strict";i.r(e),i.d(e,"ItemsModule",(function(){return ge}));var a=i("PCNd"),c=i("tyNb"),r=i("2Vo4"),o=i("fXoL");let n=(()=>{class t{constructor(){this.items=new r.a({}),this.editItem=new r.a({}),this.itemTypes=new r.a([{name:"Sellable",value:"SELLABLE"},{name:"Packaging Material",value:"PACKAGING_MATERIAL"},{name:"Raw Material",value:"RAW_MATERIAL"}]),this.itemViewData=new r.a({}),this.isItemsSet=!1,this.isItemDetailsSet=!1}getItemList(){return this.items.asObservable()}setItemList(t){this.isItemsSet=!0,this.items.next(t)}getEditItem(){return this.editItem.asObservable()}setEditItem(t){this.isItemDetailsSet=!0,this.editItem.next(t)}getItemTypes(){return this.itemTypes.asObservable()}setItemViewData(t){this.itemViewData.next(t)}getItemViewData(){return this.itemViewData.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=i("vkgz"),l=i("AytR"),b=i("tk/3");let m=(()=>{class t{constructor(t){this.http=t,this.baseURl=l.a.SERVER_ORIGIN}getItemList(t=1,e=5,i="",a,c="",r=""){let o=this.baseURl+`/api/item/get_admin_item_list?currentPage=${t}&currentPageSize=${e}`;return null!=i&&null!=i&&""!=i.trim()&&(o+="&item_type="+i),null!=a&&null!=a&&(o+="&availability_status="+a),null!=c&&null!=c&&""!=c.trim()&&(o+="&user_id="+c),null!=r&&null!=r&&""!=r.trim()&&(o+="&category_id="+r),this.http.get(o)}deleteItem(t){return this.http.delete(this.baseURl+"/api/item/delete_Item/"+t)}getItemDetailsById(t){return this.http.get(this.baseURl+"/api/item/get_Itemdetail?item_id="+t)}updateActivationStatus(t,e){return this.http.put(this.baseURl+"/api/item/update_Active_Deactive_Item",{item_id:e,is_active:t})}newitem(t){return this.http.post(this.baseURl+"/api/item/add_Item",t)}updateItem(t){return this.http.put(this.baseURl+"/api/item/update/"+t._id,t)}updateItemDepoPrice(t){return this.http.put(this.baseURl+"/api/item/update_itemdepo_price",t)}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(b.b))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=i("5eHb");let d=(()=>{class t{constructor(t,e,i){this.api=t,this.state=e,this.toster=i}loadItemList(t=1,e=200,i="",a=null,c="",r=""){this.api.getItemList(t,e,i,a,c,r).subscribe(t=>{this.state.setItemList(t)},t=>console.error("api call error from load items ",t))}getItemList(t=1,e=200,i="",a,c="",r=""){return this.state.isItemsSet||this.loadItemList(t,e,i,a,c,r),this.state.getItemList().pipe(Object(s.a)(t=>t))}getSallableItemList(){return this.api.getItemList(1,200,"SELLABLE").pipe(Object(s.a)(t=>t))}newItem(t){return this.api.newitem(t).toPromise().then(t=>(this.loadItemList(),this.toster.success("Item Successfully Created","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from new Item ",t),t})}deleteItem(t){return this.api.deleteItem(t).toPromise().then(t=>(this.toster.success("Item Successfully Deleted","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from Delete Item",t),t})}getItemDetails(t){return this.state.isItemDetailsSet||this.loadItemDetails(t),this.state.getEditItem().pipe(Object(s.a)(t=>t))}loadItemDetails(t){return this.api.getItemDetailsById(t).toPromise().then(t=>(this.state.setEditItem(t.item),t)).catch(t=>{throw console.error("api call error from load Item Details",t),t})}updateItem(t){return this.api.updateItem(t).toPromise().then(t=>(this.loadItemList(),this.toster.success("Item Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from Update item ",t),t})}changeActivationStatus(t){return this.api.updateActivationStatus(t.is_active,t._id).toPromise().then(t=>(this.toster.success("Unit Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from change activation status Unit",t),t})}getItemTypes(){return this.state.getItemTypes().pipe(Object(s.a)(t=>t))}setItemViewData(t){this.state.setItemViewData(t)}getItemViewData(){return this.state.getItemViewData().pipe(Object(s.a)(t=>t))}updateItemDepoPrice(t){return this.api.updateItemDepoPrice(t).toPromise().then(t=>(this.toster.success("Item Depo Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from updateItemDepoPrice",t),t})}}return t.\u0275fac=function(e){return new(e||t)(o.Yb(m),o.Yb(n),o.Yb(u.b))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("XiUz"),h=i("Wp6s"),g=i("kmnG"),f=i("ofXK");function U(t,e){1&t&&o.Pb(0,"img",7),2&t&&o.qc("src",e.$implicit,o.Fc)}let T=(()=>{class t{constructor(t){this.facde=t,this.viewData={},this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[]}ngOnInit(){this.facde.getItemViewData().subscribe(t=>{this.viewData=t,this.dataSource=this.viewData.all_item_units})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(d))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-item-view"]],decls:84,vars:11,consts:[["fxLayout","row wrap",1,"matero-row"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","15","fxFlex.lt-sm","100"],["fxFlex","85","fxFlex.lt-sm","100"],["alt","Item Thumbnail","height","60px","width","80px",3,"src"],["fxFlex","35","fxFlex.lt-sm","100"],["alt","Item Picture","height","60px","width","80px",3,"src",4,"ngFor","ngForOf"],["alt","Item Picture","height","60px","width","80px",3,"src"]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"mat-card"),o.Ub(2,"mat-card-title"),o.Pc(3,"Item View"),o.Tb(),o.Ub(4,"div",1),o.Ub(5,"div",2),o.Ub(6,"mat-label"),o.Ub(7,"strong"),o.Pc(8," Thumbnail "),o.Tb(),o.Pc(9,":"),o.Tb(),o.Tb(),o.Ub(10,"div",3),o.Pb(11,"img",4),o.Tb(),o.Ub(12,"div",2),o.Ub(13,"mat-label"),o.Ub(14,"strong"),o.Pc(15," Name "),o.Tb(),o.Tb(),o.Tb(),o.Ub(16,"div",5),o.Ub(17,"mat-label"),o.Pc(18),o.Tb(),o.Tb(),o.Ub(19,"div",2),o.Ub(20,"mat-label"),o.Ub(21,"strong"),o.Pc(22,"Category "),o.Tb(),o.Tb(),o.Tb(),o.Ub(23,"div",5),o.Ub(24,"mat-label"),o.Pc(25),o.Tb(),o.Tb(),o.Ub(26,"div",2),o.Ub(27,"mat-label"),o.Ub(28,"strong"),o.Pc(29," Type "),o.Tb(),o.Tb(),o.Tb(),o.Ub(30,"div",5),o.Ub(31,"mat-label"),o.Pc(32),o.Tb(),o.Tb(),o.Ub(33,"div",2),o.Ub(34,"mat-label"),o.Ub(35,"strong"),o.Pc(36," Qty "),o.Tb(),o.Tb(),o.Tb(),o.Ub(37,"div",5),o.Ub(38,"mat-label"),o.Pc(39),o.Tb(),o.Tb(),o.Ub(40,"div",2),o.Ub(41,"mat-label"),o.Ub(42,"strong"),o.Pc(43," Position "),o.Tb(),o.Tb(),o.Tb(),o.Ub(44,"div",5),o.Ub(45,"mat-label"),o.Pc(46),o.Tb(),o.Tb(),o.Ub(47,"div",2),o.Ub(48,"mat-label"),o.Ub(49,"strong"),o.Pc(50," is Active "),o.Tb(),o.Tb(),o.Tb(),o.Ub(51,"div",5),o.Ub(52,"mat-label"),o.Pc(53),o.Tb(),o.Tb(),o.Ub(54,"div",2),o.Ub(55,"mat-label"),o.Ub(56,"strong"),o.Pc(57," Price "),o.Tb(),o.Tb(),o.Tb(),o.Ub(58,"div",5),o.Ub(59,"mat-label"),o.Pc(60),o.Tb(),o.Tb(),o.Ub(61,"div",2),o.Ub(62,"mat-label"),o.Ub(63,"strong"),o.Pc(64," Availability "),o.Tb(),o.Tb(),o.Tb(),o.Ub(65,"div",5),o.Ub(66,"mat-label"),o.Pc(67),o.Tb(),o.Tb(),o.Ub(68,"div",2),o.Ub(69,"mat-label"),o.Ub(70,"strong"),o.Pc(71," Unit Name"),o.Tb(),o.Tb(),o.Tb(),o.Ub(72,"div",5),o.Ub(73,"mat-label"),o.Pc(74),o.Tb(),o.Tb(),o.Pb(75,"div",2),o.Pb(76,"div",5),o.Ub(77,"div",2),o.Ub(78,"mat-label"),o.Ub(79,"strong"),o.Pc(80," Pictures "),o.Tb(),o.Pc(81,":"),o.Tb(),o.Tb(),o.Ub(82,"div",3),o.Nc(83,U,1,1,"img",6),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t&&(o.Cb(11),o.qc("src",e.viewData.thumbnail,o.Fc),o.Cb(7),o.Rc(": ",e.viewData.name,""),o.Cb(7),o.Rc(": ",e.viewData.category_id?e.viewData.category_id.name:"",""),o.Cb(7),o.Rc(": ",e.itemTypes[e.viewData.type],""),o.Cb(7),o.Rc(": ",e.viewData.item_volume,""),o.Cb(7),o.Rc(": ",e.viewData.position,""),o.Cb(7),o.Rc(": ",e.viewData.is_active?"Yes":"No",""),o.Cb(7),o.Rc(": ",e.viewData.price,""),o.Cb(7),o.Rc(": ",e.viewData.availability_status,""),o.Cb(7),o.Rc(": ",e.viewData.unit_id?e.viewData.unit_id.name:"",""),o.Cb(9),o.pc("ngForOf",e.viewData.picture))},directives:[p.c,h.a,h.c,p.d,p.a,g.g,f.n],styles:[""]}),t})();var C=i("uEtv"),v=i("WW+1"),I=i("Xibt"),y=i("Dh3D"),P=i("+0xr"),_=function(t){return t.available="TRUE",t.notAvailable="FALSE",t.notify="NOTIFY",t}({}),R=i("ey9i"),D=function(t){return t.ADMIN="ADMIN",t.DEPO="DEPO",t.RETAILER="RETAILER",t.PURCHASE_MANAGER="PURCHASE_MANAGER",t.DELIVERY_BOY="DELIVERY_BOY",t.HAWKER="HAWKER",t.CUSTOMER="CUSTOMER",t.MANUFACTURING_PLANT="MANUFACTURING_PLANT",t.SUPPLIER="SUPPLIER",t}({}),w=i("dKfg"),N=function(t){return t.USER="USER",t.SUPPLIER="SUPPLIER",t.HOCKER="HOCKER",t.DELIVERYBOY="DELIVERYBOY",t.PURCHASEMANAGER="PURCHASEMANAGER",t.DEPO="DEPO",t.MANUFACTUREPLANT="MANUFACTUREPLANT",t}({}),S=i("0IaG"),F=i("bTqV"),L=i("3Pt+"),O=i("QibW");function A(t,e){1&t&&(o.Ub(0,"th",13),o.Pc(1," Price "),o.Tb())}const x=function(){return{standalone:!0}};function M(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",14),o.Ub(1,"input",15),o.cc("change",(function(){o.Dc(t);const i=e.$implicit;return o.gc().changePrice(i)}))("ngModelChange",(function(i){return o.Dc(t),e.$implicit.price=i})),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit;o.Cb(1),o.pc("ngModelOptions",o.rc(2,x))("ngModel",t.price)}}function E(t,e){1&t&&(o.Ub(0,"th",13),o.Pc(1," Quantity "),o.Tb())}function V(t,e){if(1&t&&(o.Ub(0,"td",14),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Rc(" ",t.item_quantity," ")}}function $(t,e){1&t&&(o.Ub(0,"th",13),o.Pc(1," Unit "),o.Tb())}function k(t,e){if(1&t&&(o.Ub(0,"td",14),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Rc(" ",t.unit_id?t.unit_id.name:""," ")}}function q(t,e){1&t&&(o.Ub(0,"th",13),o.Pc(1," Is Default "),o.Tb())}function G(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",14),o.Ub(1,"mat-radio-group",16),o.cc("ngModelChange",(function(e){return o.Dc(t),o.gc().defaultUnitId=e})),o.Ub(2,"mat-radio-button",17),o.cc("change",(function(e){return o.Dc(t),o.gc().radioChange(e)})),o.Pc(3),o.Tb(),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit,i=o.gc();o.Cb(1),o.pc("ngModel",i.defaultUnitId),o.Cb(1),o.pc("value",t._id),o.Cb(1),o.Rc(" ",""," ")}}function B(t,e){1&t&&o.Pb(0,"tr",18)}function K(t,e){1&t&&o.Pb(0,"tr",19)}let j=(()=>{class t{constructor(t,e){this.viewdata=t,this.facade=e,this.isAnyChange=!1,this.searchUserId="",this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[],this.defaultUnitId=""}ngOnInit(){this.data=this.viewdata.row,this.searchUserId=this.viewdata.searchUserId;let t=this.data.all_item_units;this.dataSource=this.data.all_item_units||[];let e=t.filter(t=>1==t.is_customer_show);e&&e.length>0&&(this.defaultUnitId=e[0]._id)}changePrice(){let t=Object.assign({},this.data);this.facade.updateItemDepoPrice({item_id:t._id,position:t.position,is_active:t.is_active,availability_status:t.availability_status,item_units:this.dataSource,user_id:this.searchUserId}),this.isAnyChange=!0}radioChange(t){let e=t.value,i=Object.assign({},this.data),a={item_id:i._id,position:i.position,is_active:i.is_active,availability_status:i.availability_status,user_id:this.searchUserId},c=[...this.dataSource];c.map(t=>{t.is_customer_show=t._id==e}),a.item_units=c,this.dataSource=c,this.facade.updateItemDepoPrice(a),this.isAnyChange=!0}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(S.a),o.Ob(d))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-item-unit-view"]],decls:22,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography",2,"min-width","30%"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","price"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","qty"],["matColumnDef","unit"],["matColumnDef","is_customer_show"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-header-cell",""],["mat-cell",""],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],[3,"ngModel","ngModelChange"],["name","is_customer_show",3,"value","change"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(o.Ub(0,"h1",0),o.Pc(1,"Item Units"),o.Tb(),o.Ub(2,"mat-dialog-content",1),o.Ub(3,"table",2),o.Sb(4,3),o.Nc(5,A,2,0,"th",4),o.Nc(6,M,2,3,"td",5),o.Rb(),o.Sb(7,6),o.Nc(8,E,2,0,"th",4),o.Nc(9,V,2,1,"td",5),o.Rb(),o.Sb(10,7),o.Nc(11,$,2,0,"th",4),o.Nc(12,k,2,1,"td",5),o.Rb(),o.Sb(13,8),o.Nc(14,q,2,0,"th",4),o.Nc(15,G,4,3,"td",5),o.Rb(),o.Nc(16,B,1,0,"tr",9),o.Nc(17,K,1,0,"tr",10),o.Tb(),o.Pb(18,"br"),o.Tb(),o.Ub(19,"mat-dialog-actions",11),o.Ub(20,"button",12),o.Pc(21,"Close"),o.Tb(),o.Tb()),2&t&&(o.Cb(3),o.pc("dataSource",e.dataSource),o.Cb(13),o.pc("matHeaderRowDef",e.displayedColumns),o.Cb(1),o.pc("matRowDefColumns",e.displayedColumns),o.Cb(3),o.pc("mat-dialog-close",e.isAnyChange))},directives:[S.j,S.g,P.o,P.c,P.i,P.b,P.k,P.n,S.d,F.b,S.e,P.h,P.a,L.t,L.d,L.p,L.s,O.b,O.a,P.j,P.m],styles:["table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{min-width:90px}"]}),t})();var H=i("tgey"),Q=i("d3UM"),z=i("M9IT"),Y=i("FKr1"),W=i("1jcm"),X=i("zkoq"),J=i("NFeN");function Z(t,e){if(1&t&&(o.Ub(0,"mat-option",39),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t.type),o.Cb(1),o.Qc(t.name)}}function tt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"mat-form-field",37),o.Ub(1,"mat-label"),o.Pc(2,"User Role"),o.Tb(),o.Ub(3,"mat-select",38),o.cc("selectionChange",(function(){return o.Dc(t),o.gc().filterRoleChanged()}))("ngModelChange",(function(e){return o.Dc(t),o.gc().searchRoleName=e})),o.Nc(4,Z,2,2,"mat-option",8),o.Tb(),o.Tb()}if(2&t){const t=o.gc();o.Cb(3),o.pc("ngModel",t.searchRoleName),o.Cb(1),o.pc("ngForOf",t.filterRoleList)}}function et(t,e){if(1&t&&(o.Ub(0,"mat-option",39),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t._id),o.Cb(1),o.Qc(t.first_name)}}function it(t,e){if(1&t){const t=o.Vb();o.Ub(0,"mat-form-field",37),o.Ub(1,"mat-label"),o.Pc(2,"User"),o.Tb(),o.Ub(3,"mat-select",40),o.cc("ngModelChange",(function(e){return o.Dc(t),o.gc().searchUserId=e})),o.Nc(4,et,2,2,"mat-option",8),o.Tb(),o.Tb()}if(2&t){const t=o.gc();o.Cb(3),o.pc("ngModel",t.searchUserId),o.Cb(1),o.pc("ngForOf",t.filterUserList)}}function at(t,e){if(1&t&&(o.Ub(0,"mat-option",39),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t.value),o.Cb(1),o.Qc(t.name)}}function ct(t,e){if(1&t&&(o.Ub(0,"mat-option",39),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t._id),o.Cb(1),o.Qc(t.name)}}function rt(t,e){if(1&t&&(o.Ub(0,"mat-option",39),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t.value),o.Cb(1),o.Qc(t.name)}}function ot(t,e){1&t&&(o.Ub(0,"th",41),o.Pc(1," Position "),o.Tb())}const nt=function(){return{standalone:!0}};function st(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",42),o.Ub(1,"input",43),o.cc("change",(function(){o.Dc(t);const i=e.$implicit;return o.gc().changePosition(i)}))("ngModelChange",(function(i){return o.Dc(t),e.$implicit.position=i})),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit;o.Cb(1),o.pc("ngModelOptions",o.rc(2,nt))("ngModel",t.position)}}function lt(t,e){1&t&&(o.Ub(0,"th",41),o.Pc(1," Name "),o.Tb())}function bt(t,e){if(1&t&&(o.Ub(0,"td",44),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Rc(" ",t.name," ")}}function mt(t,e){1&t&&(o.Ub(0,"th",41),o.Pc(1," Second Name "),o.Tb())}function ut(t,e){if(1&t&&(o.Ub(0,"td",42),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Rc(" ",t.secondary_name," ")}}function dt(t,e){1&t&&(o.Ub(0,"th",41),o.Pc(1," Category "),o.Tb())}function pt(t,e){if(1&t&&(o.Ub(0,"td",42),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Rc(" ",t.category_id?t.category_id.name:""," ")}}function ht(t,e){1&t&&(o.Ub(0,"th",45),o.Pc(1," Image "),o.Tb())}function gt(t,e){if(1&t&&(o.Ub(0,"td",42),o.Pb(1,"img",46),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.qc("src",t.thumbnail,o.Fc)}}function ft(t,e){1&t&&(o.Ub(0,"th",41),o.Pc(1," Type "),o.Tb())}function Ut(t,e){if(1&t&&(o.Ub(0,"td",42),o.Pc(1),o.Tb()),2&t){const t=e.$implicit,i=o.gc();o.Cb(1),o.Rc(" ",i.itemTypes[t.type]," ")}}function Tt(t,e){1&t&&(o.Ub(0,"th",45),o.Pc(1," Price "),o.Tb())}function Ct(t,e){if(1&t&&(o.Ub(0,"td",42),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Rc(" ",t.price," ")}}function vt(t,e){1&t&&(o.Ub(0,"th",45),o.Pc(1," Price "),o.Tb())}function It(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",42),o.Ub(1,"input",43),o.cc("change",(function(){o.Dc(t);const i=e.$implicit;return o.gc().changePosition(i)}))("ngModelChange",(function(i){return o.Dc(t),e.$implicit.price=i})),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit;o.Cb(1),o.pc("ngModelOptions",o.rc(2,nt))("ngModel",t.price)}}function yt(t,e){1&t&&(o.Ub(0,"th",45),o.Pc(1," Quantity "),o.Tb())}function Pt(t,e){if(1&t&&(o.Ub(0,"td",42),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.Cb(1),o.Qc(t.item_volume)}}function _t(t,e){1&t&&(o.Ub(0,"th",45),o.Pc(1," Unit "),o.Tb())}const Rt=function(){return[]};function Dt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",42),o.Pc(1),o.Ub(2,"a",47),o.cc("click",(function(){o.Dc(t);const i=e.$implicit;return o.gc().viewItemUnit(i)})),o.Pc(3),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit;o.Cb(1),o.Qc(t.unit_id?t.unit_id.name:""),o.Cb(1),o.pc("routerLink",o.rc(3,Rt)),o.Cb(1),o.Rc("( ",t.all_item_units&&t.all_item_units.length>0?t.all_item_units.length:""," )")}}function wt(t,e){1&t&&(o.Ub(0,"th",45),o.Pc(1," Availability Status "),o.Tb())}function Nt(t,e){if(1&t&&(o.Ub(0,"mat-option",39),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t.value),o.Cb(1),o.Qc(t.name)}}function St(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",42),o.Ub(1,"mat-select",48),o.cc("selectionChange",(function(){o.Dc(t);const i=e.$implicit;return o.gc().updateItemDepoPrice(i)}))("ngModelChange",(function(i){return o.Dc(t),e.$implicit.availability_status=i})),o.Nc(2,Nt,2,2,"mat-option",8),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit,i=o.gc();o.Cb(1),o.pc("ngModel",t.availability_status),o.Cb(1),o.pc("ngForOf",i.availabilityList)}}function Ft(t,e){1&t&&(o.Ub(0,"th",41),o.Pc(1," Active "),o.Tb())}function Lt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",42),o.Ub(1,"mat-slide-toggle",49),o.cc("ngModelChange",(function(i){return o.Dc(t),e.$implicit.is_active=i}))("change",(function(){o.Dc(t);const i=e.$implicit;return o.gc().changeActivationStatus(i)})),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit;o.Cb(1),o.pc("ngModel",t.is_active)}}function Ot(t,e){1&t&&(o.Ub(0,"th",41),o.Pc(1," Controls "),o.Tb())}function At(t,e){if(1&t){const t=o.Vb();o.Ub(0,"mat-grid-tile"),o.Ub(1,"button",54),o.cc("click",(function(){o.Dc(t);const e=o.gc().$implicit;return o.gc().openItemViewDialog(e)})),o.Ub(2,"mat-icon",55),o.Pc(3,"visibility"),o.Tb(),o.Tb(),o.Tb()}}function xt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"mat-grid-tile"),o.Ub(1,"button",56),o.cc("click",(function(){o.Dc(t);const e=o.gc().$implicit;return o.gc().navigateToEdit(e._id)})),o.Ub(2,"mat-icon",55),o.Pc(3,"create"),o.Tb(),o.Tb(),o.Tb()}2&t&&(o.Cb(1),o.pc("routerLink",o.rc(1,Rt)))}function Mt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",42),o.Ub(1,"mat-grid-list",50),o.Nc(2,At,4,0,"mat-grid-tile",51),o.Nc(3,xt,4,2,"mat-grid-tile",51),o.Ub(4,"mat-grid-tile"),o.Ub(5,"button",52),o.cc("click",(function(){o.Dc(t);const i=e.$implicit;return o.gc().deleteIcon(i._id)})),o.Ub(6,"mat-icon",53),o.Pc(7,"delete"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()}if(2&t){const t=o.gc();o.Cb(2),o.pc("ngIf",!t.isDepoView),o.Cb(1),o.pc("ngIf",!t.isDepoView)}}function Et(t,e){1&t&&o.Pb(0,"tr",57)}function Vt(t,e){1&t&&o.Pb(0,"tr",58)}const $t=function(){return[5,10,25]};let kt=(()=>{class t{constructor(t,e,i,a,c,r,o,n){this.router=t,this.settingService=e,this.usersFacade=i,this.categoryFacade=a,this.facade=c,this.sidebarNoticeService=r,this.itemUnitViewDialog=o,this.confirmService=n,this.displayedColumns=[],this.itemTypeList=[],this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.filterUserList=[],this.filterCategoryList=[],this.filterRoleList=[],this.searchRoleName="",this.searchItemType="",this.searchUserId="",this.filterCategoryId="",this.isDepoUserSearched=!1,this.availabilityStatus=null,this.availabilityList=[{name:"Available",value:_.available},{name:"Not Available",value:_.notAvailable},{name:"Notify",value:_.notify}],this.currentRole=this.settingService.user.role_id.type||"User",this.pageDetails={currentPage:1,itemsPerPage:10,totalPages:3,totalRecords:200},this.totalBanner=0}ngOnInit(){this.filterItem(),this.facade.getItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,_,this.searchUserId,this.filterCategoryId).subscribe(t=>{this.dataSource=new P.p(t.data),this.dataSource.sort=this.sort,this.pageDetails.totalRecords=t.totalCount}),this.facade.getItemTypes().subscribe(t=>{this.itemTypeList=t}),this.usersFacade.getUsersByType(1,2e3).subscribe(t=>{this.filterUserList=t.userList}),this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe(t=>{this.filterCategoryList=t}),this.usersFacade.getRoleList().subscribe(t=>{this.filterRoleList=t.data})}get isDepoView(){return!(!this.isDepoUserSearched&&this.currentRole!=D.DEPO)}get isDepoRole(){return this.currentRole==D.DEPO}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}pageEvent(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex+1,this.filterItem()}deleteIcon(t){this.confirmService.confirm("Are you sure want to delete this Item?","Confirm").subscribe(e=>{1==e&&this.facade.deleteItem(t).then(t=>this.filterItem())})}navigateToEdit(t){this.facade.loadItemDetails(t).then(e=>{this.router.navigate(["items","edit",t])})}filterItem(){this.facade.loadItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus,this.searchUserId,this.filterCategoryId),this.searchRoleName==N.DEPO&&this.searchUserId&&""!=this.searchUserId?(this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","unit_id","controls"],this.isDepoUserSearched=!0):(this.setRoleBasedColumn(),this.isDepoUserSearched=!1)}resetFilter(){this.searchItemType="",this.availabilityStatus=null,this.searchRoleName="",this.searchUserId="",this.filterCategoryId="",this.filterUserList=[]}changeActivationStatus(t){let e=Object.assign({},t);this.isDepoView?this.updateItemDepoPrice(t):this.facade.changeActivationStatus(e).then(t=>{this.filterItem()})}changePosition(t){let e=Object.assign({},t),i=[];e.subCategory_ids.map(t=>{i.push(t._id)}),e.item_type=e.type,e.category_id=e.category_id._id,e.subCategory_ids=i,this.isDepoView?this.updateItemDepoPrice(e):this.facade.updateItem(e)}filterRoleChanged(){""!=this.searchRoleName.trim()?this.usersFacade.loadUsers(1,200,"",this.searchRoleName):this.filterUserList=[]}setRoleBasedColumn(){switch(this.currentRole){case D.ADMIN:this.displayedColumns=["thumbnail","position","name","price","type","is_active","category","controls"];break;case D.DEPO:this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","unit_id","controls"];break;case D.HAWKER:this.displayedColumns=["thumbnail","position","name","category","item_volume","price","controls"];break;default:this.displayedColumns=["thumbnail","position","name","category"]}}openItemViewDialog(t){this.sidebarNoticeService.setComponent(T),this.sidebarNoticeService.setIsOpened(!0),this.facade.setItemViewData(t)}updateItemDepoPrice(t){let e={item_id:t._id,user_id:this.searchUserId,position:t.position,is_active:t.is_active,availability_status:t.availability_status,item_units:t.all_item_units};e.item_units.map(e=>{1==e.is_customer_show&&(e.price=t.price)}),this.facade.updateItemDepoPrice(e).then(t=>{this.filterItem()})}viewItemUnit(t){this.itemUnitViewDialog.open(j,{data:{row:t,searchUserId:this.searchUserId}}).afterClosed().subscribe(t=>{t&&this.filterItem()})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(c.f),o.Ob(R.d),o.Ob(v.a),o.Ob(C.a),o.Ob(d),o.Ob(w.a),o.Ob(S.c),o.Ob(I.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-items-components-item-list"]],viewQuery:function(t,e){var i;1&t&&o.Sc(y.a,!0),2&t&&o.yc(i=o.dc())&&(e.sort=i.first)},decls:80,vars:15,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[1,"form-field-full"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100","class","matero-col",4,"ngIf"],["fxFlex","33","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Item Type","name","filterType",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Category","name","filterType",3,"ngModel","ngModelChange"],["fxFlex","34","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Type","name","filterCategoryId",3,"ngModel","ngModelChange"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","style","max-width: 100px;",4,"matCellDef"],["matColumnDef","secondary_name"],["matColumnDef","category"],["matColumnDef","thumbnail"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","price"],["matColumnDef","price_edit"],["matColumnDef","item_volume"],["matColumnDef","unit_id"],["matColumnDef","availability_status"],["matColumnDef","is_active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["fxFlex","50","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","User Role","name","searchRoleName",3,"ngModel","selectionChange","ngModelChange"],[3,"value"],["placeholder","User","name","searchUserId",3,"ngModel","ngModelChange"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-cell","",2,"max-width","100px"],["mat-header-cell",""],["alt","Item Image","width","100px","height","50px",3,"src"],[3,"routerLink","click"],["placeholder","Type","name","availability_status",3,"ngModel","selectionChange","ngModelChange"],["color","primary",3,"ngModel","ngModelChange","change"],["cols","3","rowHeight","50px"],[4,"ngIf"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-icon-button","","aria-label","View",3,"click"],["color","primary"],["mat-icon-button","","aria-label","Edit",3,"routerLink","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(o.Pb(0,"page-header"),o.Ub(1,"section"),o.Ub(2,"a",0),o.Pc(3," Add New "),o.Tb(),o.Tb(),o.Pb(4,"br"),o.Ub(5,"div",1),o.Ub(6,"div",2),o.Ub(7,"mat-card"),o.Ub(8,"mat-card-title"),o.Pc(9,"Filter"),o.Tb(),o.Ub(10,"form",3),o.Ub(11,"div",4),o.Nc(12,tt,5,2,"mat-form-field",5),o.Nc(13,it,5,2,"mat-form-field",5),o.Ub(14,"mat-form-field",6),o.Ub(15,"mat-label"),o.Pc(16,"Item Type"),o.Tb(),o.Ub(17,"mat-select",7),o.cc("ngModelChange",(function(t){return e.searchItemType=t})),o.Nc(18,at,2,2,"mat-option",8),o.Tb(),o.Tb(),o.Ub(19,"mat-form-field",6),o.Ub(20,"mat-label"),o.Pc(21,"Category"),o.Tb(),o.Ub(22,"mat-select",9),o.cc("ngModelChange",(function(t){return e.filterCategoryId=t})),o.Nc(23,ct,2,2,"mat-option",8),o.Tb(),o.Tb(),o.Ub(24,"mat-form-field",10),o.Ub(25,"mat-label"),o.Pc(26,"Availability"),o.Tb(),o.Ub(27,"mat-select",11),o.cc("ngModelChange",(function(t){return e.availabilityStatus=t})),o.Nc(28,rt,2,2,"mat-option",8),o.Tb(),o.Tb(),o.Ub(29,"div",12),o.Ub(30,"button",13),o.cc("click",(function(){return e.filterItem()})),o.Pc(31,"Search"),o.Tb(),o.Ub(32,"button",14),o.cc("click",(function(){return e.resetFilter()})),o.Pc(33,"Reset"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(34,"div",15),o.Ub(35,"table",16),o.Sb(36,17),o.Ub(37,"form"),o.Nc(38,ot,2,0,"th",18),o.Nc(39,st,2,3,"td",19),o.Tb(),o.Rb(),o.Sb(40,20),o.Nc(41,lt,2,0,"th",18),o.Nc(42,bt,2,1,"td",21),o.Rb(),o.Sb(43,22),o.Nc(44,mt,2,0,"th",18),o.Nc(45,ut,2,1,"td",19),o.Rb(),o.Sb(46,23),o.Nc(47,dt,2,0,"th",18),o.Nc(48,pt,2,1,"td",19),o.Rb(),o.Sb(49,24),o.Nc(50,ht,2,0,"th",25),o.Nc(51,gt,2,1,"td",19),o.Rb(),o.Sb(52,26),o.Nc(53,ft,2,0,"th",18),o.Nc(54,Ut,2,1,"td",19),o.Rb(),o.Sb(55,27),o.Nc(56,Tt,2,0,"th",25),o.Nc(57,Ct,2,1,"td",19),o.Rb(),o.Sb(58,28),o.Nc(59,vt,2,0,"th",25),o.Nc(60,It,2,3,"td",19),o.Rb(),o.Sb(61,29),o.Nc(62,yt,2,0,"th",25),o.Nc(63,Pt,2,1,"td",19),o.Rb(),o.Sb(64,30),o.Nc(65,_t,2,0,"th",25),o.Nc(66,Dt,4,4,"td",19),o.Rb(),o.Sb(67,31),o.Nc(68,wt,2,0,"th",25),o.Ub(69,"form"),o.Nc(70,St,3,2,"td",19),o.Tb(),o.Rb(),o.Sb(71,32),o.Nc(72,Ft,2,0,"th",18),o.Nc(73,Lt,2,1,"td",19),o.Rb(),o.Sb(74,33),o.Nc(75,Ot,2,0,"th",18),o.Nc(76,Mt,8,2,"td",19),o.Rb(),o.Nc(77,Et,1,0,"tr",34),o.Nc(78,Vt,1,0,"tr",35),o.Tb(),o.Ub(79,"mat-paginator",36),o.cc("page",(function(t){return e.pageEvent(t)})),o.Tb(),o.Tb()),2&t&&(o.Cb(12),o.pc("ngIf",!e.isDepoRole),o.Cb(1),o.pc("ngIf",!e.isDepoRole),o.Cb(4),o.pc("ngModel",e.searchItemType),o.Cb(1),o.pc("ngForOf",e.itemTypeList),o.Cb(4),o.pc("ngModel",e.filterCategoryId),o.Cb(1),o.pc("ngForOf",e.filterCategoryList),o.Cb(4),o.pc("ngModel",e.availabilityStatus),o.Cb(1),o.pc("ngForOf",e.availabilityList),o.Cb(7),o.pc("dataSource",e.dataSource),o.Cb(42),o.pc("matHeaderRowDef",e.displayedColumns),o.Cb(1),o.pc("matRowDefColumns",e.displayedColumns),o.Cb(1),o.pc("length",e.pageDetails.totalRecords)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",o.rc(14,$t)))},directives:[H.a,F.a,c.i,p.c,p.a,h.a,h.c,L.x,L.q,L.r,p.d,f.o,g.c,g.g,Q.a,L.p,L.s,f.n,F.b,P.o,y.a,P.c,P.i,P.b,P.k,P.n,z.a,Y.p,P.h,y.b,P.a,L.t,L.d,W.a,X.a,X.c,J.a,c.g,P.j,P.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}"]}),t})();var qt=i("FtGj"),Gt=i("rGne"),Bt=i("qFsG"),Kt=i("A5z7"),jt=i("sYmb");function Ht(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function Qt(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function zt(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function Yt(t,e){if(1&t&&(o.Ub(0,"mat-option",30),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t._id),o.Cb(1),o.Qc(t.name)}}function Wt(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function Xt(t,e){if(1&t&&(o.Ub(0,"mat-option",30),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t._id),o.Cb(1),o.Qc(t.name)}}function Jt(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function Zt(t,e){if(1&t&&(o.Ub(0,"mat-option",30),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t.value),o.Cb(1),o.Qc(t.name)}}function te(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function ee(t,e){if(1&t&&(o.Ub(0,"mat-option",30),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t._id),o.Cb(1),o.Qc(t.name)}}function ie(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function ae(t,e){if(1&t&&(o.Ub(0,"mat-option",30),o.Pc(1),o.Tb()),2&t){const t=e.$implicit;o.pc("value",t._id),o.Cb(1),o.Qc(t.name)}}function ce(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function re(t,e){if(1&t){const t=o.Vb();o.Ub(0,"mat-chip",31),o.cc("removed",(function(){o.Dc(t);const i=e.$implicit;return o.gc().removetag(i)})),o.Pc(1),o.Ub(2,"mat-icon",32),o.Pc(3,"cancel"),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit;o.Cb(1),o.Rc(" ",t," ")}}function oe(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function ne(t,e){if(1&t){const t=o.Vb();o.Ub(0,"mat-chip",31),o.cc("removed",(function(){o.Dc(t);const i=e.$implicit;return o.gc().removepic(i)})),o.Pc(1),o.Ub(2,"mat-icon",32),o.Pc(3,"cancel"),o.Tb(),o.Tb()}if(2&t){const t=e.$implicit;o.Cb(1),o.Rc(" ",t," ")}}function se(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function le(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}function be(t,e){1&t&&(o.Ub(0,"mat-error"),o.Pc(1),o.hc(2,"translate"),o.Tb()),2&t&&(o.Cb(1),o.Rc(" ",o.ic(2,1,"validations.required")," "))}const me=function(){return["home","items","new"]},ue=function(){return["/items"]};let de=(()=>{class t{constructor(t,e,i,a,c,r){this.fb=t,this.router=e,this.activeRoute=i,this.facade=a,this.unitFacde=c,this.categoryFacade=r,this.recommendedList=[],this.isEditMode=!1,this.activeEditId="",this.separatorKeysCodes=[qt.g,qt.c],this.cateTagValues=[],this.subCateTagValues=[],this.itemForm=this.fb.group({name:["",[L.w.required]],secondary_name:[""],price:[0],is_active:[!0],category_id:[""],unit_id:[""],item_type:[""],description:[""],benefits:[""],category_tags:[[]],thumbnail:[""],picture:[[]],recommended_items:[[]],subCategory_ids:[[]]}),this.activeRoute.params.subscribe(t=>{null!=t.id&&null!=t.id&&""!=t.id&&(this.isEditMode=!0,this.activeEditId=t.id)})}ngOnInit(){this.categoryFacade.loadParentCategories(),this.unitFacde.loadUnites(1,500),this.categoryFacade.getParentCategories().subscribe(t=>{this.categoryList=t}),this.categoryFacade.getCategoriesByParentId().subscribe(t=>{this.subCategoryList=t.data}),this.unitFacde.getUnites().subscribe(t=>{this.unitList=t.data}),this.facade.getItemTypes().subscribe(t=>{this.itemTypeList=t}),this.facade.getSallableItemList().subscribe(t=>{this.recommendedList=t.data}),this.isEditMode&&this.facade.getItemDetails(this.activeEditId).subscribe(t=>{let e=Object.assign({},t);this.itemForm.patchValue(t),this.itemForm.patchValue({item_type:e.type})},t=>console.error(t))}get is_active_value(){return!!this.itemForm.get("is_active").value&&this.itemForm.get("is_active").value}onFormSubmit(t){if(console.log("form value ",this.itemForm.value,this.itemForm.valid),this.itemForm.valid)if(this.isEditMode){let t=this.itemForm.value;t._id=this.activeEditId,this.facade.updateItem(t).then(t=>{this.itemForm.reset(),this.router.navigate(["items"])})}else this.facade.newItem(this.itemForm.value).then(t=>{this.itemForm.reset(),this.router.navigate(["items"])})}addtag(t){const e=t.input,i=t.value;let a=[...this.itemForm.get("category_tags").value];(i||"").trim()&&(a.push(i.trim()),this.itemForm.get("category_tags").setValue(a)),e&&(e.value="")}removetag(t){let e=[...this.itemForm.get("category_tags").value];const i=e.indexOf(t);i>=0&&(e.splice(i,1),this.itemForm.get("category_tags").setValue(e))}addpic(t){const e=t.input,i=t.value;let a=[...this.itemForm.get("picture").value];(i||"").trim()&&(a.push(i.trim()),this.itemForm.get("picture").setValue(a)),e&&(e.value="")}removepic(t){let e=[...this.itemForm.get("picture").value];const i=e.indexOf(t);i>=0&&(e.splice(i,1),this.itemForm.get("picture").setValue(e))}onCategorySelectionChange(){this.cateTagValues=[];let t=this.itemForm.get("category_id").value;this.categoryList.filter(e=>{t==e._id&&this.cateTagValues.push(e.name)}),this.itemForm.patchValue({category_tags:[].concat(...this.cateTagValues)}),this.itemForm.get("subCategory_ids").setValue([]),this.loadSubCategories(t)}onSubCategorySelectionChange(){this.subCateTagValues=[];let t=this.itemForm.get("subCategory_ids").value;this.subCategoryList.filter(e=>{t.indexOf(e._id)>=0&&this.subCateTagValues.push(e.name)}),this.itemForm.patchValue({category_tags:[].concat(...this.cateTagValues,this.subCateTagValues)})}loadSubCategories(t){this.categoryFacade.loadCategories(1,200,t,"")}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(L.f),o.Ob(c.f),o.Ob(c.a),o.Ob(d),o.Ob(Gt.a),o.Ob(C.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-items-components-item-add"]],decls:103,vars:33,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","25","fxFlex.lt-sm","100"],["matInput","","placeholder","Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Secondary Name","formControlName","secondary_name","required",""],["matInput","","placeholder","Price","formControlName","price","required","","type","number"],["formControlName","is_active","color","primary",2,"margin-top","20px"],["formControlName","category_id","placeholder","Category","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subCategory_ids","placeholder","Sub Category","required","","multiple","",3,"selectionChange"],["formControlName","item_type","placeholder","Type","required",""],["formControlName","unit_id","placeholder","Unit","required",""],["fxFlex","50","fxFlex.lt-sm","100"],["formControlName","recommended_items","placeholder","Recommendation","multiple",""],["matInput","","placeholder","Thumbnail","formControlName","thumbnail","required",""],["aria-label","Tags"],["chipList",""],["selectable","true","removable","true",3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-label","Pictures"],["picList",""],["placeholder","Pictures",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","placeholder","Description","formControlName","description","required",""],["matInput","","placeholder","Benefits","formControlName","benefits","required",""],["mat-raised-button","","color","primary","type","submit",1,"m-t-8",2,"margin-right","5px"],["mat-raised-button","","type","button",1,"m-t-8",3,"routerLink"],[3,"value"],["selectable","true","removable","true",3,"removed"],["matChipRemove",""]],template:function(t,e){if(1&t&&(o.Pb(0,"page-header",0),o.Ub(1,"div",1),o.Ub(2,"div",2),o.Ub(3,"mat-card"),o.Ub(4,"mat-card-title"),o.Pc(5),o.Tb(),o.Ub(6,"form",3),o.cc("submit",(function(t){return e.onFormSubmit(t)})),o.Ub(7,"div",4),o.Ub(8,"div",5),o.Ub(9,"mat-form-field"),o.Ub(10,"mat-label"),o.Pc(11,"Name"),o.Tb(),o.Pb(12,"input",6),o.Nc(13,Ht,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(14,"div",5),o.Ub(15,"mat-form-field"),o.Ub(16,"mat-label"),o.Pc(17,"Secondary Name"),o.Tb(),o.Pb(18,"input",8),o.Nc(19,Qt,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(20,"div",5),o.Ub(21,"mat-form-field"),o.Ub(22,"mat-label"),o.Pc(23,"Price"),o.Tb(),o.Pb(24,"input",9),o.Nc(25,zt,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(26,"div",5),o.Ub(27,"mat-slide-toggle",10),o.Pc(28),o.Tb(),o.Tb(),o.Ub(29,"div",5),o.Ub(30,"mat-form-field"),o.Ub(31,"mat-label"),o.Pc(32,"Category"),o.Tb(),o.Ub(33,"mat-select",11),o.cc("selectionChange",(function(){return e.onCategorySelectionChange()})),o.Nc(34,Yt,2,2,"mat-option",12),o.Tb(),o.Nc(35,Wt,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(36,"div",5),o.Ub(37,"mat-form-field"),o.Ub(38,"mat-label"),o.Pc(39,"Sub Category"),o.Tb(),o.Ub(40,"mat-select",13),o.cc("selectionChange",(function(){return e.onSubCategorySelectionChange()})),o.Nc(41,Xt,2,2,"mat-option",12),o.Tb(),o.Nc(42,Jt,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(43,"div",5),o.Ub(44,"mat-form-field"),o.Ub(45,"mat-label"),o.Pc(46,"Type"),o.Tb(),o.Ub(47,"mat-select",14),o.Nc(48,Zt,2,2,"mat-option",12),o.Tb(),o.Nc(49,te,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(50,"div",5),o.Ub(51,"mat-form-field"),o.Ub(52,"mat-label"),o.Pc(53,"Unit"),o.Tb(),o.Ub(54,"mat-select",15),o.Nc(55,ee,2,2,"mat-option",12),o.Tb(),o.Nc(56,ie,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(57,"div",16),o.Ub(58,"mat-form-field"),o.Ub(59,"mat-label"),o.Pc(60,"Recommendation"),o.Tb(),o.Ub(61,"mat-select",17),o.Nc(62,ae,2,2,"mat-option",12),o.Tb(),o.Tb(),o.Tb(),o.Ub(63,"div",16),o.Ub(64,"mat-form-field"),o.Ub(65,"mat-label"),o.Pc(66,"Thumbnail"),o.Tb(),o.Pb(67,"input",18),o.Nc(68,ce,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(69,"div",16),o.Ub(70,"mat-form-field"),o.Ub(71,"mat-label"),o.Pc(72,"Tags"),o.Tb(),o.Ub(73,"mat-chip-list",19,20),o.Nc(75,re,4,1,"mat-chip",21),o.Ub(76,"input",22),o.cc("matChipInputTokenEnd",(function(t){return e.addtag(t)})),o.Tb(),o.Tb(),o.Nc(77,oe,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(78,"div",16),o.Ub(79,"mat-form-field"),o.Ub(80,"mat-label"),o.Pc(81,"Pictures"),o.Tb(),o.Ub(82,"mat-chip-list",23,24),o.Nc(84,ne,4,1,"mat-chip",21),o.Ub(85,"input",25),o.cc("matChipInputTokenEnd",(function(t){return e.addpic(t)})),o.Tb(),o.Tb(),o.Nc(86,se,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(87,"div",16),o.Ub(88,"mat-form-field"),o.Ub(89,"mat-label"),o.Pc(90,"Description"),o.Tb(),o.Pb(91,"textarea",26),o.Nc(92,le,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Ub(93,"div",16),o.Ub(94,"mat-form-field"),o.Ub(95,"mat-label"),o.Pc(96,"Benefits"),o.Tb(),o.Pb(97,"textarea",27),o.Nc(98,be,3,3,"mat-error",7),o.Tb(),o.Tb(),o.Tb(),o.Ub(99,"button",28),o.Pc(100,"Save"),o.Tb(),o.Ub(101,"button",29),o.Pc(102," Back"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t){const t=o.zc(74),i=o.zc(83);o.qc("title",e.isEditMode?"Edit Item":"New Item"),o.pc("nav",o.rc(31,me)),o.Cb(5),o.Rc("",e.isEditMode?"Edit Item":"New Item"," "),o.Cb(1),o.pc("formGroup",e.itemForm),o.Cb(7),o.pc("ngIf",e.itemForm.get("name").invalid),o.Cb(6),o.pc("ngIf",e.itemForm.get("secondary_name").invalid),o.Cb(6),o.pc("ngIf",e.itemForm.get("price").invalid),o.Cb(3),o.Rc(" ",e.is_active_value?"Active":"Inactive"," "),o.Cb(6),o.pc("ngForOf",e.categoryList),o.Cb(1),o.pc("ngIf",e.itemForm.get("category_id").invalid),o.Cb(6),o.pc("ngForOf",e.subCategoryList),o.Cb(1),o.pc("ngIf",e.itemForm.get("subCategory_ids").invalid),o.Cb(6),o.pc("ngForOf",e.itemTypeList),o.Cb(1),o.pc("ngIf",e.itemForm.get("item_type").invalid),o.Cb(6),o.pc("ngForOf",e.unitList),o.Cb(1),o.pc("ngIf",e.itemForm.get("unit_id").invalid),o.Cb(6),o.pc("ngForOf",e.recommendedList),o.Cb(6),o.pc("ngIf",e.itemForm.get("thumbnail").invalid),o.Cb(7),o.pc("ngForOf",e.itemForm.get("category_tags").value),o.Cb(1),o.pc("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),o.Cb(1),o.pc("ngIf",e.itemForm.get("category_tags").invalid),o.Cb(7),o.pc("ngForOf",e.itemForm.get("picture").value),o.Cb(1),o.pc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),o.Cb(1),o.pc("ngIf",e.itemForm.get("picture").invalid),o.Cb(6),o.pc("ngIf",e.itemForm.get("description").invalid),o.Cb(6),o.pc("ngIf",e.itemForm.get("benefits").invalid),o.Cb(3),o.pc("routerLink",o.rc(32,ue))}},directives:[H.a,p.c,p.a,h.a,h.c,L.x,L.q,L.k,p.d,g.c,g.g,Bt.b,L.d,L.p,L.i,L.v,f.o,L.t,W.a,Q.a,f.n,Kt.c,Kt.b,F.b,c.g,g.b,Y.p,Kt.a,J.a,Kt.d],pipes:[jt.d],styles:[""]}),t})();const pe=[{path:"",component:kt},{path:"new",component:de},{path:"edit/:id",component:de}];let he=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(pe)],c.j]}),t})(),ge=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[a.a,he]]}),t})()}}]);