!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{XdEn:function(e,a,r){"use strict";r.r(a),r.d(a,"ItemsModule",(function(){return we}));var c,o,s,l=r("PCNd"),b=r("tyNb"),m=r("2Vo4"),u=r("fXoL"),d=((c=function(){function t(){i(this,t),this.items=new m.a({}),this.editItem=new m.a({}),this.itemTypes=new m.a([{name:"Sellable",value:"SELLABLE"},{name:"Packaging Material",value:"PACKAGING_MATERIAL"},{name:"Raw Material",value:"RAW_MATERIAL"}]),this.itemViewData=new m.a({}),this.isItemsSet=!1,this.isItemDetailsSet=!1}return n(t,[{key:"getItemList",value:function(){return this.items.asObservable()}},{key:"setItemList",value:function(t){this.isItemsSet=!0,this.items.next(t)}},{key:"getEditItem",value:function(){return this.editItem.asObservable()}},{key:"setEditItem",value:function(t){this.isItemDetailsSet=!0,this.editItem.next(t)}},{key:"getItemTypes",value:function(){return this.itemTypes.asObservable()}},{key:"setItemViewData",value:function(t){this.itemViewData.next(t)}},{key:"getItemViewData",value:function(){return this.itemViewData.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||c)},c.\u0275prov=u.Kb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),p=r("vkgz"),f=r("AytR"),h=r("tk/3"),g=((o=function(){function t(e){i(this,t),this.http=e,this.baseURl=f.a.SERVER_ORIGIN}return n(t,[{key:"getItemList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=this.baseURl+"/api/item/get_admin_item_list?currentPage=".concat(t,"&currentPageSize=").concat(e);return null!=i&&null!=i&&""!=i.trim()&&(c+="&item_type="+i),null!=a&&null!=a&&(c+="&availability_status="+a),null!=n&&null!=n&&""!=n.trim()&&(c+="&user_id="+n),null!=r&&null!=r&&""!=r.trim()&&(c+="&category_id="+r),this.http.get(c)}},{key:"deleteItem",value:function(t){return this.http.delete(this.baseURl+"/api/item/delete_Item/"+t)}},{key:"getItemDetailsById",value:function(t){return this.http.get(this.baseURl+"/api/item/get_Itemdetail?item_id="+t)}},{key:"updateActivationStatus",value:function(t,e){return this.http.put(this.baseURl+"/api/item/update_Active_Deactive_Item",{item_id:e,is_active:t})}},{key:"newitem",value:function(t){return this.http.post(this.baseURl+"/api/item/add_Item",t)}},{key:"updateItem",value:function(t){return this.http.put(this.baseURl+"/api/item/update/"+t._id,t)}},{key:"updateItemDepoPrice",value:function(t){return this.http.put(this.baseURl+"/api/item/update_itemdepo_price",t)}}]),t}()).\u0275fac=function(t){return new(t||o)(u.Yb(h.b))},o.\u0275prov=u.Kb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),v=r("5eHb"),T=((s=function(){function t(e,a,n){i(this,t),this.api=e,this.state=a,this.toster=n}return n(t,[{key:"loadItemList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";this.api.getItemList(e,i,a,n,r,c).subscribe((function(e){t.state.setItemList(e)}),(function(t){return console.error("api call error from load items ",t)}))}},{key:"getItemList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return this.state.isItemsSet||this.loadItemList(t,e,i,a,n,r),this.state.getItemList().pipe(Object(p.a)((function(t){return t})))}},{key:"getSallableItemList",value:function(){return this.api.getItemList(1,200,"SELLABLE").pipe(Object(p.a)((function(t){return t})))}},{key:"newItem",value:function(t){var e=this;return this.api.newitem(t).toPromise().then((function(t){return e.loadItemList(),e.toster.success("Item Successfully Created","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from new Item ",t),t}))}},{key:"deleteItem",value:function(t){var e=this;return this.api.deleteItem(t).toPromise().then((function(t){return e.toster.success("Item Successfully Deleted","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from Delete Item",t),t}))}},{key:"getItemDetails",value:function(t){return this.state.isItemDetailsSet||this.loadItemDetails(t),this.state.getEditItem().pipe(Object(p.a)((function(t){return t})))}},{key:"loadItemDetails",value:function(t){var e=this;return this.api.getItemDetailsById(t).toPromise().then((function(t){return e.state.setEditItem(t.item),t})).catch((function(t){throw console.error("api call error from load Item Details",t),t}))}},{key:"updateItem",value:function(t){var e=this;return this.api.updateItem(t).toPromise().then((function(t){return e.loadItemList(),e.toster.success("Item Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from Update item ",t),t}))}},{key:"changeActivationStatus",value:function(t){var e=this;return this.api.updateActivationStatus(t.is_active,t._id).toPromise().then((function(t){return e.toster.success("Unit Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from change activation status Unit",t),t}))}},{key:"getItemTypes",value:function(){return this.state.getItemTypes().pipe(Object(p.a)((function(t){return t})))}},{key:"setItemViewData",value:function(t){this.state.setItemViewData(t)}},{key:"getItemViewData",value:function(){return this.state.getItemViewData().pipe(Object(p.a)((function(t){return t})))}},{key:"updateItemDepoPrice",value:function(t){var e=this;return this.api.updateItemDepoPrice(t).toPromise().then((function(t){return e.toster.success("Item Depo Successfully Updated","Success",{timeOut:3e3}),t})).catch((function(t){throw console.error("api call error from updateItemDepoPrice",t),t}))}}]),t}()).\u0275fac=function(t){return new(t||s)(u.Yb(g),u.Yb(d),u.Yb(v.b))},s.\u0275prov=u.Kb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),y=r("XiUz"),U=r("Wp6s"),C=r("kmnG"),I=r("ofXK");function P(t,e){1&t&&u.Pb(0,"img",7),2&t&&u.qc("src",e.$implicit,u.Fc)}var _,D,R=((_=function(){function t(e){i(this,t),this.facde=e,this.viewData={},this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[]}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.facde.getItemViewData().subscribe((function(e){t.viewData=e,t.dataSource=t.viewData.all_item_units}))}}]),t}()).\u0275fac=function(t){return new(t||_)(u.Ob(T))},_.\u0275cmp=u.Ib({type:_,selectors:[["app-item-view"]],decls:84,vars:11,consts:[["fxLayout","row wrap",1,"matero-row"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","15","fxFlex.lt-sm","100"],["fxFlex","85","fxFlex.lt-sm","100"],["alt","Item Thumbnail","height","60px","width","80px",3,"src"],["fxFlex","35","fxFlex.lt-sm","100"],["alt","Item Picture","height","60px","width","80px",3,"src",4,"ngFor","ngForOf"],["alt","Item Picture","height","60px","width","80px",3,"src"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Ub(1,"mat-card"),u.Ub(2,"mat-card-title"),u.Pc(3,"Item View"),u.Tb(),u.Ub(4,"div",1),u.Ub(5,"div",2),u.Ub(6,"mat-label"),u.Ub(7,"strong"),u.Pc(8," Thumbnail "),u.Tb(),u.Pc(9,":"),u.Tb(),u.Tb(),u.Ub(10,"div",3),u.Pb(11,"img",4),u.Tb(),u.Ub(12,"div",2),u.Ub(13,"mat-label"),u.Ub(14,"strong"),u.Pc(15," Name "),u.Tb(),u.Tb(),u.Tb(),u.Ub(16,"div",5),u.Ub(17,"mat-label"),u.Pc(18),u.Tb(),u.Tb(),u.Ub(19,"div",2),u.Ub(20,"mat-label"),u.Ub(21,"strong"),u.Pc(22,"Category "),u.Tb(),u.Tb(),u.Tb(),u.Ub(23,"div",5),u.Ub(24,"mat-label"),u.Pc(25),u.Tb(),u.Tb(),u.Ub(26,"div",2),u.Ub(27,"mat-label"),u.Ub(28,"strong"),u.Pc(29," Type "),u.Tb(),u.Tb(),u.Tb(),u.Ub(30,"div",5),u.Ub(31,"mat-label"),u.Pc(32),u.Tb(),u.Tb(),u.Ub(33,"div",2),u.Ub(34,"mat-label"),u.Ub(35,"strong"),u.Pc(36," Qty "),u.Tb(),u.Tb(),u.Tb(),u.Ub(37,"div",5),u.Ub(38,"mat-label"),u.Pc(39),u.Tb(),u.Tb(),u.Ub(40,"div",2),u.Ub(41,"mat-label"),u.Ub(42,"strong"),u.Pc(43," Position "),u.Tb(),u.Tb(),u.Tb(),u.Ub(44,"div",5),u.Ub(45,"mat-label"),u.Pc(46),u.Tb(),u.Tb(),u.Ub(47,"div",2),u.Ub(48,"mat-label"),u.Ub(49,"strong"),u.Pc(50," is Active "),u.Tb(),u.Tb(),u.Tb(),u.Ub(51,"div",5),u.Ub(52,"mat-label"),u.Pc(53),u.Tb(),u.Tb(),u.Ub(54,"div",2),u.Ub(55,"mat-label"),u.Ub(56,"strong"),u.Pc(57," Price "),u.Tb(),u.Tb(),u.Tb(),u.Ub(58,"div",5),u.Ub(59,"mat-label"),u.Pc(60),u.Tb(),u.Tb(),u.Ub(61,"div",2),u.Ub(62,"mat-label"),u.Ub(63,"strong"),u.Pc(64," Availability "),u.Tb(),u.Tb(),u.Tb(),u.Ub(65,"div",5),u.Ub(66,"mat-label"),u.Pc(67),u.Tb(),u.Tb(),u.Ub(68,"div",2),u.Ub(69,"mat-label"),u.Ub(70,"strong"),u.Pc(71," Unit Name"),u.Tb(),u.Tb(),u.Tb(),u.Ub(72,"div",5),u.Ub(73,"mat-label"),u.Pc(74),u.Tb(),u.Tb(),u.Pb(75,"div",2),u.Pb(76,"div",5),u.Ub(77,"div",2),u.Ub(78,"mat-label"),u.Ub(79,"strong"),u.Pc(80," Pictures "),u.Tb(),u.Pc(81,":"),u.Tb(),u.Tb(),u.Ub(82,"div",3),u.Nc(83,P,1,1,"img",6),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&t&&(u.Cb(11),u.qc("src",e.viewData.thumbnail,u.Fc),u.Cb(7),u.Rc(": ",e.viewData.name,""),u.Cb(7),u.Rc(": ",e.viewData.category_id?e.viewData.category_id.name:"",""),u.Cb(7),u.Rc(": ",e.itemTypes[e.viewData.type],""),u.Cb(7),u.Rc(": ",e.viewData.item_volume,""),u.Cb(7),u.Rc(": ",e.viewData.position,""),u.Cb(7),u.Rc(": ",e.viewData.is_active?"Yes":"No",""),u.Cb(7),u.Rc(": ",e.viewData.price,""),u.Cb(7),u.Rc(": ",e.viewData.availability_status,""),u.Cb(7),u.Rc(": ",e.viewData.unit_id?e.viewData.unit_id.name:"",""),u.Cb(9),u.pc("ngForOf",e.viewData.picture))},directives:[y.c,U.a,U.c,y.d,y.a,C.g,I.n],styles:[""]}),_),w=r("uEtv"),S=r("WW+1"),N=r("Xibt"),F=r("Dh3D"),L=r("+0xr"),O=((D={}).available="TRUE",D.notAvailable="FALSE",D.notify="NOTIFY",D),k=r("ey9i"),A=function(t){return t.ADMIN="ADMIN",t.DEPO="DEPO",t.RETAILER="RETAILER",t.PURCHASE_MANAGER="PURCHASE_MANAGER",t.DELIVERY_BOY="DELIVERY_BOY",t.HAWKER="HAWKER",t.CUSTOMER="CUSTOMER",t.MANUFACTURING_PLANT="MANUFACTURING_PLANT",t.SUPPLIER="SUPPLIER",t}({}),E=r("dKfg"),M=function(t){return t.USER="USER",t.SUPPLIER="SUPPLIER",t.HOCKER="HOCKER",t.DELIVERYBOY="DELIVERYBOY",t.PURCHASEMANAGER="PURCHASEMANAGER",t.DEPO="DEPO",t.MANUFACTUREPLANT="MANUFACTUREPLANT",t}({}),x=r("0IaG"),V=r("bTqV"),$=r("3Pt+"),q=r("QibW");function G(t,e){1&t&&(u.Ub(0,"th",13),u.Pc(1," Price "),u.Tb())}var j=function(){return{standalone:!0}};function B(t,e){if(1&t){var i=u.Vb();u.Ub(0,"td",14),u.Ub(1,"input",15),u.cc("change",(function(){u.Dc(i);var t=e.$implicit;return u.gc().changePrice(t)}))("ngModelChange",(function(t){return u.Dc(i),e.$implicit.price=t})),u.Tb(),u.Tb()}if(2&t){var a=e.$implicit;u.Cb(1),u.pc("ngModelOptions",u.rc(2,j))("ngModel",a.price)}}function K(t,e){1&t&&(u.Ub(0,"th",13),u.Pc(1," item Quantity "),u.Tb())}function H(t,e){if(1&t&&(u.Ub(0,"td",14),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.Cb(1),u.Rc(" ",i.item_quantity," ")}}function Q(t,e){1&t&&(u.Ub(0,"th",13),u.Pc(1," Unit "),u.Tb())}function z(t,e){if(1&t&&(u.Ub(0,"td",14),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.Cb(1),u.Rc(" ",i.unit_id," ")}}function Y(t,e){1&t&&(u.Ub(0,"th",13),u.Pc(1," Is Customer Show "),u.Tb())}function W(t,e){if(1&t&&(u.Ub(0,"td",14),u.Ub(1,"mat-radio-group"),u.Ub(2,"mat-radio-button",16),u.Pc(3),u.Tb(),u.Tb(),u.Tb()),2&t){var i=e.$implicit;u.Cb(2),u.pc("checked",i.is_customer_show)("value",i),u.Cb(1),u.Rc(" ",""," ")}}function X(t,e){1&t&&u.Pb(0,"tr",17)}function J(t,e){1&t&&u.Pb(0,"tr",18)}var Z,tt=((Z=function(){function t(e,a){i(this,t),this.data=e,this.facade=a,this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[],this.favoriteSeason=""}return n(t,[{key:"ngOnInit",value:function(){this.dataSource=this.data.all_item_units||[]}},{key:"changePrice",value:function(){var t=Object.assign({},this.data);this.facade.updateItemDepoPrice({item_id:t._id,position:t.position,is_active:t.is_active,availability_status:t.availability_status,item_units:this.dataSource,user_id:"5fbf5b9f5724111c6f29e903"})}}]),t}()).\u0275fac=function(t){return new(t||Z)(u.Ob(x.a),u.Ob(T))},Z.\u0275cmp=u.Ib({type:Z,selectors:[["app-item-unit-view"]],decls:22,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography",2,"min-width","30%"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","price"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","qty"],["matColumnDef","unit"],["matColumnDef","is_customer_show"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-header-cell",""],["mat-cell",""],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],["name","is_customer_show",3,"checked","value"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(u.Ub(0,"h1",0),u.Pc(1,"Item Units"),u.Tb(),u.Ub(2,"mat-dialog-content",1),u.Ub(3,"table",2),u.Sb(4,3),u.Nc(5,G,2,0,"th",4),u.Nc(6,B,2,3,"td",5),u.Rb(),u.Sb(7,6),u.Nc(8,K,2,0,"th",4),u.Nc(9,H,2,1,"td",5),u.Rb(),u.Sb(10,7),u.Nc(11,Q,2,0,"th",4),u.Nc(12,z,2,1,"td",5),u.Rb(),u.Sb(13,8),u.Nc(14,Y,2,0,"th",4),u.Nc(15,W,4,3,"td",5),u.Rb(),u.Nc(16,X,1,0,"tr",9),u.Nc(17,J,1,0,"tr",10),u.Tb(),u.Pb(18,"br"),u.Tb(),u.Ub(19,"mat-dialog-actions",11),u.Ub(20,"button",12),u.Pc(21,"Close"),u.Tb(),u.Tb()),2&t&&(u.Cb(3),u.pc("dataSource",e.dataSource),u.Cb(13),u.pc("matHeaderRowDef",e.displayedColumns),u.Cb(1),u.pc("matRowDefColumns",e.displayedColumns))},directives:[x.j,x.g,L.o,L.c,L.i,L.b,L.k,L.n,x.d,V.b,x.e,L.h,L.a,$.t,$.d,$.p,$.s,q.b,q.a,L.j,L.m],styles:["table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{min-width:70px}"]}),Z),et=r("tgey"),it=r("d3UM"),at=r("M9IT"),nt=r("FKr1"),rt=r("1jcm"),ct=r("zkoq"),ot=r("NFeN");function st(t,e){if(1&t&&(u.Ub(0,"mat-option",35),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i.type),u.Cb(1),u.Qc(i.name)}}function lt(t,e){if(1&t){var i=u.Vb();u.Ub(0,"mat-form-field",5),u.Ub(1,"mat-label"),u.Pc(2,"User Role"),u.Tb(),u.Ub(3,"mat-select",34),u.cc("selectionChange",(function(){return u.Dc(i),u.gc().filterRoleChanged()}))("ngModelChange",(function(t){return u.Dc(i),u.gc().searchRoleName=t})),u.Nc(4,st,2,2,"mat-option",7),u.Tb(),u.Tb()}if(2&t){var a=u.gc();u.Cb(3),u.pc("ngModel",a.searchRoleName),u.Cb(1),u.pc("ngForOf",a.filterRoleList)}}function bt(t,e){if(1&t&&(u.Ub(0,"mat-option",35),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i._id),u.Cb(1),u.Qc(i.first_name)}}function mt(t,e){if(1&t){var i=u.Vb();u.Ub(0,"mat-form-field",5),u.Ub(1,"mat-label"),u.Pc(2,"User"),u.Tb(),u.Ub(3,"mat-select",36),u.cc("ngModelChange",(function(t){return u.Dc(i),u.gc().searchUserId=t})),u.Nc(4,bt,2,2,"mat-option",7),u.Tb(),u.Tb()}if(2&t){var a=u.gc();u.Cb(3),u.pc("ngModel",a.searchUserId),u.Cb(1),u.pc("ngForOf",a.filterUserList)}}function ut(t,e){if(1&t&&(u.Ub(0,"mat-option",35),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i.value),u.Cb(1),u.Qc(i.name)}}function dt(t,e){if(1&t&&(u.Ub(0,"mat-option",35),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i._id),u.Cb(1),u.Qc(i.name)}}function pt(t,e){if(1&t&&(u.Ub(0,"mat-option",35),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i.value),u.Cb(1),u.Qc(i.name)}}function ft(t,e){1&t&&(u.Ub(0,"th",37),u.Pc(1," Position "),u.Tb())}var ht=function(){return{standalone:!0}};function gt(t,e){if(1&t){var i=u.Vb();u.Ub(0,"td",38),u.Ub(1,"input",39),u.cc("change",(function(){u.Dc(i);var t=e.$implicit;return u.gc().changePosition(t)}))("ngModelChange",(function(t){return u.Dc(i),e.$implicit.position=t})),u.Tb(),u.Tb()}if(2&t){var a=e.$implicit;u.Cb(1),u.pc("ngModelOptions",u.rc(2,ht))("ngModel",a.position)}}function vt(t,e){1&t&&(u.Ub(0,"th",37),u.Pc(1," Name "),u.Tb())}function Tt(t,e){if(1&t&&(u.Ub(0,"td",40),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.Cb(1),u.Rc(" ",i.name," ")}}function yt(t,e){1&t&&(u.Ub(0,"th",37),u.Pc(1," Second Name "),u.Tb())}function Ut(t,e){if(1&t&&(u.Ub(0,"td",38),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.Cb(1),u.Rc(" ",i.secondary_name," ")}}function Ct(t,e){1&t&&(u.Ub(0,"th",37),u.Pc(1," Category "),u.Tb())}function It(t,e){if(1&t&&(u.Ub(0,"td",38),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.Cb(1),u.Rc(" ",i.category_id?i.category_id.name:""," ")}}function Pt(t,e){1&t&&(u.Ub(0,"th",41),u.Pc(1," Image "),u.Tb())}function _t(t,e){if(1&t&&(u.Ub(0,"td",38),u.Pb(1,"img",42),u.Tb()),2&t){var i=e.$implicit;u.Cb(1),u.qc("src",i.thumbnail,u.Fc)}}function Dt(t,e){1&t&&(u.Ub(0,"th",37),u.Pc(1," Type "),u.Tb())}function Rt(t,e){if(1&t&&(u.Ub(0,"td",38),u.Pc(1),u.Tb()),2&t){var i=e.$implicit,a=u.gc();u.Cb(1),u.Rc(" ",a.itemTypes[i.type]," ")}}function wt(t,e){1&t&&(u.Ub(0,"th",41),u.Pc(1," Price "),u.Tb())}function St(t,e){if(1&t&&(u.Ub(0,"td",38),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.Cb(1),u.Rc(" ",i.price," ")}}function Nt(t,e){1&t&&(u.Ub(0,"th",41),u.Pc(1," Price "),u.Tb())}function Ft(t,e){if(1&t){var i=u.Vb();u.Ub(0,"td",38),u.Ub(1,"input",39),u.cc("change",(function(){u.Dc(i);var t=e.$implicit;return u.gc().changePosition(t)}))("ngModelChange",(function(t){return u.Dc(i),e.$implicit.price=t})),u.Tb(),u.Tb()}if(2&t){var a=e.$implicit;u.Cb(1),u.pc("ngModelOptions",u.rc(2,ht))("ngModel",a.price)}}function Lt(t,e){1&t&&(u.Ub(0,"th",41),u.Pc(1," Quantity "),u.Tb())}function Ot(t,e){if(1&t&&(u.Ub(0,"td",38),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.Cb(1),u.Qc(i.item_volume)}}function kt(t,e){1&t&&(u.Ub(0,"th",41),u.Pc(1," Availability Status "),u.Tb())}function At(t,e){if(1&t&&(u.Ub(0,"mat-option",35),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i.value),u.Cb(1),u.Qc(i.name)}}function Et(t,e){if(1&t){var i=u.Vb();u.Ub(0,"td",38),u.Ub(1,"mat-select",43),u.cc("selectionChange",(function(){u.Dc(i);var t=e.$implicit;return u.gc().updateItemDepoPrice(t)}))("ngModelChange",(function(t){return u.Dc(i),e.$implicit.availability_status=t})),u.Nc(2,At,2,2,"mat-option",7),u.Tb(),u.Tb()}if(2&t){var a=e.$implicit,n=u.gc();u.Cb(1),u.pc("ngModel",a.availability_status),u.Cb(1),u.pc("ngForOf",n.availabilityList)}}function Mt(t,e){1&t&&(u.Ub(0,"th",37),u.Pc(1," Active "),u.Tb())}function xt(t,e){if(1&t){var i=u.Vb();u.Ub(0,"td",38),u.Ub(1,"mat-slide-toggle",44),u.cc("ngModelChange",(function(t){return u.Dc(i),e.$implicit.is_active=t}))("change",(function(){u.Dc(i);var t=e.$implicit;return u.gc().changeActivationStatus(t)})),u.Tb(),u.Tb()}if(2&t){var a=e.$implicit;u.Cb(1),u.pc("ngModel",a.is_active)}}function Vt(t,e){1&t&&(u.Ub(0,"th",37),u.Pc(1," Controls "),u.Tb())}function $t(t,e){if(1&t){var i=u.Vb();u.Ub(0,"mat-grid-tile"),u.Ub(1,"button",49),u.cc("click",(function(){u.Dc(i);var t=u.gc().$implicit;return u.gc().viewItemUnit(t)})),u.Ub(2,"mat-icon",50),u.Pc(3,"visibility"),u.Tb(),u.Tb(),u.Tb()}}function qt(t,e){if(1&t){var i=u.Vb();u.Ub(0,"mat-grid-tile"),u.Ub(1,"button",49),u.cc("click",(function(){u.Dc(i);var t=u.gc().$implicit;return u.gc().openItemViewDialog(t)})),u.Ub(2,"mat-icon",50),u.Pc(3,"visibility"),u.Tb(),u.Tb(),u.Tb()}}var Gt=function(){return[]};function jt(t,e){if(1&t){var i=u.Vb();u.Ub(0,"mat-grid-tile"),u.Ub(1,"button",51),u.cc("click",(function(){u.Dc(i);var t=u.gc().$implicit;return u.gc().navigateToEdit(t._id)})),u.Ub(2,"mat-icon",50),u.Pc(3,"create"),u.Tb(),u.Tb(),u.Tb()}2&t&&(u.Cb(1),u.pc("routerLink",u.rc(1,Gt)))}function Bt(t,e){if(1&t){var i=u.Vb();u.Ub(0,"td",38),u.Ub(1,"mat-grid-list",45),u.Nc(2,$t,4,0,"mat-grid-tile",46),u.Nc(3,qt,4,0,"mat-grid-tile",46),u.Nc(4,jt,4,2,"mat-grid-tile",46),u.Ub(5,"mat-grid-tile"),u.Ub(6,"button",47),u.cc("click",(function(){u.Dc(i);var t=e.$implicit;return u.gc().deleteIcon(t._id)})),u.Ub(7,"mat-icon",48),u.Pc(8,"delete"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()}if(2&t){var a=u.gc();u.Cb(2),u.pc("ngIf",a.isDepoView),u.Cb(1),u.pc("ngIf",!a.isDepoView),u.Cb(1),u.pc("ngIf",!a.isDepoView)}}function Kt(t,e){1&t&&u.Pb(0,"tr",52)}function Ht(t,e){1&t&&u.Pb(0,"tr",53)}var Qt,zt=function(){return[5,10,25]},Yt=((Qt=function(){function t(e,a,n,r,c,o,s,l){i(this,t),this.router=e,this.settingService=a,this.usersFacade=n,this.categoryFacade=r,this.facade=c,this.sidebarNoticeService=o,this.itemUnitViewDialog=s,this.confirmService=l,this.displayedColumns=[],this.itemTypeList=[],this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.filterUserList=[],this.filterCategoryList=[],this.filterRoleList=[],this.searchRoleName="",this.searchItemType="",this.searchUserId="",this.filterCategoryId="",this.isDepoUserSearched=!1,this.availabilityStatus=null,this.availabilityList=[{name:"Available",value:O.available},{name:"Not Available",value:O.notAvailable},{name:"Notify",value:O.notify}],this.currentRole=this.settingService.user.role_id.type||"User",this.pageDetails={currentPage:1,itemsPerPage:10,totalPages:3,totalRecords:200},this.totalBanner=0}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.filterItem(),this.facade.getItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,O,this.searchUserId,this.filterCategoryId).subscribe((function(e){t.dataSource=new L.p(e.data),t.dataSource.sort=t.sort})),this.facade.getItemTypes().subscribe((function(e){t.itemTypeList=e})),this.usersFacade.getUsersByType(1,2e3).subscribe((function(e){t.filterUserList=e.userList})),this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe((function(e){t.filterCategoryList=e})),this.usersFacade.getRoleList().subscribe((function(e){t.filterRoleList=e.data}))}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"pageEvent",value:function(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex+1,this.facade.loadItemList(this.pageDetails.currentPage,t.pageSize,this.searchItemType,this.availabilityStatus,this.searchUserId,this.filterCategoryId)}},{key:"deleteIcon",value:function(t){var e=this;this.confirmService.confirm("Are you sure want to delete this Item?","Confirm").subscribe((function(i){1==i&&e.facade.deleteItem(t).then((function(t){return e.facade.loadItemList(e.pageDetails.currentPage,e.pageDetails.itemsPerPage,e.searchItemType,e.availabilityStatus,e.searchUserId,e.filterCategoryId)}))}))}},{key:"navigateToEdit",value:function(t){var e=this;this.facade.loadItemDetails(t).then((function(i){e.router.navigate(["items","edit",t])}))}},{key:"filterItem",value:function(){this.facade.loadItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus,this.searchUserId,this.filterCategoryId),this.searchRoleName==M.DEPO&&this.searchUserId&&""!=this.searchUserId?(this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","controls"],this.isDepoUserSearched=!0):(this.setRoleBasedColumn(),this.isDepoUserSearched=!1)}},{key:"resetFilter",value:function(){this.searchItemType="",this.availabilityStatus=null,this.searchRoleName="",this.searchUserId="",this.filterCategoryId="",this.filterUserList=[]}},{key:"changeActivationStatus",value:function(t){var e=this,i=Object.assign({},t);this.isDepoView?this.updateItemDepoPrice(t):this.facade.changeActivationStatus(i).then((function(t){e.facade.loadItemList(e.pageDetails.currentPage,e.pageDetails.itemsPerPage,e.searchItemType,e.availabilityStatus,e.searchUserId,e.filterCategoryId)}))}},{key:"changePosition",value:function(t){var e=Object.assign({},t);e.item_type=e.type,this.isDepoView?this.updateItemDepoPrice(e):this.facade.updateItem(e)}},{key:"filterRoleChanged",value:function(){""!=this.searchRoleName.trim()?this.usersFacade.loadUsers(1,200,"",this.searchRoleName):this.filterUserList=[]}},{key:"setRoleBasedColumn",value:function(){switch(this.currentRole){case A.ADMIN:this.displayedColumns=["thumbnail","position","name","price","type","is_active","category","controls"];break;case A.DEPO:this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","controls"];break;case A.HAWKER:this.displayedColumns=["thumbnail","position","name","category","item_volume","price","controls"];break;default:this.displayedColumns=["thumbnail","position","name","category"]}}},{key:"openItemViewDialog",value:function(t){this.sidebarNoticeService.setComponent(R),this.sidebarNoticeService.setIsOpened(!0),this.facade.setItemViewData(t)}},{key:"updateItemDepoPrice",value:function(t){var e=this,i={item_id:t._id,user_id:this.searchUserId,position:t.position,is_active:t.is_active,availability_status:t.availability_status,item_units:t.all_item_units};i.item_units.map((function(e){1==e.is_customer_show&&(e.price=t.price)})),this.facade.updateItemDepoPrice(i).then((function(t){e.filterItem()}))}},{key:"viewItemUnit",value:function(t){var e=this;this.itemUnitViewDialog.open(tt,{data:t}).afterClosed().subscribe((function(t){e.filterItem()}))}},{key:"isDepoView",get:function(){return!(!this.isDepoUserSearched&&this.currentRole!=A.DEPO)}},{key:"isDepoRole",get:function(){return this.currentRole==A.DEPO}}]),t}()).\u0275fac=function(t){return new(t||Qt)(u.Ob(b.f),u.Ob(k.d),u.Ob(S.a),u.Ob(w.a),u.Ob(T),u.Ob(E.a),u.Ob(x.c),u.Ob(N.a))},Qt.\u0275cmp=u.Ib({type:Qt,selectors:[["app-items-components-item-list"]],viewQuery:function(t,e){var i;1&t&&u.Sc(F.a,!0),2&t&&u.yc(i=u.dc())&&(e.sort=i.first)},decls:78,vars:15,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[1,"matero-row"],["fxFlex","25","fxFlex.lt-sm","100","class","matero-col",4,"ngIf"],["fxFlex","25","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Item Type","name","filterType",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Category","name","filterType",3,"ngModel","ngModelChange"],["placeholder","Type","name","filterCategoryId",3,"ngModel","ngModelChange"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","style","max-width: 100px;",4,"matCellDef"],["matColumnDef","secondary_name"],["matColumnDef","category"],["matColumnDef","thumbnail"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","price"],["matColumnDef","price_edit"],["matColumnDef","item_volume"],["matColumnDef","availability_status"],["matColumnDef","is_active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["placeholder","User Role","name","searchRoleName",3,"ngModel","selectionChange","ngModelChange"],[3,"value"],["placeholder","User","name","searchUserId",3,"ngModel","ngModelChange"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-cell","",2,"max-width","100px"],["mat-header-cell",""],["alt","Item Image","width","100px","height","50px",3,"src"],["placeholder","Type","name","availability_status",3,"ngModel","selectionChange","ngModelChange"],["color","primary",3,"ngModel","ngModelChange","change"],["cols","3","rowHeight","50px"],[4,"ngIf"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-icon-button","","aria-label","View",3,"click"],["color","primary"],["mat-icon-button","","aria-label","Edit",3,"routerLink","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(u.Pb(0,"page-header"),u.Ub(1,"section"),u.Ub(2,"a",0),u.Pc(3," Add New "),u.Tb(),u.Tb(),u.Pb(4,"br"),u.Ub(5,"div",1),u.Ub(6,"div",2),u.Ub(7,"mat-card"),u.Ub(8,"mat-card-title"),u.Pc(9,"Filter"),u.Tb(),u.Ub(10,"form"),u.Ub(11,"div",3),u.Nc(12,lt,5,2,"mat-form-field",4),u.Nc(13,mt,5,2,"mat-form-field",4),u.Ub(14,"mat-form-field",5),u.Ub(15,"mat-label"),u.Pc(16,"Item Type"),u.Tb(),u.Ub(17,"mat-select",6),u.cc("ngModelChange",(function(t){return e.searchItemType=t})),u.Nc(18,ut,2,2,"mat-option",7),u.Tb(),u.Tb(),u.Ub(19,"mat-form-field",5),u.Ub(20,"mat-label"),u.Pc(21,"Category"),u.Tb(),u.Ub(22,"mat-select",8),u.cc("ngModelChange",(function(t){return e.filterCategoryId=t})),u.Nc(23,dt,2,2,"mat-option",7),u.Tb(),u.Tb(),u.Tb(),u.Ub(24,"div",3),u.Ub(25,"mat-form-field",5),u.Ub(26,"mat-label"),u.Pc(27,"Availability"),u.Tb(),u.Ub(28,"mat-select",9),u.cc("ngModelChange",(function(t){return e.availabilityStatus=t})),u.Nc(29,pt,2,2,"mat-option",7),u.Tb(),u.Tb(),u.Ub(30,"div",10),u.Ub(31,"button",11),u.cc("click",(function(){return e.filterItem()})),u.Pc(32,"Search"),u.Tb(),u.Ub(33,"button",12),u.cc("click",(function(){return e.resetFilter()})),u.Pc(34,"Reset"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(35,"div",13),u.Ub(36,"table",14),u.Sb(37,15),u.Ub(38,"form"),u.Nc(39,ft,2,0,"th",16),u.Nc(40,gt,2,3,"td",17),u.Tb(),u.Rb(),u.Sb(41,18),u.Nc(42,vt,2,0,"th",16),u.Nc(43,Tt,2,1,"td",19),u.Rb(),u.Sb(44,20),u.Nc(45,yt,2,0,"th",16),u.Nc(46,Ut,2,1,"td",17),u.Rb(),u.Sb(47,21),u.Nc(48,Ct,2,0,"th",16),u.Nc(49,It,2,1,"td",17),u.Rb(),u.Sb(50,22),u.Nc(51,Pt,2,0,"th",23),u.Nc(52,_t,2,1,"td",17),u.Rb(),u.Sb(53,24),u.Nc(54,Dt,2,0,"th",16),u.Nc(55,Rt,2,1,"td",17),u.Rb(),u.Sb(56,25),u.Nc(57,wt,2,0,"th",23),u.Nc(58,St,2,1,"td",17),u.Rb(),u.Sb(59,26),u.Nc(60,Nt,2,0,"th",23),u.Nc(61,Ft,2,3,"td",17),u.Rb(),u.Sb(62,27),u.Nc(63,Lt,2,0,"th",23),u.Nc(64,Ot,2,1,"td",17),u.Rb(),u.Sb(65,28),u.Nc(66,kt,2,0,"th",23),u.Ub(67,"form"),u.Nc(68,Et,3,2,"td",17),u.Tb(),u.Rb(),u.Sb(69,29),u.Nc(70,Mt,2,0,"th",16),u.Nc(71,xt,2,1,"td",17),u.Rb(),u.Sb(72,30),u.Nc(73,Vt,2,0,"th",16),u.Nc(74,Bt,9,3,"td",17),u.Rb(),u.Nc(75,Kt,1,0,"tr",31),u.Nc(76,Ht,1,0,"tr",32),u.Tb(),u.Ub(77,"mat-paginator",33),u.cc("page",(function(t){return e.pageEvent(t)})),u.Tb(),u.Tb()),2&t&&(u.Cb(12),u.pc("ngIf",!e.isDepoRole),u.Cb(1),u.pc("ngIf",!e.isDepoRole),u.Cb(4),u.pc("ngModel",e.searchItemType),u.Cb(1),u.pc("ngForOf",e.itemTypeList),u.Cb(4),u.pc("ngModel",e.filterCategoryId),u.Cb(1),u.pc("ngForOf",e.filterCategoryList),u.Cb(5),u.pc("ngModel",e.availabilityStatus),u.Cb(1),u.pc("ngForOf",e.availabilityList),u.Cb(7),u.pc("dataSource",e.dataSource),u.Cb(39),u.pc("matHeaderRowDef",e.displayedColumns),u.Cb(1),u.pc("matRowDefColumns",e.displayedColumns),u.Cb(1),u.pc("length",e.pageDetails.totalRecords)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",u.rc(14,zt)))},directives:[et.a,V.a,b.i,y.c,y.a,U.a,U.c,$.x,$.q,$.r,I.o,C.c,C.g,it.a,$.p,$.s,I.n,V.b,L.o,F.a,L.c,L.i,L.b,L.k,L.n,at.a,nt.p,L.h,F.b,L.a,$.t,$.d,rt.a,ct.a,ct.c,ot.a,b.g,L.j,L.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}"]}),Qt),Wt=r("FtGj"),Xt=r("rGne"),Jt=r("qFsG"),Zt=r("A5z7"),te=r("sYmb");function ee(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function ie(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function ae(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function ne(t,e){if(1&t&&(u.Ub(0,"mat-option",30),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i._id),u.Cb(1),u.Qc(i.name)}}function re(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function ce(t,e){if(1&t&&(u.Ub(0,"mat-option",30),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i._id),u.Cb(1),u.Qc(i.name)}}function oe(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function se(t,e){if(1&t&&(u.Ub(0,"mat-option",30),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i.value),u.Cb(1),u.Qc(i.name)}}function le(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function be(t,e){if(1&t&&(u.Ub(0,"mat-option",30),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i._id),u.Cb(1),u.Qc(i.name)}}function me(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function ue(t,e){if(1&t&&(u.Ub(0,"mat-option",30),u.Pc(1),u.Tb()),2&t){var i=e.$implicit;u.pc("value",i._id),u.Cb(1),u.Qc(i.name)}}function de(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function pe(t,e){if(1&t){var i=u.Vb();u.Ub(0,"mat-chip",31),u.cc("removed",(function(){u.Dc(i);var t=e.$implicit;return u.gc().removetag(t)})),u.Pc(1),u.Ub(2,"mat-icon",32),u.Pc(3,"cancel"),u.Tb(),u.Tb()}if(2&t){var a=e.$implicit;u.Cb(1),u.Rc(" ",a," ")}}function fe(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function he(t,e){if(1&t){var i=u.Vb();u.Ub(0,"mat-chip",31),u.cc("removed",(function(){u.Dc(i);var t=e.$implicit;return u.gc().removepic(t)})),u.Pc(1),u.Ub(2,"mat-icon",32),u.Pc(3,"cancel"),u.Tb(),u.Tb()}if(2&t){var a=e.$implicit;u.Cb(1),u.Rc(" ",a," ")}}function ge(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function ve(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}function Te(t,e){1&t&&(u.Ub(0,"mat-error"),u.Pc(1),u.hc(2,"translate"),u.Tb()),2&t&&(u.Cb(1),u.Rc(" ",u.ic(2,1,"validations.required")," "))}var ye,Ue,Ce,Ie=function(){return["home","items","new"]},Pe=function(){return["/items"]},_e=((ye=function(){function e(t,a,n,r,c,o){var s=this;i(this,e),this.fb=t,this.router=a,this.activeRoute=n,this.facade=r,this.unitFacde=c,this.categoryFacade=o,this.recommendedList=[],this.isEditMode=!1,this.activeEditId="",this.separatorKeysCodes=[Wt.g,Wt.c],this.cateTagValues=[],this.subCateTagValues=[],this.itemForm=this.fb.group({name:["",[$.w.required]],secondary_name:[""],price:[0],is_active:[!0],category_id:[""],unit_id:[""],item_type:[""],description:[""],benefits:[""],category_tags:[[]],thumbnail:[""],picture:[[]],recommended_items:[[]],subCategory_ids:[[]]}),this.activeRoute.params.subscribe((function(t){null!=t.id&&null!=t.id&&""!=t.id&&(s.isEditMode=!0,s.activeEditId=t.id)}))}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.categoryFacade.loadParentCategories(),this.unitFacde.loadUnites(1,500),this.categoryFacade.getParentCategories().subscribe((function(e){t.categoryList=e})),this.categoryFacade.getCategoriesByParentId().subscribe((function(e){t.subCategoryList=e.data})),this.unitFacde.getUnites().subscribe((function(e){t.unitList=e.data})),this.facade.getItemTypes().subscribe((function(e){t.itemTypeList=e})),this.facade.getSallableItemList().subscribe((function(e){t.recommendedList=e.data})),this.isEditMode&&this.facade.getItemDetails(this.activeEditId).subscribe((function(e){var i=Object.assign({},e);t.itemForm.patchValue(e),t.itemForm.patchValue({item_type:i.type})}),(function(t){return console.error(t)}))}},{key:"onFormSubmit",value:function(t){var e=this;if(console.log("form value ",this.itemForm.value,this.itemForm.valid),this.itemForm.valid)if(this.isEditMode){var i=this.itemForm.value;i._id=this.activeEditId,this.facade.updateItem(i).then((function(t){e.itemForm.reset(),e.router.navigate(["items"])}))}else this.facade.newItem(this.itemForm.value).then((function(t){e.itemForm.reset(),e.router.navigate(["items"])}))}},{key:"addtag",value:function(e){var i=e.input,a=e.value,n=t(this.itemForm.get("category_tags").value);(a||"").trim()&&(n.push(a.trim()),this.itemForm.get("category_tags").setValue(n)),i&&(i.value="")}},{key:"removetag",value:function(e){var i=t(this.itemForm.get("category_tags").value),a=i.indexOf(e);a>=0&&(i.splice(a,1),this.itemForm.get("category_tags").setValue(i))}},{key:"addpic",value:function(e){var i=e.input,a=e.value,n=t(this.itemForm.get("picture").value);(a||"").trim()&&(n.push(a.trim()),this.itemForm.get("picture").setValue(n)),i&&(i.value="")}},{key:"removepic",value:function(e){var i=t(this.itemForm.get("picture").value),a=i.indexOf(e);a>=0&&(i.splice(a,1),this.itemForm.get("picture").setValue(i))}},{key:"onCategorySelectionChange",value:function(){var e,i=this;this.cateTagValues=[];var a=this.itemForm.get("category_id").value;this.categoryList.filter((function(t){a==t._id&&i.cateTagValues.push(t.name)})),this.itemForm.patchValue({category_tags:(e=[]).concat.apply(e,t(this.cateTagValues))}),this.itemForm.get("subCategory_ids").setValue([]),this.loadSubCategories(a)}},{key:"onSubCategorySelectionChange",value:function(){var e,i=this;this.subCateTagValues=[];var a=this.itemForm.get("subCategory_ids").value;this.subCategoryList.filter((function(t){a.indexOf(t._id)>=0&&i.subCateTagValues.push(t.name)})),this.itemForm.patchValue({category_tags:(e=[]).concat.apply(e,t(this.cateTagValues).concat([this.subCateTagValues]))})}},{key:"loadSubCategories",value:function(t){this.categoryFacade.loadCategories(1,200,t,"")}},{key:"is_active_value",get:function(){return!!this.itemForm.get("is_active").value&&this.itemForm.get("is_active").value}}]),e}()).\u0275fac=function(t){return new(t||ye)(u.Ob($.f),u.Ob(b.f),u.Ob(b.a),u.Ob(T),u.Ob(Xt.a),u.Ob(w.a))},ye.\u0275cmp=u.Ib({type:ye,selectors:[["app-items-components-item-add"]],decls:103,vars:33,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","25","fxFlex.lt-sm","100"],["matInput","","placeholder","Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Secondary Name","formControlName","secondary_name","required",""],["matInput","","placeholder","Price","formControlName","price","required","","type","number"],["formControlName","is_active","color","primary",2,"margin-top","20px"],["formControlName","category_id","placeholder","Category","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subCategory_ids","placeholder","Sub Category","required","","multiple","",3,"selectionChange"],["formControlName","item_type","placeholder","Type","required",""],["formControlName","unit_id","placeholder","Unit","required",""],["fxFlex","50","fxFlex.lt-sm","100"],["formControlName","recommended_items","placeholder","Recommendation","multiple",""],["matInput","","placeholder","Thumbnail","formControlName","thumbnail","required",""],["aria-label","Tags"],["chipList",""],["selectable","true","removable","true",3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-label","Pictures"],["picList",""],["placeholder","Pictures",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","placeholder","Description","formControlName","description","required",""],["matInput","","placeholder","Benefits","formControlName","benefits","required",""],["mat-raised-button","","color","primary","type","submit",1,"m-t-8",2,"margin-right","5px"],["mat-raised-button","","type","button",1,"m-t-8",3,"routerLink"],[3,"value"],["selectable","true","removable","true",3,"removed"],["matChipRemove",""]],template:function(t,e){if(1&t&&(u.Pb(0,"page-header",0),u.Ub(1,"div",1),u.Ub(2,"div",2),u.Ub(3,"mat-card"),u.Ub(4,"mat-card-title"),u.Pc(5),u.Tb(),u.Ub(6,"form",3),u.cc("submit",(function(t){return e.onFormSubmit(t)})),u.Ub(7,"div",4),u.Ub(8,"div",5),u.Ub(9,"mat-form-field"),u.Ub(10,"mat-label"),u.Pc(11,"Name"),u.Tb(),u.Pb(12,"input",6),u.Nc(13,ee,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(14,"div",5),u.Ub(15,"mat-form-field"),u.Ub(16,"mat-label"),u.Pc(17,"Secondary Name"),u.Tb(),u.Pb(18,"input",8),u.Nc(19,ie,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(20,"div",5),u.Ub(21,"mat-form-field"),u.Ub(22,"mat-label"),u.Pc(23,"Price"),u.Tb(),u.Pb(24,"input",9),u.Nc(25,ae,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(26,"div",5),u.Ub(27,"mat-slide-toggle",10),u.Pc(28),u.Tb(),u.Tb(),u.Ub(29,"div",5),u.Ub(30,"mat-form-field"),u.Ub(31,"mat-label"),u.Pc(32,"Category"),u.Tb(),u.Ub(33,"mat-select",11),u.cc("selectionChange",(function(){return e.onCategorySelectionChange()})),u.Nc(34,ne,2,2,"mat-option",12),u.Tb(),u.Nc(35,re,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(36,"div",5),u.Ub(37,"mat-form-field"),u.Ub(38,"mat-label"),u.Pc(39,"Sub Category"),u.Tb(),u.Ub(40,"mat-select",13),u.cc("selectionChange",(function(){return e.onSubCategorySelectionChange()})),u.Nc(41,ce,2,2,"mat-option",12),u.Tb(),u.Nc(42,oe,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(43,"div",5),u.Ub(44,"mat-form-field"),u.Ub(45,"mat-label"),u.Pc(46,"Type"),u.Tb(),u.Ub(47,"mat-select",14),u.Nc(48,se,2,2,"mat-option",12),u.Tb(),u.Nc(49,le,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(50,"div",5),u.Ub(51,"mat-form-field"),u.Ub(52,"mat-label"),u.Pc(53,"Unit"),u.Tb(),u.Ub(54,"mat-select",15),u.Nc(55,be,2,2,"mat-option",12),u.Tb(),u.Nc(56,me,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(57,"div",16),u.Ub(58,"mat-form-field"),u.Ub(59,"mat-label"),u.Pc(60,"Recommendation"),u.Tb(),u.Ub(61,"mat-select",17),u.Nc(62,ue,2,2,"mat-option",12),u.Tb(),u.Tb(),u.Tb(),u.Ub(63,"div",16),u.Ub(64,"mat-form-field"),u.Ub(65,"mat-label"),u.Pc(66,"Thumbnail"),u.Tb(),u.Pb(67,"input",18),u.Nc(68,de,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(69,"div",16),u.Ub(70,"mat-form-field"),u.Ub(71,"mat-label"),u.Pc(72,"Tags"),u.Tb(),u.Ub(73,"mat-chip-list",19,20),u.Nc(75,pe,4,1,"mat-chip",21),u.Ub(76,"input",22),u.cc("matChipInputTokenEnd",(function(t){return e.addtag(t)})),u.Tb(),u.Tb(),u.Nc(77,fe,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(78,"div",16),u.Ub(79,"mat-form-field"),u.Ub(80,"mat-label"),u.Pc(81,"Pictures"),u.Tb(),u.Ub(82,"mat-chip-list",23,24),u.Nc(84,he,4,1,"mat-chip",21),u.Ub(85,"input",25),u.cc("matChipInputTokenEnd",(function(t){return e.addpic(t)})),u.Tb(),u.Tb(),u.Nc(86,ge,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(87,"div",16),u.Ub(88,"mat-form-field"),u.Ub(89,"mat-label"),u.Pc(90,"Description"),u.Tb(),u.Pb(91,"textarea",26),u.Nc(92,ve,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Ub(93,"div",16),u.Ub(94,"mat-form-field"),u.Ub(95,"mat-label"),u.Pc(96,"Benefits"),u.Tb(),u.Pb(97,"textarea",27),u.Nc(98,Te,3,3,"mat-error",7),u.Tb(),u.Tb(),u.Tb(),u.Ub(99,"button",28),u.Pc(100,"Save"),u.Tb(),u.Ub(101,"button",29),u.Pc(102," Back"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&t){var i=u.zc(74),a=u.zc(83);u.qc("title",e.isEditMode?"Edit Item":"New Item"),u.pc("nav",u.rc(31,Ie)),u.Cb(5),u.Rc("",e.isEditMode?"Edit Item":"New Item"," "),u.Cb(1),u.pc("formGroup",e.itemForm),u.Cb(7),u.pc("ngIf",e.itemForm.get("name").invalid),u.Cb(6),u.pc("ngIf",e.itemForm.get("secondary_name").invalid),u.Cb(6),u.pc("ngIf",e.itemForm.get("price").invalid),u.Cb(3),u.Rc(" ",e.is_active_value?"Active":"Inactive"," "),u.Cb(6),u.pc("ngForOf",e.categoryList),u.Cb(1),u.pc("ngIf",e.itemForm.get("category_id").invalid),u.Cb(6),u.pc("ngForOf",e.subCategoryList),u.Cb(1),u.pc("ngIf",e.itemForm.get("subCategory_ids").invalid),u.Cb(6),u.pc("ngForOf",e.itemTypeList),u.Cb(1),u.pc("ngIf",e.itemForm.get("item_type").invalid),u.Cb(6),u.pc("ngForOf",e.unitList),u.Cb(1),u.pc("ngIf",e.itemForm.get("unit_id").invalid),u.Cb(6),u.pc("ngForOf",e.recommendedList),u.Cb(6),u.pc("ngIf",e.itemForm.get("thumbnail").invalid),u.Cb(7),u.pc("ngForOf",e.itemForm.get("category_tags").value),u.Cb(1),u.pc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),u.Cb(1),u.pc("ngIf",e.itemForm.get("category_tags").invalid),u.Cb(7),u.pc("ngForOf",e.itemForm.get("picture").value),u.Cb(1),u.pc("matChipInputFor",a)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),u.Cb(1),u.pc("ngIf",e.itemForm.get("picture").invalid),u.Cb(6),u.pc("ngIf",e.itemForm.get("description").invalid),u.Cb(6),u.pc("ngIf",e.itemForm.get("benefits").invalid),u.Cb(3),u.pc("routerLink",u.rc(32,Pe))}},directives:[et.a,y.c,y.a,U.a,U.c,$.x,$.q,$.k,y.d,C.c,C.g,Jt.b,$.d,$.p,$.i,$.v,I.o,$.t,rt.a,it.a,I.n,Zt.c,Zt.b,V.b,b.g,C.b,nt.p,Zt.a,ot.a,Zt.d],pipes:[te.d],styles:[""]}),ye),De=[{path:"",component:Yt},{path:"new",component:_e},{path:"edit/:id",component:_e}],Re=((Ce=function t(){i(this,t)}).\u0275mod=u.Mb({type:Ce}),Ce.\u0275inj=u.Lb({factory:function(t){return new(t||Ce)},imports:[[b.j.forChild(De)],b.j]}),Ce),we=((Ue=function t(){i(this,t)}).\u0275mod=u.Mb({type:Ue}),Ue.\u0275inj=u.Lb({factory:function(t){return new(t||Ue)},imports:[[l.a,Re]]}),Ue)}}])}();