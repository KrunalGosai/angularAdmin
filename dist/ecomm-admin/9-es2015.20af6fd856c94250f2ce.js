(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{XdEn:function(t,e,i){"use strict";i.r(e),i.d(e,"ItemsModule",(function(){return pe}));var a=i("PCNd"),c=i("tyNb"),n=i("2Vo4"),r=i("fXoL");let s=(()=>{class t{constructor(){this.items=new n.a({}),this.editItem=new n.a({}),this.itemTypes=new n.a([{name:"Sellable",value:"SELLABLE"},{name:"Packaging Material",value:"PACKAGING_MATERIAL"},{name:"Raw Material",value:"RAW_MATERIAL"}]),this.itemViewData=new n.a({}),this.isItemsSet=!1,this.isItemDetailsSet=!1}getItemList(){return this.items.asObservable()}setItemList(t){this.isItemsSet=!0,this.items.next(t)}getEditItem(){return this.editItem.asObservable()}setEditItem(t){this.isItemDetailsSet=!0,this.editItem.next(t)}getItemTypes(){return this.itemTypes.asObservable()}setItemViewData(t){this.itemViewData.next(t)}getItemViewData(){return this.itemViewData.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var o=i("vkgz"),l=i("AytR"),m=i("tk/3");let b=(()=>{class t{constructor(t){this.http=t,this.baseURl=l.a.SERVER_ORIGIN}getItemList(t=1,e=5,i="",a,c=null,n="",r=""){let s=this.baseURl+`/api/item/get_admin_item_list?currentPage=${t}&currentPageSize=${e}`;return null!=i&&null!=i&&""!=i.trim()&&(s+="&item_type="+i),null!=a&&null!=a&&(s+="&availability_status="+a),null!=c&&null!=c&&""!=c.trim()&&(s+="&user_type="+c),null!=n&&null!=n&&""!=n.trim()&&(s+="&user_id="+n),null!=r&&null!=r&&""!=r.trim()&&(s+="&category_id="+r),this.http.get(s)}deleteItem(t){return this.http.delete(this.baseURl+"/api/item/delete_Item/"+t)}getItemDetailsById(t){return this.http.get(this.baseURl+"/api/item/get_Itemdetail?item_id="+t)}updateActivationStatus(t,e){return this.http.put(this.baseURl+"/api/item/update_Active_Deactive_Item",{item_id:e,is_active:t})}newitem(t){return this.http.post(this.baseURl+"/api/item/add_Item",t)}updateItem(t){return this.http.put(this.baseURl+"/api/item/update/"+t._id,t)}updateItemDepoPrice(t){return this.http.put(this.baseURl+"/api/item/update_itemdepo_price",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(m.b))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=i("5eHb");let d=(()=>{class t{constructor(t,e,i){this.api=t,this.state=e,this.toster=i}loadItemList(t=1,e=200,i="",a=null,c=null,n="",r=""){this.api.getItemList(t,e,i,a,c,n,r).subscribe(t=>{this.state.setItemList(t)},t=>console.error("api call error from load items ",t))}getItemList(t=1,e=200,i="",a,c=null,n="",r=""){return this.state.isItemsSet||this.loadItemList(t,e,i,a,c,n,r),this.state.getItemList().pipe(Object(o.a)(t=>t))}getSallableItemList(){return this.api.getItemList(1,200,"SELLABLE").pipe(Object(o.a)(t=>t))}newItem(t){return this.api.newitem(t).toPromise().then(t=>(this.loadItemList(),this.toster.success("Item Successfully Created","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from new Item ",t),t})}deleteItem(t){return this.api.deleteItem(t).toPromise().then(t=>(this.toster.success("Item Successfully Deleted","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from Delete Item",t),t})}getItemDetails(t){return this.state.isItemDetailsSet||this.loadItemDetails(t),this.state.getEditItem().pipe(Object(o.a)(t=>t))}loadItemDetails(t){return this.api.getItemDetailsById(t).toPromise().then(t=>(this.state.setEditItem(t.item),t)).catch(t=>{throw console.error("api call error from load Item Details",t),t})}updateItem(t){return this.api.updateItem(t).toPromise().then(t=>(this.loadItemList(),this.toster.success("Item Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from Update item ",t),t})}changeActivationStatus(t){return this.api.updateActivationStatus(t.is_active,t._id).toPromise().then(t=>(this.toster.success("Unit Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from change activation status Unit",t),t})}getItemTypes(){return this.state.getItemTypes().pipe(Object(o.a)(t=>t))}setItemViewData(t){this.state.setItemViewData(t)}getItemViewData(){return this.state.getItemViewData().pipe(Object(o.a)(t=>t))}updateItemDepoPrice(t){return this.api.updateItemDepoPrice(t).toPromise().then(t=>(this.toster.success("Item Depo Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>{throw console.error("api call error from updateItemDepoPrice",t),t})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(b),r.Yb(s),r.Yb(u.b))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("XiUz"),h=i("Wp6s"),g=i("kmnG"),f=i("ofXK");function U(t,e){1&t&&r.Pb(0,"img",7),2&t&&r.qc("src",e.$implicit,r.Fc)}let T=(()=>{class t{constructor(t){this.facde=t,this.viewData={},this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[]}ngOnInit(){this.facde.getItemViewData().subscribe(t=>{this.viewData=t,this.dataSource=this.viewData.all_item_units})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(d))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-item-view"]],decls:84,vars:11,consts:[["fxLayout","row wrap",1,"matero-row"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","15","fxFlex.lt-sm","100"],["fxFlex","85","fxFlex.lt-sm","100"],["alt","Item Thumbnail","height","60px","width","80px",3,"src"],["fxFlex","35","fxFlex.lt-sm","100"],["alt","Item Picture","height","60px","width","80px",3,"src",4,"ngFor","ngForOf"],["alt","Item Picture","height","60px","width","80px",3,"src"]],template:function(t,e){1&t&&(r.Ub(0,"div",0),r.Ub(1,"mat-card"),r.Ub(2,"mat-card-title"),r.Pc(3,"Item View"),r.Tb(),r.Ub(4,"div",1),r.Ub(5,"div",2),r.Ub(6,"mat-label"),r.Ub(7,"strong"),r.Pc(8," Thumbnail "),r.Tb(),r.Pc(9,":"),r.Tb(),r.Tb(),r.Ub(10,"div",3),r.Pb(11,"img",4),r.Tb(),r.Ub(12,"div",2),r.Ub(13,"mat-label"),r.Ub(14,"strong"),r.Pc(15," Name "),r.Tb(),r.Tb(),r.Tb(),r.Ub(16,"div",5),r.Ub(17,"mat-label"),r.Pc(18),r.Tb(),r.Tb(),r.Ub(19,"div",2),r.Ub(20,"mat-label"),r.Ub(21,"strong"),r.Pc(22,"Category "),r.Tb(),r.Tb(),r.Tb(),r.Ub(23,"div",5),r.Ub(24,"mat-label"),r.Pc(25),r.Tb(),r.Tb(),r.Ub(26,"div",2),r.Ub(27,"mat-label"),r.Ub(28,"strong"),r.Pc(29," Type "),r.Tb(),r.Tb(),r.Tb(),r.Ub(30,"div",5),r.Ub(31,"mat-label"),r.Pc(32),r.Tb(),r.Tb(),r.Ub(33,"div",2),r.Ub(34,"mat-label"),r.Ub(35,"strong"),r.Pc(36," Qty "),r.Tb(),r.Tb(),r.Tb(),r.Ub(37,"div",5),r.Ub(38,"mat-label"),r.Pc(39),r.Tb(),r.Tb(),r.Ub(40,"div",2),r.Ub(41,"mat-label"),r.Ub(42,"strong"),r.Pc(43," Position "),r.Tb(),r.Tb(),r.Tb(),r.Ub(44,"div",5),r.Ub(45,"mat-label"),r.Pc(46),r.Tb(),r.Tb(),r.Ub(47,"div",2),r.Ub(48,"mat-label"),r.Ub(49,"strong"),r.Pc(50," is Active "),r.Tb(),r.Tb(),r.Tb(),r.Ub(51,"div",5),r.Ub(52,"mat-label"),r.Pc(53),r.Tb(),r.Tb(),r.Ub(54,"div",2),r.Ub(55,"mat-label"),r.Ub(56,"strong"),r.Pc(57," Price "),r.Tb(),r.Tb(),r.Tb(),r.Ub(58,"div",5),r.Ub(59,"mat-label"),r.Pc(60),r.Tb(),r.Tb(),r.Ub(61,"div",2),r.Ub(62,"mat-label"),r.Ub(63,"strong"),r.Pc(64," Availability "),r.Tb(),r.Tb(),r.Tb(),r.Ub(65,"div",5),r.Ub(66,"mat-label"),r.Pc(67),r.Tb(),r.Tb(),r.Ub(68,"div",2),r.Ub(69,"mat-label"),r.Ub(70,"strong"),r.Pc(71," Unit Name"),r.Tb(),r.Tb(),r.Tb(),r.Ub(72,"div",5),r.Ub(73,"mat-label"),r.Pc(74),r.Tb(),r.Tb(),r.Pb(75,"div",2),r.Pb(76,"div",5),r.Ub(77,"div",2),r.Ub(78,"mat-label"),r.Ub(79,"strong"),r.Pc(80," Pictures "),r.Tb(),r.Pc(81,":"),r.Tb(),r.Tb(),r.Ub(82,"div",3),r.Nc(83,U,1,1,"img",6),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t&&(r.Cb(11),r.qc("src",e.viewData.thumbnail,r.Fc),r.Cb(7),r.Rc(": ",e.viewData.name,""),r.Cb(7),r.Rc(": ",e.viewData.category_id?e.viewData.category_id.name:"",""),r.Cb(7),r.Rc(": ",e.itemTypes[e.viewData.type],""),r.Cb(7),r.Rc(": ",e.viewData.item_volume,""),r.Cb(7),r.Rc(": ",e.viewData.position,""),r.Cb(7),r.Rc(": ",e.viewData.is_active?"Yes":"No",""),r.Cb(7),r.Rc(": ",e.viewData.price,""),r.Cb(7),r.Rc(": ",e.viewData.availability_status,""),r.Cb(7),r.Rc(": ",e.viewData.unit_id?e.viewData.unit_id.name:"",""),r.Cb(9),r.pc("ngForOf",e.viewData.picture))},directives:[p.c,h.a,h.c,p.d,p.a,g.g,f.n],styles:[""]}),t})();var C=i("uEtv"),v=i("WW+1"),y=i("Xibt"),I=i("Dh3D"),P=i("+0xr"),_=i("ey9i"),R=function(t){return t.ADMIN="ADMIN",t.DEPO="DEPO",t.RETAILER="RETAILER",t.PURCHASE_MANAGER="PURCHASE_MANAGER",t.DELIVERY_BOY="DELIVERY_BOY",t.HAWKER="HAWKER",t.CUSTOMER="CUSTOMER",t.MANUFACTURING_PLANT="MANUFACTURING_PLANT",t.SUPPLIER="SUPPLIER",t}({}),D=i("dKfg"),w=function(t){return t.USER="USER",t.SUPPLIER="SUPPLIER",t.HOCKER="HOCKER",t.DELIVERYBOY="DELIVERYBOY",t.PURCHASEMANAGER="PURCHASEMANAGER",t.DEPO="DEPO",t.MANUFACTUREPLANT="MANUFACTUREPLANT",t}({}),N=i("0IaG"),F=i("bTqV"),S=i("3Pt+"),x=i("QibW");function L(t,e){1&t&&(r.Ub(0,"th",14),r.Pc(1," Price "),r.Tb())}const O=function(){return{standalone:!0}};function M(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",15),r.Ub(1,"input",16),r.cc("change",(function(){r.Dc(t);const i=e.$implicit;return r.gc().changePrice(i)}))("ngModelChange",(function(i){return r.Dc(t),e.$implicit.price=i})),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Cb(1),r.pc("ngModelOptions",r.rc(2,O))("ngModel",t.price)}}function A(t,e){1&t&&(r.Ub(0,"th",14),r.Pc(1," Quantity "),r.Tb())}function E(t,e){if(1&t&&(r.Ub(0,"td",17),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Rc(" ",t.item_quantity," ")}}function V(t,e){1&t&&(r.Ub(0,"th",14),r.Pc(1," Unit "),r.Tb())}function $(t,e){if(1&t&&(r.Ub(0,"td",15),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Rc(" ",t.unit_id?t.unit_id.name:""," ")}}function k(t,e){1&t&&(r.Ub(0,"th",14),r.Pc(1," Is Default "),r.Tb())}function q(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",15),r.Ub(1,"mat-radio-group",18),r.cc("ngModelChange",(function(e){return r.Dc(t),r.gc().defaultUnitId=e})),r.Ub(2,"mat-radio-button",19),r.cc("change",(function(e){return r.Dc(t),r.gc().radioChange(e)})),r.Pc(3),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit,i=r.gc();r.Cb(1),r.pc("ngModel",i.defaultUnitId),r.Cb(1),r.pc("value",t._id),r.Cb(1),r.Rc(" ",""," ")}}function G(t,e){1&t&&r.Pb(0,"tr",20)}function B(t,e){1&t&&r.Pb(0,"tr",21)}let K=(()=>{class t{constructor(t,e){this.viewdata=t,this.facade=e,this.isAnyChange=!1,this.searchUserId="",this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.displayedColumns=["price","qty","unit","is_customer_show"],this.dataSource=[],this.defaultUnitId=""}ngOnInit(){this.data=this.viewdata.row,this.searchUserId=this.viewdata.searchUserId;let t=this.data.all_item_units;this.dataSource=this.data.all_item_units||[];let e=t.filter(t=>1==t.is_customer_show);e&&e.length>0&&(this.defaultUnitId=e[0]._id)}changePrice(){this.updateItemDepo(!1)}radioChange(t){this.updateItemDepo(!0,t.value)}updateItemDepo(t=!1,e=""){let i=Object.assign({},this.data),a=[];this.dataSource.map(t&&1==t?t=>{a.push({_id:t._id,is_customer_show:t._id==e,item_quantity:t.item_quantity,price:t.price,unit_id:t.unit_id?t.unit_id._id:""})}:t=>{a.push({_id:t._id,is_customer_show:t.is_customer_show,item_quantity:t.item_quantity,price:t.price,unit_id:t.unit_id?t.unit_id._id:""})}),this.facade.updateItemDepoPrice({item_id:i._id,position:i.position,is_active:i.is_active,availability_status:i.availability_status,item_units:a,user_id:this.searchUserId}),this.isAnyChange=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(N.a),r.Ob(d))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-item-unit-view"]],decls:22,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography",2,"min-width","30%"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","price"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","qty"],["mat-cell","","style","padding-left: 10px;",4,"matCellDef"],["matColumnDef","unit"],["matColumnDef","is_customer_show"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-header-cell",""],["mat-cell",""],["type","number",2,"max-width","65px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-cell","",2,"padding-left","10px"],[3,"ngModel","ngModelChange"],["name","is_customer_show",3,"value","change"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(r.Ub(0,"h1",0),r.Pc(1,"Item Units"),r.Tb(),r.Ub(2,"mat-dialog-content",1),r.Ub(3,"table",2),r.Sb(4,3),r.Nc(5,L,2,0,"th",4),r.Nc(6,M,2,3,"td",5),r.Rb(),r.Sb(7,6),r.Nc(8,A,2,0,"th",4),r.Nc(9,E,2,1,"td",7),r.Rb(),r.Sb(10,8),r.Nc(11,V,2,0,"th",4),r.Nc(12,$,2,1,"td",5),r.Rb(),r.Sb(13,9),r.Nc(14,k,2,0,"th",4),r.Nc(15,q,4,3,"td",5),r.Rb(),r.Nc(16,G,1,0,"tr",10),r.Nc(17,B,1,0,"tr",11),r.Tb(),r.Pb(18,"br"),r.Tb(),r.Ub(19,"mat-dialog-actions",12),r.Ub(20,"button",13),r.Pc(21,"Close"),r.Tb(),r.Tb()),2&t&&(r.Cb(3),r.pc("dataSource",e.dataSource),r.Cb(13),r.pc("matHeaderRowDef",e.displayedColumns),r.Cb(1),r.pc("matRowDefColumns",e.displayedColumns),r.Cb(3),r.pc("mat-dialog-close",e.isAnyChange))},directives:[N.j,N.g,P.o,P.c,P.i,P.b,P.k,P.n,N.d,F.b,N.e,P.h,P.a,S.u,S.d,S.q,S.t,x.b,x.a,P.j,P.m],styles:["table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{min-width:90px}"]}),t})();var j=i("tgey"),H=i("d3UM"),Q=i("M9IT"),z=i("FKr1"),Y=i("1jcm"),W=i("zkoq"),X=i("NFeN");function J(t,e){if(1&t&&(r.Ub(0,"mat-option",39),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t.type),r.Cb(1),r.Qc(t.name)}}function Z(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-form-field",37),r.Ub(1,"mat-label"),r.Pc(2,"User Role"),r.Tb(),r.Ub(3,"mat-select",38),r.cc("selectionChange",(function(){return r.Dc(t),r.gc().filterRoleChanged()}))("ngModelChange",(function(e){return r.Dc(t),r.gc().searchRoleName=e})),r.Nc(4,J,2,2,"mat-option",8),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Cb(3),r.pc("ngModel",t.searchRoleName),r.Cb(1),r.pc("ngForOf",t.filterRoleList)}}function tt(t,e){if(1&t&&(r.Ub(0,"mat-option",39),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t._id),r.Cb(1),r.Qc(t.first_name)}}function et(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-form-field",37),r.Ub(1,"mat-label"),r.Pc(2,"User"),r.Tb(),r.Ub(3,"mat-select",40),r.cc("ngModelChange",(function(e){return r.Dc(t),r.gc().searchUserId=e})),r.Nc(4,tt,2,2,"mat-option",8),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Cb(3),r.pc("ngModel",t.searchUserId),r.Cb(1),r.pc("ngForOf",t.filterUserList)}}function it(t,e){if(1&t&&(r.Ub(0,"mat-option",39),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t.value),r.Cb(1),r.Qc(t.name)}}function at(t,e){if(1&t&&(r.Ub(0,"mat-option",39),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t._id),r.Cb(1),r.Qc(t.name)}}function ct(t,e){if(1&t&&(r.Ub(0,"mat-option",39),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t.value),r.Cb(1),r.Qc(t.name)}}function nt(t,e){1&t&&(r.Ub(0,"th",41),r.Pc(1,"Position"),r.Tb())}const rt=function(){return{standalone:!0}};function st(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",42),r.Ub(1,"input",43),r.cc("change",(function(){r.Dc(t);const i=e.$implicit;return r.gc().changePosition(i)}))("ngModelChange",(function(i){return r.Dc(t),e.$implicit.position=i})),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Cb(1),r.pc("ngModelOptions",r.rc(2,rt))("ngModel",t.position)}}function ot(t,e){1&t&&(r.Ub(0,"th",41),r.Pc(1,"Name"),r.Tb())}function lt(t,e){if(1&t&&(r.Ub(0,"td",44),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Rc(" ",t.name," ")}}function mt(t,e){1&t&&(r.Ub(0,"th",41),r.Pc(1,"Second Name"),r.Tb())}function bt(t,e){if(1&t&&(r.Ub(0,"td",42),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Qc(t.secondary_name)}}function ut(t,e){1&t&&(r.Ub(0,"th",41),r.Pc(1,"Category"),r.Tb())}function dt(t,e){if(1&t&&(r.Ub(0,"td",42),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Rc(" ",t.category_id?t.category_id.name:""," ")}}function pt(t,e){1&t&&(r.Ub(0,"th",45),r.Pc(1,"Image"),r.Tb())}function ht(t,e){if(1&t&&(r.Ub(0,"td",42),r.Pb(1,"img",46),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.qc("src",t.thumbnail,r.Fc)}}function gt(t,e){1&t&&(r.Ub(0,"th",41),r.Pc(1,"Type"),r.Tb())}function ft(t,e){if(1&t&&(r.Ub(0,"td",42),r.Pc(1),r.Tb()),2&t){const t=e.$implicit,i=r.gc();r.Cb(1),r.Rc(" ",i.itemTypes[t.type]," ")}}function Ut(t,e){1&t&&(r.Ub(0,"th",45),r.Pc(1,"Price"),r.Tb())}function Tt(t,e){if(1&t&&(r.Ub(0,"td",42),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Rc(" ",t.price," ")}}function Ct(t,e){1&t&&(r.Ub(0,"th",45),r.Pc(1,"Price"),r.Tb())}function vt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",42),r.Ub(1,"input",47),r.cc("change",(function(){r.Dc(t);const i=e.$implicit;return r.gc().changePosition(i)}))("ngModelChange",(function(i){return r.Dc(t),e.$implicit.user_price=i})),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Cb(1),r.pc("ngModelOptions",r.rc(2,rt))("ngModel",t.user_price)}}function yt(t,e){1&t&&(r.Ub(0,"th",45),r.Pc(1,"Quantity"),r.Tb())}function It(t,e){if(1&t&&(r.Ub(0,"td",42),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.Cb(1),r.Qc(t.item_quantity)}}function Pt(t,e){1&t&&(r.Ub(0,"th",45),r.Pc(1,"Unit"),r.Tb())}const _t=function(){return[]};function Rt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",42),r.Pc(1),r.Ub(2,"a",48),r.cc("click",(function(){r.Dc(t);const i=e.$implicit;return r.gc().viewItemUnit(i)})),r.Pc(3),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Cb(1),r.Rc(" ",t.unit_id?t.unit_id.name:"",""),r.Cb(1),r.pc("routerLink",r.rc(3,_t)),r.Cb(1),r.Rc("( ",t.all_item_units&&t.all_item_units.length>0?t.all_item_units.length:""," )")}}function Dt(t,e){1&t&&(r.Ub(0,"th",45),r.Pc(1,"Availability Status"),r.Tb())}function wt(t,e){if(1&t&&(r.Ub(0,"mat-option",39),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t.value),r.Cb(1),r.Qc(t.name)}}function Nt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",42),r.Ub(1,"mat-select",49),r.cc("selectionChange",(function(){r.Dc(t);const i=e.$implicit;return r.gc().updateItemDepoPrice(i)}))("ngModelChange",(function(i){return r.Dc(t),e.$implicit.availability_status=i})),r.Nc(2,wt,2,2,"mat-option",8),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit,i=r.gc();r.Cb(1),r.pc("ngModelOptions",r.rc(3,rt))("ngModel",t.availability_status),r.Cb(1),r.pc("ngForOf",i.availabilityList)}}function Ft(t,e){1&t&&(r.Ub(0,"th",41),r.Pc(1,"Active"),r.Tb())}function St(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",42),r.Ub(1,"mat-slide-toggle",50),r.cc("ngModelChange",(function(i){return r.Dc(t),e.$implicit.is_active=i}))("change",(function(){r.Dc(t);const i=e.$implicit;return r.gc().changeActivationStatus(i)})),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Cb(1),r.pc("ngModel",t.is_active)}}function xt(t,e){1&t&&(r.Ub(0,"th",41),r.Pc(1,"Controls"),r.Tb())}function Lt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-grid-tile"),r.Ub(1,"button",55),r.cc("click",(function(){r.Dc(t);const e=r.gc().$implicit;return r.gc().openItemViewDialog(e)})),r.Ub(2,"mat-icon",56),r.Pc(3,"visibility"),r.Tb(),r.Tb(),r.Tb()}}function Ot(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-grid-tile"),r.Ub(1,"button",57),r.cc("click",(function(){r.Dc(t);const e=r.gc().$implicit;return r.gc().navigateToEdit(e._id)})),r.Ub(2,"mat-icon",56),r.Pc(3,"create"),r.Tb(),r.Tb(),r.Tb()}2&t&&(r.Cb(1),r.pc("routerLink",r.rc(1,_t)))}function Mt(t,e){if(1&t){const t=r.Vb();r.Ub(0,"td",42),r.Ub(1,"mat-grid-list",51),r.Nc(2,Lt,4,0,"mat-grid-tile",52),r.Nc(3,Ot,4,2,"mat-grid-tile",52),r.Ub(4,"mat-grid-tile"),r.Ub(5,"button",53),r.cc("click",(function(){r.Dc(t);const i=e.$implicit;return r.gc().deleteIcon(i._id)})),r.Ub(6,"mat-icon",54),r.Pc(7,"delete"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&t){const t=r.gc();r.Cb(2),r.pc("ngIf",!t.isDepoView),r.Cb(1),r.pc("ngIf",t.isAdmin)}}function At(t,e){1&t&&r.Pb(0,"tr",58)}function Et(t,e){1&t&&r.Pb(0,"tr",59)}const Vt=function(){return[5,10,25]};let $t=(()=>{class t{constructor(t,e,i,a,c,n,r,s){this.router=t,this.settingService=e,this.usersFacade=i,this.categoryFacade=a,this.facade=c,this.sidebarNoticeService=n,this.itemUnitViewDialog=r,this.confirmService=s,this.displayedColumns=[],this.itemTypeList=[],this.itemTypes={SELLABLE:"Sellable",PACKAGING_MATERIAL:"Packaging Material",RAW_MATERIAL:"Raw Material"},this.filterUserList=[],this.filterCategoryList=[],this.filterRoleList=[],this.searchRoleName=this.settingService.user.role_id.type,this.searchItemType="",this.searchUserId="",this.filterCategoryId="",this.isDepoUserSearched=!1,this.availabilityStatus=null,this.availabilityList=[{name:"Available",value:"TRUE"},{name:"Notify",value:"NOTIFY"}],this.currentRole=this.settingService.user.role_id.type||"User",this.pageDetails={currentPage:1,itemsPerPage:10,totalPages:3,totalRecords:200},this.totalBanner=0}ngOnInit(){this.filterItem(),this.facade.getItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus,this.searchRoleName,this.searchUserId,this.filterCategoryId).subscribe(t=>{this.dataSource=new P.p(t.data),this.dataSource.sort=this.sort,this.pageDetails.totalRecords=t.totalCount}),this.facade.getItemTypes().subscribe(t=>{this.itemTypeList=t}),this.usersFacade.getUsersByType(1,2e3).subscribe(t=>{this.filterUserList=t.userList}),this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe(t=>{this.filterCategoryList=t}),this.usersFacade.getRoleList().subscribe(t=>{this.filterRoleList=t.data.filter(t=>"ADMIN"!=t.type&&"CUSTOMER"!=t.type&&"DELIVERY_BOY"!=t.type)})}get isAdmin(){return this.currentRole==R.ADMIN}get isDepoView(){return!(!this.isDepoUserSearched&&this.currentRole!=R.DEPO)}get isDepoRole(){return this.currentRole==R.DEPO}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}pageEvent(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex+1,this.filterItem()}deleteIcon(t){this.confirmService.confirm("Are you sure want to delete this Item?","Confirm").subscribe(e=>{1==e&&this.facade.deleteItem(t).then(t=>this.filterItem())})}navigateToEdit(t){this.facade.loadItemDetails(t).then(e=>{this.router.navigate(["items","edit",t])})}filterItem(){this.facade.loadItemList(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.searchItemType,this.availabilityStatus,this.searchRoleName,this.searchUserId,this.filterCategoryId),this.searchRoleName==w.DEPO&&this.searchUserId&&""!=this.searchUserId?(this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","unit_id"],this.isDepoUserSearched=!0):(this.setRoleBasedColumn(),this.isDepoUserSearched=!1)}resetFilter(){this.searchItemType="",this.availabilityStatus=null,this.searchRoleName="",this.searchUserId="",this.filterCategoryId="",this.filterUserList=[]}changeActivationStatus(t){let e=Object.assign({},t);this.isDepoView?this.updateItemDepoPrice(t):this.facade.changeActivationStatus(e).then(t=>{this.filterItem()})}changePosition(t){let e=Object.assign({},t),i=[];e.subCategory_ids.map(t=>{i.push(t._id)}),e.item_type=e.type,e.category_id=e.category_id._id,e.subCategory_ids=i,this.isDepoView?this.updateItemDepoPrice(e):this.facade.updateItem(e)}filterRoleChanged(){""!=this.searchRoleName.trim()?this.usersFacade.loadUsers(1,200,"",this.searchRoleName):this.filterUserList=[]}setRoleBasedColumn(){switch(this.currentRole){case R.ADMIN:this.displayedColumns=["thumbnail","position","name","price","type","is_active","category","controls"];break;case R.DEPO:this.displayedColumns=["thumbnail","position","name","category","item_volume","availability_status","is_active","price_edit","unit_id"];break;case R.HAWKER:this.displayedColumns=["thumbnail","position","name","category","item_volume","price","controls"];break;default:this.displayedColumns=["thumbnail","position","name","category"]}}openItemViewDialog(t){this.sidebarNoticeService.setComponent(T),this.sidebarNoticeService.setIsOpened(!0),this.facade.setItemViewData(t)}updateItemDepoPrice(t){let e=Object.assign({},t);e.all_item_units.map(t=>{t.unit_id=t.unit_id?t.unit_id._id:""});let i={item_id:t._id,user_id:this.searchUserId,position:t.position,is_active:t.is_active,availability_status:e.availability_status,item_units:e.all_item_units};i.item_units.map(t=>{1==t.is_customer_show&&(t.price=e.user_price)}),this.facade.updateItemDepoPrice(i).then(t=>{this.filterItem()})}viewItemUnit(t){this.itemUnitViewDialog.open(K,{data:{row:t,searchUserId:this.searchUserId}}).afterClosed().subscribe(t=>{t&&this.filterItem()})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.f),r.Ob(_.d),r.Ob(v.a),r.Ob(C.a),r.Ob(d),r.Ob(D.a),r.Ob(N.c),r.Ob(y.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-items-components-item-list"]],viewQuery:function(t,e){var i;1&t&&r.Sc(I.a,!0),2&t&&r.yc(i=r.dc())&&(e.sort=i.first)},decls:80,vars:15,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[1,"form-field-full"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100","class","matero-col",4,"ngIf"],["fxFlex","33","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Item Type","name","filterType",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Category","name","filterType",3,"ngModel","ngModelChange"],["fxFlex","34","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","Type","name","filterCategoryId",3,"ngModel","ngModelChange"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","","style","max-width: 100px",4,"matCellDef"],["matColumnDef","secondary_name"],["matColumnDef","category"],["matColumnDef","thumbnail"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","price"],["matColumnDef","price_edit"],["matColumnDef","item_volume"],["matColumnDef","unit_id"],["matColumnDef","availability_status"],["matColumnDef","is_active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["fxFlex","50","fxFlex.lt-sm","100",1,"matero-col"],["placeholder","User Role","name","searchRoleName",3,"ngModel","selectionChange","ngModelChange"],[3,"value"],["placeholder","User","name","searchUserId",3,"ngModel","ngModelChange"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","number",2,"max-width","50px",3,"ngModelOptions","ngModel","change","ngModelChange"],["mat-cell","",2,"max-width","100px"],["mat-header-cell",""],["alt","Item Image","width","100px","height","50px",1,"itemimg",3,"src"],["type","number",2,"max-width","70px",3,"ngModelOptions","ngModel","change","ngModelChange"],[3,"routerLink","click"],["placeholder","Type","name","availability_status",3,"ngModelOptions","ngModel","selectionChange","ngModelChange"],["color","primary",3,"ngModel","ngModelChange","change"],["cols","3","rowHeight","50px"],[4,"ngIf"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-icon-button","","aria-label","View",3,"click"],["color","primary"],["mat-icon-button","","aria-label","Edit",3,"routerLink","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(r.Pb(0,"page-header"),r.Ub(1,"section"),r.Ub(2,"a",0),r.Pc(3," Add New "),r.Tb(),r.Tb(),r.Pb(4,"br"),r.Ub(5,"div",1),r.Ub(6,"div",2),r.Ub(7,"mat-card"),r.Ub(8,"mat-card-title"),r.Pc(9,"Filter"),r.Tb(),r.Ub(10,"form",3),r.Ub(11,"div",4),r.Nc(12,Z,5,2,"mat-form-field",5),r.Nc(13,et,5,2,"mat-form-field",5),r.Ub(14,"mat-form-field",6),r.Ub(15,"mat-label"),r.Pc(16,"Item Type"),r.Tb(),r.Ub(17,"mat-select",7),r.cc("ngModelChange",(function(t){return e.searchItemType=t})),r.Nc(18,it,2,2,"mat-option",8),r.Tb(),r.Tb(),r.Ub(19,"mat-form-field",6),r.Ub(20,"mat-label"),r.Pc(21,"Category"),r.Tb(),r.Ub(22,"mat-select",9),r.cc("ngModelChange",(function(t){return e.filterCategoryId=t})),r.Nc(23,at,2,2,"mat-option",8),r.Tb(),r.Tb(),r.Ub(24,"mat-form-field",10),r.Ub(25,"mat-label"),r.Pc(26,"Availability"),r.Tb(),r.Ub(27,"mat-select",11),r.cc("ngModelChange",(function(t){return e.availabilityStatus=t})),r.Nc(28,ct,2,2,"mat-option",8),r.Tb(),r.Tb(),r.Ub(29,"div",12),r.Ub(30,"button",13),r.cc("click",(function(){return e.filterItem()})),r.Pc(31," Search "),r.Tb(),r.Ub(32,"button",14),r.cc("click",(function(){return e.resetFilter()})),r.Pc(33,"Reset"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(34,"div",15),r.Ub(35,"table",16),r.Sb(36,17),r.Ub(37,"form"),r.Nc(38,nt,2,0,"th",18),r.Nc(39,st,2,3,"td",19),r.Tb(),r.Rb(),r.Sb(40,20),r.Nc(41,ot,2,0,"th",18),r.Nc(42,lt,2,1,"td",21),r.Rb(),r.Sb(43,22),r.Nc(44,mt,2,0,"th",18),r.Nc(45,bt,2,1,"td",19),r.Rb(),r.Sb(46,23),r.Nc(47,ut,2,0,"th",18),r.Nc(48,dt,2,1,"td",19),r.Rb(),r.Sb(49,24),r.Nc(50,pt,2,0,"th",25),r.Nc(51,ht,2,1,"td",19),r.Rb(),r.Sb(52,26),r.Nc(53,gt,2,0,"th",18),r.Nc(54,ft,2,1,"td",19),r.Rb(),r.Sb(55,27),r.Nc(56,Ut,2,0,"th",25),r.Nc(57,Tt,2,1,"td",19),r.Rb(),r.Sb(58,28),r.Nc(59,Ct,2,0,"th",25),r.Nc(60,vt,2,3,"td",19),r.Rb(),r.Sb(61,29),r.Nc(62,yt,2,0,"th",25),r.Nc(63,It,2,1,"td",19),r.Rb(),r.Sb(64,30),r.Nc(65,Pt,2,0,"th",25),r.Nc(66,Rt,4,4,"td",19),r.Rb(),r.Sb(67,31),r.Nc(68,Dt,2,0,"th",25),r.Ub(69,"form"),r.Nc(70,Nt,3,4,"td",19),r.Tb(),r.Rb(),r.Sb(71,32),r.Nc(72,Ft,2,0,"th",18),r.Nc(73,St,2,1,"td",19),r.Rb(),r.Sb(74,33),r.Nc(75,xt,2,0,"th",18),r.Nc(76,Mt,8,2,"td",19),r.Rb(),r.Nc(77,At,1,0,"tr",34),r.Nc(78,Et,1,0,"tr",35),r.Tb(),r.Ub(79,"mat-paginator",36),r.cc("page",(function(t){return e.pageEvent(t)})),r.Tb(),r.Tb()),2&t&&(r.Cb(12),r.pc("ngIf",e.isAdmin),r.Cb(1),r.pc("ngIf",e.isAdmin),r.Cb(4),r.pc("ngModel",e.searchItemType),r.Cb(1),r.pc("ngForOf",e.itemTypeList),r.Cb(4),r.pc("ngModel",e.filterCategoryId),r.Cb(1),r.pc("ngForOf",e.filterCategoryList),r.Cb(4),r.pc("ngModel",e.availabilityStatus),r.Cb(1),r.pc("ngForOf",e.availabilityList),r.Cb(7),r.pc("dataSource",e.dataSource),r.Cb(42),r.pc("matHeaderRowDef",e.displayedColumns),r.Cb(1),r.pc("matRowDefColumns",e.displayedColumns),r.Cb(1),r.pc("length",e.pageDetails.totalRecords)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",r.rc(14,Vt)))},directives:[j.a,F.a,c.i,p.c,p.a,h.a,h.c,S.y,S.r,S.s,p.d,f.o,g.c,g.g,H.a,S.q,S.t,f.n,F.b,P.o,I.a,P.c,P.i,P.b,P.k,P.n,Q.a,z.p,P.h,I.b,P.a,S.u,S.d,Y.a,W.a,W.c,X.a,c.g,P.j,P.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}.itemimg[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;border-radius:5px;transform-origin:0 0;transition:transform .25s,visibility .25s ease-in}.itemimg[_ngcontent-%COMP%]:hover{transform:scale(2)}"]}),t})();var kt=i("FtGj"),qt=i("rGne"),Gt=i("qFsG"),Bt=i("A5z7"),Kt=i("sYmb");function jt(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function Ht(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function Qt(t,e){if(1&t&&(r.Ub(0,"mat-option",31),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t._id),r.Cb(1),r.Qc(t.name)}}function zt(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function Yt(t,e){if(1&t&&(r.Ub(0,"mat-option",31),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t._id),r.Cb(1),r.Qc(t.name)}}function Wt(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function Xt(t,e){if(1&t&&(r.Ub(0,"mat-option",31),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t.value),r.Cb(1),r.Qc(t.name)}}function Jt(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function Zt(t,e){if(1&t&&(r.Ub(0,"mat-option",31),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t._id),r.Cb(1),r.Qc(t.name)}}function te(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function ee(t,e){if(1&t&&(r.Ub(0,"mat-option",31),r.Pc(1),r.Tb()),2&t){const t=e.$implicit;r.pc("value",t._id),r.Cb(1),r.Qc(t.name)}}function ie(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function ae(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-chip",32),r.cc("removed",(function(){r.Dc(t);const i=e.$implicit;return r.gc().removetag(i)})),r.Pc(1),r.Ub(2,"mat-icon",33),r.Pc(3,"cancel"),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Cb(1),r.Rc(" ",t," ")}}function ce(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function ne(t,e){if(1&t){const t=r.Vb();r.Ub(0,"mat-chip",32),r.cc("removed",(function(){r.Dc(t);const i=e.$implicit;return r.gc().removepic(i)})),r.Pc(1),r.Ub(2,"mat-icon",33),r.Pc(3,"cancel"),r.Tb(),r.Tb()}if(2&t){const t=e.$implicit;r.Cb(1),r.Rc(" ",t," ")}}function re(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function se(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}function oe(t,e){1&t&&(r.Ub(0,"mat-error"),r.Pc(1),r.hc(2,"translate"),r.Tb()),2&t&&(r.Cb(1),r.Rc(" ",r.ic(2,1,"validations.required")," "))}const le=function(){return["home","items","new"]},me=function(){return["/items"]};let be=(()=>{class t{constructor(t,e,i,a,c,n){this.fb=t,this.router=e,this.activeRoute=i,this.facade=a,this.unitFacde=c,this.categoryFacade=n,this.recommendedList=[],this.isEditMode=!1,this.activeEditId="",this.separatorKeysCodes=[kt.g,kt.c],this.cateTagValues=[],this.subCateTagValues=[],this.itemForm=this.fb.group({name:["",[S.x.required,S.x.maxLength(50)]],price:[0,[S.x.required,S.x.pattern("[1-9]{1}[0-9]*")]],is_active:[!0],category_id:[""],unit_id:[""],item_type:[""],description:[""],benefits:[""],category_tags:[[]],thumbnail:[""],picture:[[]],recommended_items:[[]],subCategory_ids:[[]]}),this.activeRoute.params.subscribe(t=>{null!=t.id&&null!=t.id&&""!=t.id&&(this.isEditMode=!0,this.activeEditId=t.id)})}ngOnInit(){this.categoryFacade.loadParentCategories(),this.unitFacde.loadUnites(1,500),this.categoryFacade.getParentCategories().subscribe(t=>{this.categoryList=t}),this.categoryFacade.getCategoriesByParentId().subscribe(t=>{this.subCategoryList=t.data}),this.unitFacde.getUnites().subscribe(t=>{this.unitList=t.data}),this.facade.getItemTypes().subscribe(t=>{this.itemTypeList=t}),this.facade.getSallableItemList().subscribe(t=>{this.recommendedList=t.data}),this.isEditMode&&this.facade.getItemDetails(this.activeEditId).subscribe(t=>{let e=Object.assign({},t);this.itemForm.patchValue(t),this.itemForm.patchValue({item_type:e.type})},t=>console.error(t))}get is_active_value(){return!!this.itemForm.get("is_active").value&&this.itemForm.get("is_active").value}onFormSubmit(t){if(console.log("form value ",this.itemForm.value,this.itemForm.valid),this.itemForm.valid)if(this.isEditMode){let t=this.itemForm.value;t._id=this.activeEditId,this.facade.updateItem(t).then(t=>{this.itemForm.reset(),this.router.navigate(["items"])})}else this.facade.newItem(this.itemForm.value).then(t=>{this.itemForm.reset(),this.router.navigate(["items"])})}addtag(t){const e=t.input,i=t.value;let a=[...this.itemForm.get("category_tags").value];(i||"").trim()&&(a.push(i.trim()),this.itemForm.get("category_tags").setValue(a)),e&&(e.value="")}removetag(t){let e=[...this.itemForm.get("category_tags").value];const i=e.indexOf(t);i>=0&&(e.splice(i,1),this.itemForm.get("category_tags").setValue(e))}addpic(t){const e=t.input,i=t.value;let a=[...this.itemForm.get("picture").value];(i||"").trim()&&(a.push(i.trim()),this.itemForm.get("picture").setValue(a)),e&&(e.value="")}removepic(t){let e=[...this.itemForm.get("picture").value];const i=e.indexOf(t);i>=0&&(e.splice(i,1),this.itemForm.get("picture").setValue(e))}onCategorySelectionChange(){this.cateTagValues=[];let t=this.itemForm.get("category_id").value;this.categoryList.filter(e=>{t==e._id&&this.cateTagValues.push(e.name)}),this.itemForm.patchValue({category_tags:[].concat(...this.cateTagValues)}),this.itemForm.get("subCategory_ids").setValue([]),this.loadSubCategories(t)}onSubCategorySelectionChange(){this.subCateTagValues=[];let t=this.itemForm.get("subCategory_ids").value;this.subCategoryList.filter(e=>{t.indexOf(e._id)>=0&&this.subCateTagValues.push(e.name)}),this.itemForm.patchValue({category_tags:[].concat(...this.cateTagValues,this.subCateTagValues)})}loadSubCategories(t){this.categoryFacade.loadCategories(1,200,t,"")}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(S.f),r.Ob(c.f),r.Ob(c.a),r.Ob(d),r.Ob(qt.a),r.Ob(C.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-items-components-item-add"]],decls:97,vars:32,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","40","fxFlex.lt-sm","100"],["matInput","","placeholder","Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Price","formControlName","price","required","","type","text"],["fxFlex","20","fxFlex.lt-sm","100"],["formControlName","is_active","color","primary",2,"margin-top","20px"],["fxFlex","25","fxFlex.lt-sm","100"],["formControlName","category_id","placeholder","Category","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subCategory_ids","placeholder","Sub Category","required","","multiple","",3,"selectionChange"],["formControlName","item_type","placeholder","Type","required",""],["formControlName","unit_id","placeholder","Unit","required",""],["fxFlex","50","fxFlex.lt-sm","100"],["formControlName","recommended_items","placeholder","Recommendation","multiple",""],["matInput","","placeholder","Thumbnail","formControlName","thumbnail","required",""],["aria-label","Tags"],["chipList",""],["selectable","true","removable","true",3,"removed",4,"ngFor","ngForOf"],["placeholder","Tags",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-label","Pictures"],["picList",""],["placeholder","Pictures",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["matInput","","placeholder","Description","formControlName","description",2,"resize","none"],["matInput","","placeholder","Benefits","formControlName","benefits",2,"resize","none"],["mat-raised-button","","color","primary","type","submit",1,"m-t-8",2,"margin-right","5px"],["mat-raised-button","","type","button",1,"m-t-8",3,"routerLink"],[3,"value"],["selectable","true","removable","true",3,"removed"],["matChipRemove",""]],template:function(t,e){if(1&t&&(r.Pb(0,"page-header",0),r.Ub(1,"div",1),r.Ub(2,"div",2),r.Ub(3,"mat-card"),r.Ub(4,"mat-card-title"),r.Pc(5),r.Tb(),r.Ub(6,"form",3),r.cc("submit",(function(t){return e.onFormSubmit(t)})),r.Ub(7,"div",4),r.Ub(8,"div",5),r.Ub(9,"mat-form-field"),r.Ub(10,"mat-label"),r.Pc(11,"Name"),r.Tb(),r.Pb(12,"input",6),r.Nc(13,jt,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(14,"div",5),r.Ub(15,"mat-form-field"),r.Ub(16,"mat-label"),r.Pc(17,"Price"),r.Tb(),r.Pb(18,"input",8),r.Nc(19,Ht,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(20,"div",9),r.Ub(21,"mat-slide-toggle",10),r.Pc(22),r.Tb(),r.Tb(),r.Ub(23,"div",11),r.Ub(24,"mat-form-field"),r.Ub(25,"mat-label"),r.Pc(26,"Category"),r.Tb(),r.Ub(27,"mat-select",12),r.cc("selectionChange",(function(){return e.onCategorySelectionChange()})),r.Nc(28,Qt,2,2,"mat-option",13),r.Tb(),r.Nc(29,zt,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(30,"div",11),r.Ub(31,"mat-form-field"),r.Ub(32,"mat-label"),r.Pc(33,"Sub Category"),r.Tb(),r.Ub(34,"mat-select",14),r.cc("selectionChange",(function(){return e.onSubCategorySelectionChange()})),r.Nc(35,Yt,2,2,"mat-option",13),r.Tb(),r.Nc(36,Wt,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(37,"div",11),r.Ub(38,"mat-form-field"),r.Ub(39,"mat-label"),r.Pc(40,"Type"),r.Tb(),r.Ub(41,"mat-select",15),r.Nc(42,Xt,2,2,"mat-option",13),r.Tb(),r.Nc(43,Jt,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(44,"div",11),r.Ub(45,"mat-form-field"),r.Ub(46,"mat-label"),r.Pc(47,"Unit"),r.Tb(),r.Ub(48,"mat-select",16),r.Nc(49,Zt,2,2,"mat-option",13),r.Tb(),r.Nc(50,te,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(51,"div",17),r.Ub(52,"mat-form-field"),r.Ub(53,"mat-label"),r.Pc(54,"Recommendation"),r.Tb(),r.Ub(55,"mat-select",18),r.Nc(56,ee,2,2,"mat-option",13),r.Tb(),r.Tb(),r.Tb(),r.Ub(57,"div",17),r.Ub(58,"mat-form-field"),r.Ub(59,"mat-label"),r.Pc(60,"Thumbnail"),r.Tb(),r.Pb(61,"input",19),r.Nc(62,ie,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(63,"div",17),r.Ub(64,"mat-form-field"),r.Ub(65,"mat-label"),r.Pc(66,"Tags"),r.Tb(),r.Ub(67,"mat-chip-list",20,21),r.Nc(69,ae,4,1,"mat-chip",22),r.Ub(70,"input",23),r.cc("matChipInputTokenEnd",(function(t){return e.addtag(t)})),r.Tb(),r.Tb(),r.Nc(71,ce,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(72,"div",17),r.Ub(73,"mat-form-field"),r.Ub(74,"mat-label"),r.Pc(75,"Pictures"),r.Tb(),r.Ub(76,"mat-chip-list",24,25),r.Nc(78,ne,4,1,"mat-chip",22),r.Ub(79,"input",26),r.cc("matChipInputTokenEnd",(function(t){return e.addpic(t)})),r.Tb(),r.Tb(),r.Nc(80,re,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(81,"div",17),r.Ub(82,"mat-form-field"),r.Ub(83,"mat-label"),r.Pc(84,"Description"),r.Tb(),r.Pb(85,"textarea",27),r.Nc(86,se,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Ub(87,"div",17),r.Ub(88,"mat-form-field"),r.Ub(89,"mat-label"),r.Pc(90,"Benefits"),r.Tb(),r.Pb(91,"textarea",28),r.Nc(92,oe,3,3,"mat-error",7),r.Tb(),r.Tb(),r.Tb(),r.Ub(93,"button",29),r.Pc(94," Save "),r.Tb(),r.Ub(95,"button",30),r.Pc(96," Back "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&t){const t=r.zc(68),i=r.zc(77);r.qc("title",e.isEditMode?"Edit Item":"New Item"),r.pc("nav",r.rc(30,le)),r.Cb(5),r.Rc("",e.isEditMode?"Edit Item":"New Item"," "),r.Cb(1),r.pc("formGroup",e.itemForm),r.Cb(7),r.pc("ngIf",e.itemForm.get("name").invalid),r.Cb(6),r.pc("ngIf",e.itemForm.get("price").invalid),r.Cb(3),r.Rc(" ",e.is_active_value?"Active":"Inactive"," "),r.Cb(6),r.pc("ngForOf",e.categoryList),r.Cb(1),r.pc("ngIf",e.itemForm.get("category_id").invalid),r.Cb(6),r.pc("ngForOf",e.subCategoryList),r.Cb(1),r.pc("ngIf",e.itemForm.get("subCategory_ids").invalid),r.Cb(6),r.pc("ngForOf",e.itemTypeList),r.Cb(1),r.pc("ngIf",e.itemForm.get("item_type").invalid),r.Cb(6),r.pc("ngForOf",e.unitList),r.Cb(1),r.pc("ngIf",e.itemForm.get("unit_id").invalid),r.Cb(6),r.pc("ngForOf",e.recommendedList),r.Cb(6),r.pc("ngIf",e.itemForm.get("thumbnail").invalid),r.Cb(7),r.pc("ngForOf",e.itemForm.get("category_tags").value),r.Cb(1),r.pc("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),r.Cb(1),r.pc("ngIf",e.itemForm.get("category_tags").invalid),r.Cb(7),r.pc("ngForOf",e.itemForm.get("picture").value),r.Cb(1),r.pc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),r.Cb(1),r.pc("ngIf",e.itemForm.get("picture").invalid),r.Cb(6),r.pc("ngIf",e.itemForm.get("description").invalid),r.Cb(6),r.pc("ngIf",e.itemForm.get("benefits").invalid),r.Cb(3),r.pc("routerLink",r.rc(31,me))}},directives:[j.a,p.c,p.a,h.a,h.c,S.y,S.r,S.k,p.d,g.c,g.g,Gt.b,S.d,S.q,S.i,S.w,f.o,Y.a,H.a,f.n,Bt.c,Bt.b,F.b,c.g,g.b,z.p,Bt.a,X.a,Bt.d],pipes:[Kt.d],styles:[""]}),t})();const ue=[{path:"",component:$t},{path:"new",component:be},{path:"edit/:id",component:be}];let de=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(ue)],c.j]}),t})(),pe=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(e){return new(e||t)},imports:[[a.a,de]]}),t})()}}]);