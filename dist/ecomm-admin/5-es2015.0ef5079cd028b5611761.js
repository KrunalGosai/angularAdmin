(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{jR2d:function(t,e,a){"use strict";a.r(e),a.d(e,"CategoriesModule",(function(){return it}));var r=a("PCNd"),i=a("tyNb"),o=a("vkgz"),c=a("AytR"),n=a("fXoL"),s=a("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.baseURl=c.a.SERVER_ORIGIN}getAllCategories(t=1,e=5,a=""){let r=this.baseURl+`/api/category/allCategoryList?currentPage=${t}&currentPageSize=${e}`;return null!=a&&null!=a&&""!=a.trim()&&(r+="&paretCategoryId="+a),this.http.get(r)}getParentCategories(){return this.http.get(this.baseURl+"/api/category")}newCategory(t){let e=this.baseURl+"/api/category/add",a=new FormData;return a.append("name",t.name),a.append("parent_categoriesId",t.parent),a.append("is_active",t.isactive),a.append("category_sort",t.sort),a.append("category_image",t.img_file),console.log("form data ",a),this.http.post(e,{name:t.name,parent_categoriesId:t.parent,is_active:t.isactive,category_sort:t.sort,category_image:""})}deleteCategory(t){return this.http.delete(this.baseURl+"/api/category/deleteCategory/"+t)}getCategoryDetailsById(t){return this.http.get(this.baseURl+"/api/category/categoryDetails/"+t)}updateCategory(t){return this.http.put(this.baseURl+"/api/category/"+t.id,{name:t.name,parent_categoriesId:t.parent,is_active:t.isactive,category_sort:t.sort,category_image:t.category_img_name})}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(s.b))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=a("2Vo4");let b=(()=>{class t{constructor(){this.categories=new g.a([]),this.parentCategories=new g.a([])}getCategories(){return this.categories.asObservable()}setCategories(t){this.categories.next(t)}getParentCategories(){return this.parentCategories.asObservable()}setParentCategories(t){this.parentCategories.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=a("5eHb");let d=(()=>{class t{constructor(t,e,a){this.api=t,this.state=e,this.toster=a}loadCategories(t=1,e=5,a=""){this.api.getAllCategories(t,e,a).subscribe(t=>{this.state.setCategories(t.data)},t=>console.error("api call error from load categories ",t))}loadParentCategories(){this.api.getParentCategories().subscribe(t=>{this.state.setParentCategories(t.data.categories)},t=>console.error("api call error from load parent categories ",t))}getCategories(){return this.state.getCategories().pipe(Object(o.a)(t=>t))}getParentCategories(){return this.state.getParentCategories().pipe(Object(o.a)(t=>t))}newCategory(t){return this.api.newCategory(t).toPromise().then(t=>(this.loadCategories(),this.toster.success("Category Successfully Created","Success",{timeOut:3e3}),t)).catch(t=>(console.error("api call error from new category ",t),t))}deleteCategory(t){return this.api.deleteCategory(t).toPromise().then(t=>(this.toster.success("Category Successfully Deleted","Success",{timeOut:3e3}),t)).catch(t=>(console.error("api call error from Delete category ",t),t))}getCategoryDetails(t){return this.api.getCategoryDetailsById(t).toPromise()}updateCategory(t){return this.api.updateCategory(t).toPromise().then(t=>(this.loadCategories(),this.toster.success("Category Successfully Updated","Success",{timeOut:3e3}),t)).catch(t=>(console.error("api call error from Update category ",t),t))}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(l),n.Yb(b),n.Yb(m.b))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=a("3Pt+"),p=a("tgey"),f=a("XiUz"),h=a("Wp6s"),y=a("kmnG"),C=a("qFsG"),v=a("ofXK"),U=a("d3UM"),P=a("bTqV"),T=a("NFeN"),F=a("1jcm"),w=a("FKr1"),_=a("sYmb");function I(t,e){1&t&&(n.Ub(0,"mat-error"),n.Pc(1),n.hc(2,"translate"),n.Tb()),2&t&&(n.Cb(1),n.Rc(" ",n.ic(2,1,"validations.required")," "))}function S(t,e){if(1&t&&(n.Ub(0,"mat-option",18),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.pc("value",t._id),n.Cb(1),n.Qc(t.name)}}function x(t,e){1&t&&(n.Ub(0,"mat-error"),n.Pc(1),n.hc(2,"translate"),n.Tb()),2&t&&(n.Cb(1),n.Rc(" ",n.ic(2,1,"validations.required")," "))}function N(t,e){1&t&&(n.Ub(0,"mat-error"),n.Pc(1),n.hc(2,"translate"),n.Tb()),2&t&&(n.Cb(1),n.Rc(" ",n.ic(2,1,"validations.required")," "))}const R=function(){return["home","categories","new"]};let D=(()=>{class t{constructor(t,e,a,r){this.fb=t,this.router=e,this.activeRoute=a,this.categoryFacade=r,this.isEditMode=!1,this.activeEditId="",this.categoryForm=this.fb.group({name:["",[u.w.required]],parent:[""],sort:[1],isactive:!0,category_img:[""],category_img_name:[""],img_file:[null]}),this.activeRoute.params.subscribe(t=>{null!=t.id&&null!=t.id&&""!=t.id&&(this.isEditMode=!0,this.activeEditId=t.id,this.categoryFacade.getCategoryDetails(t.id).then(t=>{let e=t;e=e.categoryDetail,console.log({result:t}),this.categoryForm.patchValue({name:e.name,parent:e.parent_categoriesIds.length>0?e.parent_categoriesIds[0]:"",category_img_name:e.category_image,isactive:e.is_active})}))})}ngOnInit(){this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe(t=>{this.categoryList=t})}fileUpladChange(t){let e=t.target.files;if(e&&null!=e&&e.length>0){let t=e[0];this.categoryForm.get("category_img_name").setValue(t.name),this.categoryForm.get("img_file").setValue(t)}else this.categoryForm.get("category_img_name").reset()}onFormSubmit(t){if(console.log("form value ",this.categoryForm.value),this.categoryForm.valid)if(this.isEditMode){let t=this.categoryForm.value;t.id=this.activeEditId,this.categoryFacade.updateCategory(t).then(t=>{this.categoryForm.reset(),this.router.navigate(["categories"])})}else this.categoryFacade.newCategory(this.categoryForm.value).then(t=>{this.categoryForm.reset(),this.router.navigate(["categories"])})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(u.f),n.Ob(i.f),n.Ob(i.a),n.Ob(d))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-categories-components-category-add"]],decls:42,vars:9,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100"],["matInput","","placeholder","Category Name","formControlName","name","required",""],[4,"ngIf"],["formControlName","parent","placeholder","Parent Category"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","25","fxFlex.lt-sm","100"],["matInput","","placeholder","Sort Order","formControlName","sort","required","","type","number"],["matInput","","placeholder","File Name","type","text","formControlName","category_img_name","required","","readonly",""],["type","file","formControlName","category_img","required","","hidden","true",3,"change"],["file",""],["mat-button","","type","button","matSuffix","","mat-icon-button","","aria-label","Upload",3,"click"],["formControlName","isactive","color","primary"],["mat-raised-button","","color","primary","type","submit",1,"m-t-8"],[3,"value"]],template:function(t,e){if(1&t){const t=n.Vb();n.Pb(0,"page-header",0),n.Ub(1,"div",1),n.Ub(2,"div",2),n.Ub(3,"mat-card"),n.Ub(4,"mat-card-title"),n.Pc(5),n.Tb(),n.Ub(6,"form",3),n.cc("submit",(function(t){return e.onFormSubmit(t)})),n.Ub(7,"div",4),n.Ub(8,"div",5),n.Ub(9,"mat-form-field"),n.Ub(10,"mat-label"),n.Pc(11,"Name"),n.Tb(),n.Pb(12,"input",6),n.Nc(13,I,3,3,"mat-error",7),n.Tb(),n.Tb(),n.Ub(14,"div",5),n.Ub(15,"mat-form-field"),n.Ub(16,"mat-label"),n.Pc(17,"Parent Category"),n.Tb(),n.Ub(18,"mat-select",8),n.Nc(19,S,2,2,"mat-option",9),n.Tb(),n.Tb(),n.Tb(),n.Ub(20,"div",10),n.Ub(21,"mat-form-field"),n.Ub(22,"mat-label"),n.Pc(23,"Sort"),n.Tb(),n.Pb(24,"input",11),n.Nc(25,x,3,3,"mat-error",7),n.Tb(),n.Tb(),n.Ub(26,"div",10),n.Ub(27,"mat-form-field"),n.Ub(28,"mat-label"),n.Pc(29,"Image"),n.Tb(),n.Pb(30,"input",12),n.Ub(31,"input",13,14),n.cc("change",(function(t){return e.fileUpladChange(t)})),n.Tb(),n.Ub(33,"button",15),n.cc("click",(function(){return n.Dc(t),n.zc(32).click()})),n.Ub(34,"mat-icon"),n.Pc(35,"folder"),n.Tb(),n.Tb(),n.Nc(36,N,3,3,"mat-error",7),n.Tb(),n.Tb(),n.Ub(37,"div",10),n.Ub(38,"mat-slide-toggle",16),n.Pc(39," Is Active "),n.Tb(),n.Tb(),n.Tb(),n.Ub(40,"button",17),n.Pc(41,"Save"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()}2&t&&(n.qc("title",e.isEditMode?"Edit Category":"New Category"),n.pc("nav",n.rc(8,R)),n.Cb(5),n.Rc("",e.isEditMode?"Edit Category":"New Category"," "),n.Cb(1),n.pc("formGroup",e.categoryForm),n.Cb(7),n.pc("ngIf",e.categoryForm.get("name").invalid),n.Cb(6),n.pc("ngForOf",e.categoryList),n.Cb(6),n.pc("ngIf",e.categoryForm.get("sort").invalid),n.Cb(11),n.pc("ngIf",e.categoryForm.get("category_img").invalid))},directives:[p.a,f.c,f.a,h.a,h.c,u.x,u.q,u.k,f.d,y.c,y.g,C.b,u.d,u.p,u.i,u.v,v.o,U.a,v.n,u.t,P.b,y.i,T.a,F.a,y.b,w.p],pipes:[_.d],styles:[""]}),t})();var O=a("0IaG");let k=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.title=e.title,this.message=e.message}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(O.h),n.Ob(O.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-confirm"]],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(n.Ub(0,"h1",0),n.Pc(1),n.Tb(),n.Ub(2,"div",1),n.Ub(3,"p"),n.Pc(4),n.Tb(),n.Tb(),n.Ub(5,"div",2),n.Ub(6,"button",3),n.cc("click",(function(){return e.onDismiss()})),n.Pc(7,"No"),n.Tb(),n.Ub(8,"button",4),n.cc("click",(function(){return e.onConfirm()})),n.Pc(9,"Yes"),n.Tb(),n.Tb()),2&t&&(n.Cb(1),n.Rc(" ",e.title,"\n"),n.Cb(3),n.Qc(e.message))},directives:[O.i,O.f,O.d,P.b],styles:[""]}),t})();class M{constructor(t,e){this.title=t,this.message=e}}let E=(()=>{class t{constructor(t){this.dialog=t}confirm(t,e){const a=new M(e,t);return this.dialog.open(k,{maxWidth:"400px",data:a}).afterClosed()}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(O.c))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var L=a("M9IT"),q=a("Dh3D"),z=a("+0xr"),V=a("zkoq");function $(t,e){if(1&t&&(n.Ub(0,"mat-option",22),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.pc("value",t._id),n.Cb(1),n.Qc(t.name)}}function j(t,e){1&t&&(n.Ub(0,"th",23),n.Pc(1," Name "),n.Tb())}function A(t,e){if(1&t&&(n.Ub(0,"td",24),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Rc(" ",t.name," ")}}function Y(t,e){1&t&&(n.Ub(0,"th",23),n.Pc(1," parent "),n.Tb())}function G(t,e){if(1&t&&(n.Ub(0,"span"),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Rc(" ",t.name," ")}}function K(t,e){if(1&t&&(n.Ub(0,"td",24),n.Nc(1,G,2,1,"span",25),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.pc("ngForOf",t.parent_categoriesIds)}}function H(t,e){1&t&&(n.Ub(0,"th",23),n.Pc(1," Active "),n.Tb())}function Q(t,e){if(1&t&&(n.Ub(0,"td",24),n.Pc(1),n.Tb()),2&t){const t=e.$implicit;n.Cb(1),n.Rc(" ",t.is_active?"Yes":"No"," ")}}function X(t,e){1&t&&(n.Ub(0,"th",23),n.Pc(1," Controls "),n.Tb())}const B=function(t){return["edit",t]};function J(t,e){if(1&t){const t=n.Vb();n.Ub(0,"td",24),n.Ub(1,"mat-grid-list",26),n.Ub(2,"mat-grid-tile"),n.Ub(3,"button",27),n.Ub(4,"mat-icon",28),n.Pc(5,"create"),n.Tb(),n.Tb(),n.Tb(),n.Ub(6,"mat-grid-tile"),n.Ub(7,"button",29),n.cc("click",(function(){n.Dc(t);const a=e.$implicit;return n.gc().deleteIcon(a._id)})),n.Ub(8,"mat-icon",30),n.Pc(9,"delete"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=e.$implicit;n.Cb(3),n.pc("routerLink",n.sc(1,B,t._id))}}function W(t,e){1&t&&n.Pb(0,"tr",31)}function Z(t,e){1&t&&n.Pb(0,"tr",32)}function tt(t,e){if(1&t&&(n.Ub(0,"tr",33),n.Ub(1,"td",34),n.Pc(2),n.Tb(),n.Tb()),2&t){n.gc();const t=n.zc(25);n.Cb(2),n.Rc('No data matching the filter "',t.value,'"')}}const et=function(){return[5,10,25]},at=[{path:"",component:(()=>{class t{constructor(t,e){this.categoriesFacade=t,this.confirmService=e,this.displayedColumns=["name","parent","active","controls"],this.parentCategoryFilterValue="",this.pageDetails={currentPage:1,itemsPerPage:5,totalPages:3,totalRecords:100},this.q={username:"",email:"",gender:""}}ngOnInit(){this.categoriesFacade.loadCategories(),this.categoriesFacade.loadParentCategories(),this.categoriesFacade.getCategories().subscribe(t=>{this.dataSource=new z.p(t)}),this.categoriesFacade.getParentCategories().subscribe(t=>{this.parentCategoryList=t})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}pageEvent(t){this.pageDetails.itemsPerPage=t.pageSize,this.pageDetails.currentPage=t.pageIndex,this.categoriesFacade.loadCategories(1,t.pageSize,"")}deleteIcon(t){this.confirmService.confirm("Are you sure want to delete this category?","Confirm").subscribe(e=>{1==e&&this.categoriesFacade.deleteCategory(t).then(t=>this.categoriesFacade.loadCategories(this.pageDetails.currentPage+1,this.pageDetails.itemsPerPage))})}navigateToEdit(t){}filterCategories(){this.categoriesFacade.loadCategories(this.pageDetails.currentPage+1,this.pageDetails.itemsPerPage,this.parentCategoryFilterValue)}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(d),n.Ob(E))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-categories-components-category-list"]],viewQuery:function(t,e){var a;1&t&&(n.Sc(L.a,!0),n.Sc(q.a,!0)),2&t&&(n.yc(a=n.dc())&&(e.paginator=a.first),n.yc(a=n.dc())&&(e.sort=a.first))},decls:44,vars:9,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["fxFlex","25","fxFlex.lt-sm","100",1,"matero-col"],["name","gender",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["matInput","","placeholder","Ex. Abc",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","parent"],["matColumnDef","active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageIndex","pageSize","pageSizeOptions","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["cols","2","rowHeight","50px"],["mat-icon-button","","aria-label","Edit",3,"routerLink"],["color","primary"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(n.Pb(0,"page-header"),n.Ub(1,"section"),n.Ub(2,"a",0),n.Pc(3," Add New "),n.Tb(),n.Tb(),n.Pb(4,"br"),n.Ub(5,"div",1),n.Ub(6,"div",2),n.Ub(7,"mat-card"),n.Ub(8,"mat-card-title"),n.Pc(9,"Filter"),n.Tb(),n.Ub(10,"form"),n.Ub(11,"mat-form-field",3),n.Ub(12,"mat-label"),n.Pc(13,"Parent Category"),n.Tb(),n.Ub(14,"mat-select",4),n.cc("ngModelChange",(function(t){return e.parentCategoryFilterValue=t})),n.Ub(15,"mat-option",5),n.Pc(16,"--Select--"),n.Tb(),n.Nc(17,$,2,2,"mat-option",6),n.Tb(),n.Tb(),n.Ub(18,"div",3),n.Ub(19,"button",7),n.cc("click",(function(){return e.filterCategories()})),n.Pc(20,"Search"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(21,"mat-form-field"),n.Ub(22,"mat-label"),n.Pc(23,"Search"),n.Tb(),n.Ub(24,"input",8,9),n.cc("keyup",(function(t){return e.applyFilter(t)})),n.Tb(),n.Tb(),n.Ub(26,"div",10),n.Ub(27,"table",11),n.Sb(28,12),n.Nc(29,j,2,0,"th",13),n.Nc(30,A,2,1,"td",14),n.Rb(),n.Sb(31,15),n.Nc(32,Y,2,0,"th",13),n.Nc(33,K,2,1,"td",14),n.Rb(),n.Sb(34,16),n.Nc(35,H,2,0,"th",13),n.Nc(36,Q,2,1,"td",14),n.Rb(),n.Sb(37,17),n.Nc(38,X,2,0,"th",13),n.Nc(39,J,10,3,"td",14),n.Rb(),n.Nc(40,W,1,0,"tr",18),n.Nc(41,Z,1,0,"tr",19),n.Nc(42,tt,3,1,"tr",20),n.Tb(),n.Ub(43,"mat-paginator",21),n.cc("page",(function(t){return e.pageEvent(t)})),n.Tb(),n.Tb()),2&t&&(n.Cb(14),n.pc("ngModel",e.parentCategoryFilterValue),n.Cb(3),n.pc("ngForOf",e.parentCategoryList),n.Cb(10),n.pc("dataSource",e.dataSource),n.Cb(13),n.pc("matHeaderRowDef",e.displayedColumns),n.Cb(1),n.pc("matRowDefColumns",e.displayedColumns),n.Cb(2),n.pc("pageIndex",0)("pageSize",e.pageDetails.itemsPerPage)("pageSizeOptions",n.rc(8,et)))},directives:[p.a,P.a,i.i,f.c,f.a,h.a,h.c,u.x,u.q,u.r,y.c,y.g,U.a,u.p,u.s,w.p,v.n,P.b,C.b,z.o,q.a,z.c,z.i,z.b,z.k,z.n,z.l,L.a,z.h,q.b,z.a,V.a,V.c,i.g,T.a,z.j,z.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}"]}),t})()},{path:"new",component:D},{path:"edit/:id",component:D}];let rt=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[i.j.forChild(at)],i.j]}),t})(),it=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[r.a,rt]]}),t})()}}]);