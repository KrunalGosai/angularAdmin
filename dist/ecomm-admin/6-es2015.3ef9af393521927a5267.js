(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"6kFG":function(e,t,a){"use strict";a.r(t),a.d(t,"BannersModule",(function(){return ne}));var r=a("PCNd"),n=a("tyNb"),i=a("Xibt"),c=a("Dh3D"),o=a("+0xr"),b=a("2Vo4"),s=a("fXoL");let l=(()=>{class e{constructor(){this.banners=new b.a({}),this.editBanner=new b.a({})}getBanner(){return this.banners.asObservable()}setBanner(e){this.banners.next(e)}getEditBanner(){return this.editBanner.asObservable()}setEditBanner(e){this.editBanner.next(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=a("AytR"),m=a("tk/3");let u=(()=>{class e{constructor(e){this.http=e,this.baseURl=d.a.SERVER_ORIGIN}getAllBanner(e=1,t=5,a=""){let r=this.baseURl+`/api/banner?currentPage=${e}&currentPageSize=${t}`;return null!=a&&null!=a&&""!=a.trim()&&(r+="&searchByName="+a),this.http.get(r)}newBanner(e){return this.http.post(this.baseURl+"/api/banner",{name:e.name,banner_image_url:e.banner_image_url,banner_redirect_url:e.banner_redirect_url,is_active:e.is_active,type:e.type,category_id:e.category_id})}deleteBanner(e){return this.http.delete(this.baseURl+"/api/banner/delete/"+e)}getBannerDetailsById(e){return this.http.get(this.baseURl+"/api/banner/"+e)}updateBanner(e){return this.http.put(this.baseURl+"/api/banner/edit/"+e._id,{name:e.name,banner_image_url:e.banner_image_url,banner_redirect_url:e.banner_redirect_url,is_active:e.is_active,type:e.type,category_id:e.category_id})}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(m.b))},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=a("vkgz"),h=a("5eHb");let f=(()=>{class e{constructor(e,t,a){this.api=e,this.state=t,this.toster=a}loadBanners(e=1,t=200,a=""){this.api.getAllBanner(e,t,a).subscribe(e=>{this.state.setBanner(e)},e=>console.error("api call error from load categories ",e))}getBanners(){return this.state.getBanner().pipe(Object(p.a)(e=>e))}newBanner(e){return this.api.newBanner(e).toPromise().then(e=>(this.loadBanners(),this.toster.success("Banner Successfully Created","Success",{timeOut:3e3}),e)).catch(e=>{throw console.error("api call error from new banner ",e),e})}deleteBanner(e){return this.api.deleteBanner(e).toPromise().then(e=>(this.toster.success("Banner Successfully Deleted","Success",{timeOut:3e3}),e)).catch(e=>{throw console.error("api call error from Delete baner ",e),e})}getBannerDetails(){return this.state.getEditBanner().pipe(Object(p.a)(e=>e))}loadBannerDetails(e){return this.api.getBannerDetailsById(e).toPromise().then(e=>(this.state.setEditBanner(e.data),e)).catch(e=>{throw console.error("api call error from load banner Details",e),e})}updateBanner(e){return this.api.updateBanner(e).toPromise().then(e=>(this.loadBanners(),this.toster.success("Banner Successfully Updated","Success",{timeOut:3e3}),e)).catch(e=>{throw console.error("api call error from Update banner ",e),e})}}return e.\u0275fac=function(t){return new(t||e)(s.Yb(u),s.Yb(l),s.Yb(h.b))},e.\u0275prov=s.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=a("tgey"),U=a("bTqV"),v=a("XiUz"),T=a("Wp6s"),y=a("3Pt+"),P=a("kmnG"),_=a("qFsG"),B=a("zkoq"),C=a("NFeN");function w(e,t){1&e&&(s.Ub(0,"th",23),s.Pc(1," Name "),s.Tb())}function F(e,t){if(1&e&&(s.Ub(0,"td",24),s.Pc(1),s.Tb()),2&e){const e=t.$implicit;s.Cb(1),s.Rc(" ",e.name," ")}}function N(e,t){1&e&&(s.Ub(0,"th",25),s.Pc(1," Banner Image "),s.Tb())}function R(e,t){if(1&e&&(s.Ub(0,"td",24),s.Pb(1,"img",26),s.Tb()),2&e){const e=t.$implicit;s.Cb(1),s.qc("src",e.banner_image_url,s.Fc)}}function x(e,t){1&e&&(s.Ub(0,"th",23),s.Pc(1," Type "),s.Tb())}function D(e,t){if(1&e&&(s.Ub(0,"td",24),s.Pc(1),s.Tb()),2&e){const e=t.$implicit;s.Cb(1),s.Rc(" ",e.type," ")}}function I(e,t){1&e&&(s.Ub(0,"th",25),s.Pc(1," Category "),s.Tb())}function S(e,t){if(1&e&&(s.Ub(0,"td",24),s.Pc(1),s.Tb()),2&e){const e=t.$implicit;s.Cb(1),s.Rc(" ",e.category_id," ")}}function E(e,t){1&e&&(s.Ub(0,"th",23),s.Pc(1," Active "),s.Tb())}function k(e,t){if(1&e&&(s.Ub(0,"td",24),s.Pc(1),s.Tb()),2&e){const e=t.$implicit;s.Cb(1),s.Rc(" ",e.is_active?"Yes":"No"," ")}}function O(e,t){1&e&&(s.Ub(0,"th",23),s.Pc(1," Controls "),s.Tb())}const M=function(){return[]};function q(e,t){if(1&e){const e=s.Vb();s.Ub(0,"td",24),s.Ub(1,"mat-grid-list",27),s.Ub(2,"mat-grid-tile"),s.Ub(3,"button",28),s.cc("click",(function(){s.Dc(e);const a=t.$implicit;return s.gc().navigateToEdit(a._id)})),s.Ub(4,"mat-icon",29),s.Pc(5,"create"),s.Tb(),s.Tb(),s.Tb(),s.Ub(6,"mat-grid-tile"),s.Ub(7,"button",30),s.cc("click",(function(){s.Dc(e);const a=t.$implicit;return s.gc().deleteIcon(a._id)})),s.Ub(8,"mat-icon",31),s.Pc(9,"delete"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()}2&e&&(s.Cb(3),s.pc("routerLink",s.rc(1,M)))}function L(e,t){1&e&&s.Pb(0,"tr",32)}function A(e,t){1&e&&s.Pb(0,"tr",33)}let $=(()=>{class e{constructor(e,t,a){this.router=e,this.bannerFacade=t,this.confirmService=a,this.displayedColumns=["name","banner_image_url","type","Category","is_active","controls"],this.bannerNameFilter="",this.pageDetails={currentPage:1,itemsPerPage:200,totalPages:3,totalRecords:200},this.totalBanner=0,this.q={username:"",email:"",gender:""}}ngOnInit(){this.bannerFacade.loadBanners(),this.bannerFacade.getBanners().subscribe(e=>{this.dataSource=new o.p(e.data),this.dataSource.sort=this.sort,this.totalBanner=e.totalCount})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}pageEvent(e){this.pageDetails.itemsPerPage=e.pageSize,this.pageDetails.currentPage=e.pageIndex+1,this.bannerFacade.loadBanners(this.pageDetails.currentPage,e.pageSize,"")}deleteIcon(e){this.confirmService.confirm("Are you sure want to delete this Banner?","Confirm").subscribe(t=>{1==t&&this.bannerFacade.deleteBanner(e).then(e=>this.bannerFacade.loadBanners(this.pageDetails.currentPage,this.pageDetails.itemsPerPage))})}navigateToEdit(e){this.bannerFacade.loadBannerDetails(e).then(t=>{this.router.navigate(["banners","edit",e])})}filterBanner(){this.bannerFacade.loadBanners(this.pageDetails.currentPage,this.pageDetails.itemsPerPage,this.bannerNameFilter)}resetFilter(){this.bannerNameFilter=""}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(n.f),s.Ob(f),s.Ob(i.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-banners-banner-list"]],viewQuery:function(e,t){var a;1&e&&s.Sc(c.a,!0),2&e&&s.yc(a=s.dc())&&(t.sort=a.first)},decls:45,vars:4,consts:[["mat-raised-button","","aria-label","View basic sidenav example","color","primary","routerLink","new"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[1,"m-r-8"],["matInput","","placeholder","Name","name","bannerNameFilter",3,"ngModel","ngModelChange"],["fxFlex","25","fxFlex.lt-sm","100",1,"matero-col"],["mat-raised-button","","color","primary",2,"margin-right","5px",3,"click"],["mat-raised-button","",3,"click"],["matInput","","placeholder","Ex. Abc",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","banner_image_url"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","Category"],["matColumnDef","is_active"],["matColumnDef","controls"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["alt","Banner Image","width","100px","height","50px",3,"src"],["cols","2","rowHeight","50px"],["mat-icon-button","","aria-label","Edit",3,"routerLink","click"],["color","primary"],["mat-icon-button","","aria-label","Delete",3,"click"],["color","accent"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s.Pb(0,"page-header"),s.Ub(1,"section"),s.Ub(2,"a",0),s.Pc(3," Add New "),s.Tb(),s.Tb(),s.Pb(4,"br"),s.Ub(5,"div",1),s.Ub(6,"div",2),s.Ub(7,"mat-card"),s.Ub(8,"mat-card-title"),s.Pc(9,"Filter"),s.Tb(),s.Ub(10,"form"),s.Ub(11,"mat-form-field",3),s.Ub(12,"input",4),s.cc("ngModelChange",(function(e){return t.bannerNameFilter=e})),s.Tb(),s.Tb(),s.Ub(13,"div",5),s.Ub(14,"button",6),s.cc("click",(function(){return t.filterBanner()})),s.Pc(15,"Search"),s.Tb(),s.Ub(16,"button",7),s.cc("click",(function(){return t.resetFilter()})),s.Pc(17,"Reset"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(18,"mat-form-field"),s.Ub(19,"mat-label"),s.Pc(20,"Search"),s.Tb(),s.Ub(21,"input",8,9),s.cc("keyup",(function(e){return t.applyFilter(e)})),s.Tb(),s.Tb(),s.Ub(23,"div",10),s.Ub(24,"table",11),s.Sb(25,12),s.Nc(26,w,2,0,"th",13),s.Nc(27,F,2,1,"td",14),s.Rb(),s.Sb(28,15),s.Nc(29,N,2,0,"th",16),s.Nc(30,R,2,1,"td",14),s.Rb(),s.Sb(31,17),s.Nc(32,x,2,0,"th",13),s.Nc(33,D,2,1,"td",14),s.Rb(),s.Sb(34,18),s.Nc(35,I,2,0,"th",16),s.Nc(36,S,2,1,"td",14),s.Rb(),s.Sb(37,19),s.Nc(38,E,2,0,"th",13),s.Nc(39,k,2,1,"td",14),s.Rb(),s.Sb(40,20),s.Nc(41,O,2,0,"th",13),s.Nc(42,q,10,2,"td",14),s.Rb(),s.Nc(43,L,1,0,"tr",21),s.Nc(44,A,1,0,"tr",22),s.Tb(),s.Tb()),2&e&&(s.Cb(12),s.pc("ngModel",t.bannerNameFilter),s.Cb(12),s.pc("dataSource",t.dataSource),s.Cb(19),s.pc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.pc("matRowDefColumns",t.displayedColumns))},directives:[g.a,U.a,n.i,v.c,v.a,T.a,T.c,y.x,y.q,y.r,P.c,_.b,y.d,y.p,y.s,U.b,P.g,o.o,c.a,o.c,o.i,o.b,o.k,o.n,o.h,c.b,o.a,B.a,B.c,n.g,C.a,o.j,o.m],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:auto}"]}),e})();var j=a("uEtv"),z=a("ofXK"),G=a("d3UM"),H=a("FKr1"),V=a("1jcm"),Y=a("sYmb");function K(e,t){1&e&&(s.Ub(0,"mat-error"),s.Pc(1),s.hc(2,"translate"),s.Tb()),2&e&&(s.Cb(1),s.Rc(" ",s.ic(2,1,"validations.required")," "))}function X(e,t){1&e&&(s.Ub(0,"mat-error"),s.Pc(1),s.hc(2,"translate"),s.Tb()),2&e&&(s.Cb(1),s.Rc(" ",s.ic(2,1,"validations.required")," "))}function J(e,t){if(1&e&&(s.Ub(0,"mat-option",19),s.Pc(1),s.Tb()),2&e){const e=t.$implicit;s.pc("value",e._id),s.Cb(1),s.Qc(e.name)}}function Q(e,t){1&e&&(s.Ub(0,"mat-error"),s.Pc(1),s.hc(2,"translate"),s.Tb()),2&e&&(s.Cb(1),s.Rc(" ",s.ic(2,1,"validations.required")," "))}function W(e,t){1&e&&(s.Ub(0,"mat-error"),s.Pc(1),s.hc(2,"translate"),s.Tb()),2&e&&(s.Cb(1),s.Rc(" ",s.ic(2,1,"validations.required")," "))}const Z=function(){return["home","banners","new"]},ee=function(){return["/banners"]};let te=(()=>{class e{constructor(e,t,a,r,n){this.fb=e,this.router=t,this.activeRoute=a,this.bannerFacade=r,this.categoryFacade=n,this.isEditMode=!1,this.activeEditId="",this.bannerForm=this.fb.group({name:["",[y.w.required]],banner_image_url:[""],banner_redirect_url:[""],is_active:!0,type:[""],category_id:[""]}),this.activeRoute.params.subscribe(e=>{null!=e.id&&null!=e.id&&""!=e.id&&(this.isEditMode=!0,this.activeEditId=e.id)})}ngOnInit(){this.categoryFacade.loadParentCategories(),this.categoryFacade.getParentCategories().subscribe(e=>{this.categoryList=e}),this.isEditMode&&this.bannerFacade.getBannerDetails().subscribe(e=>{this.bannerForm.patchValue({name:e.name,banner_image_url:e.banner_image_url,banner_redirect_url:e.banner_redirect_url,is_active:e.is_active,type:e.type,category_id:e.category_id})},e=>console.error(e))}onFormSubmit(e){if(this.bannerForm.valid)if(this.isEditMode){let e=this.bannerForm.value;e._id=this.activeEditId,this.bannerFacade.updateBanner(e).then(e=>{this.bannerForm.reset(),this.router.navigate(["banners"])})}else this.bannerFacade.newBanner(this.bannerForm.value).then(e=>{this.bannerForm.reset(),this.router.navigate(["banners"])})}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(y.f),s.Ob(n.f),s.Ob(n.a),s.Ob(f),s.Ob(j.a))},e.\u0275cmp=s.Ib({type:e,selectors:[["app-banners-banner-add"]],decls:49,vars:12,consts:[[3,"title","nav"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.lt-sm","100",1,"matero-col"],[1,"form-field-full",3,"formGroup","submit"],["fxLayout","row wrap","fxLayoutGap","8px grid"],["fxFlex","50","fxFlex.lt-sm","100"],["matInput","","placeholder","Banner Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","placeholder","Image Url","type","text","formControlName","banner_image_url","required",""],["fxFlex","25","fxFlex.lt-sm","100"],["matInput","","placeholder","Redirect Url","formControlName","banner_redirect_url"],["formControlName","category_id","placeholder","Category","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","type","placeholder","Type","required",""],["value","ITEM_BANNER"],["value","TOP_BANNER"],["formControlName","is_active","color","primary"],["mat-raised-button","","color","primary","type","submit",1,"m-t-8",2,"margin-right","5px"],["mat-raised-button","","type","button",1,"m-t-8",3,"routerLink"],[3,"value"]],template:function(e,t){1&e&&(s.Pb(0,"page-header",0),s.Ub(1,"div",1),s.Ub(2,"div",2),s.Ub(3,"mat-card"),s.Ub(4,"mat-card-title"),s.Pc(5),s.Tb(),s.Ub(6,"form",3),s.cc("submit",(function(e){return t.onFormSubmit(e)})),s.Ub(7,"div",4),s.Ub(8,"div",5),s.Ub(9,"mat-form-field"),s.Ub(10,"mat-label"),s.Pc(11,"Name"),s.Tb(),s.Pb(12,"input",6),s.Nc(13,K,3,3,"mat-error",7),s.Tb(),s.Tb(),s.Ub(14,"div",5),s.Ub(15,"mat-form-field"),s.Ub(16,"mat-label"),s.Pc(17,"Image Url"),s.Tb(),s.Pb(18,"input",8),s.Nc(19,X,3,3,"mat-error",7),s.Tb(),s.Tb(),s.Ub(20,"div",9),s.Ub(21,"mat-form-field"),s.Ub(22,"mat-label"),s.Pc(23,"Banner Redirect Url"),s.Tb(),s.Pb(24,"input",10),s.Tb(),s.Tb(),s.Ub(25,"div",9),s.Ub(26,"mat-form-field"),s.Ub(27,"mat-label"),s.Pc(28,"Category"),s.Tb(),s.Ub(29,"mat-select",11),s.Nc(30,J,2,2,"mat-option",12),s.Tb(),s.Nc(31,Q,3,3,"mat-error",7),s.Tb(),s.Tb(),s.Ub(32,"div",9),s.Ub(33,"mat-form-field"),s.Ub(34,"mat-label"),s.Pc(35,"Type"),s.Tb(),s.Ub(36,"mat-select",13),s.Ub(37,"mat-option",14),s.Pc(38,"ITEM BANNER"),s.Tb(),s.Ub(39,"mat-option",15),s.Pc(40,"TOP BANNER"),s.Tb(),s.Tb(),s.Nc(41,W,3,3,"mat-error",7),s.Tb(),s.Tb(),s.Ub(42,"div",9),s.Ub(43,"mat-slide-toggle",16),s.Pc(44," Is Active "),s.Tb(),s.Tb(),s.Tb(),s.Ub(45,"button",17),s.Pc(46,"Save"),s.Tb(),s.Ub(47,"button",18),s.Pc(48," Back"),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&e&&(s.qc("title",t.isEditMode?"Edit Banner":"New Banner"),s.pc("nav",s.rc(10,Z)),s.Cb(5),s.Rc("",t.isEditMode?"Edit Banner":"New Banner"," "),s.Cb(1),s.pc("formGroup",t.bannerForm),s.Cb(7),s.pc("ngIf",t.bannerForm.get("name").invalid),s.Cb(6),s.pc("ngIf",t.bannerForm.get("banner_image_url").invalid),s.Cb(11),s.pc("ngForOf",t.categoryList),s.Cb(1),s.pc("ngIf",t.bannerForm.get("category_id").invalid),s.Cb(10),s.pc("ngIf",t.bannerForm.get("type").invalid),s.Cb(6),s.pc("routerLink",s.rc(11,ee)))},directives:[g.a,v.c,v.a,T.a,T.c,y.x,y.q,y.k,v.d,P.c,P.g,_.b,y.d,y.p,y.i,y.v,z.o,G.a,z.n,H.p,V.a,U.b,n.g,P.b],pipes:[Y.d],styles:[""]}),e})();const ae=[{path:"",component:$},{path:"new",component:te},{path:"edit/:id",component:te}];let re=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(ae)],n.j]}),e})(),ne=(()=>{class e{}return e.\u0275mod=s.Mb({type:e}),e.\u0275inj=s.Lb({factory:function(t){return new(t||e)},imports:[[r.a,re]]}),e})()}}]);